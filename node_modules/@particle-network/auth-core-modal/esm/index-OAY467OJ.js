"use client";
import{f as l}from"./chunk-PZJW4BGW.js";import"./chunk-O6HTNRMG.js";import{J as y,K as g,j as f}from"./chunk-ZHONLBSB.js";import"./chunk-L535NPP3.js";import{isConnected as n}from"@particle-network/auth-core";import{message as L}from"antd";import w from"base64url";import T from"qs";import P,{useEffect as z}from"react";var h=`.index-container {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  height: 100%;
}
`;var I=()=>{let{connect:S}=l(),v=y(),{setConnectionStatus:r,socialConnectCallback:e}=g(),x=async()=>{var s;try{let t=T.parse(f()?"":window.location.search,{ignoreQueryPrefix:!0}),a=t==null?void 0:t.particleThirdpartyParams;if(!a){n()||r("disconnected");return}delete t.particleThirdpartyParams;let c=(window.location.origin+window.location.pathname+"?"+T.stringify(t)).replace(/\?$/,"");window.history.replaceState({},document.title,c),document.title=document.title||c;let N=JSON.parse(w.decode(a)),{code:d,nonce:o,appState:p,error:i}=N,E=p?JSON.parse(w.decode(p)):{},{authorization:O,chain:b,purpose:m,verifyToken:j}=E;if(i){n()||r("disconnected"),m?L.error(i):(s=e==null?void 0:e.onError)==null||s.call(e,new Error(i));return}let u=o.split("@")[0];m==="bindLoginAccount"?v("/login-account/bind-loading",{state:{authType:u,verifyToken:j,code:d,nonce:o},replace:!0}):(await new Promise(A=>{setTimeout(()=>{A(!0)},20)}),await S({socialType:u,code:d,nonce:o,authorization:O,chain:b}))}catch{n()||r("disconnected")}};return z(()=>{x()},[]),P.createElement("div",{className:"index-container"},P.createElement("style",null,h))},M=I;export{M as default};
