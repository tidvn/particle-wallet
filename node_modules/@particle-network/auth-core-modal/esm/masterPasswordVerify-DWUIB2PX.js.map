{
  "version": 3,
  "sources": ["../src/pages/account/masterPasswordVerify/index.tsx"],
  "sourcesContent": ["import { RecordType } from '@particle-network/analytics';\nimport { analyticsRecord, restoreWallet } from '@particle-network/auth-core';\nimport { useRequest } from 'ahooks';\nimport { Button, Form, Space, Typography } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport InputPassword from '../../../components/input-password';\nimport PowerFooter from '../../../components/power-footer';\nimport { useCustomNavigate, useParticleAuth } from '../../../context';\nimport useMessage from '../../../context/hooks/useMessage';\nimport styles from './index.less';\n\nexport type MasterPasswordVerifyProps = {\n    loginVerifyMasterPassword?: boolean;\n};\n\nconst MasterPasswordVerify = (props?: MasterPasswordVerifyProps) => {\n    const { Text, Link } = Typography;\n    const navigate = useCustomNavigate();\n    const [showPasswordError, setShowPasswordError] = useState(false);\n    const { t } = useTranslation();\n\n    const { loginVerifyMasterPassword } = props || {};\n    const containerRef = React.useRef<any>(null);\n    const [nextDisabled, setNextDisabled] = useState(true);\n    const { loginSuccessRedirectToApp } = useParticleAuth();\n    const message = useMessage();\n    const { run: runCheckMasterPassword, loading } = useRequest(restoreWallet, {\n        manual: true,\n        onBefore: () => {\n            analyticsRecord({\n                // eslint-disable-next-line camelcase\n                record_type: RecordType.PAGE_MASTER_PASSWORD_VERIFY, // \u4E3B\u5BC6\u7801\u9A8C\u8BC1\n            });\n        },\n        onSuccess: (result: boolean) => {\n            if (result) {\n                analyticsRecord({\n                    // eslint-disable-next-line camelcase\n                    record_type: RecordType.PAGE_MASTER_PASSWORD_VERIFY_SUCCESS, // \u4E3B\u5BC6\u7801\u9A8C\u8BC1\u6210\u529F\n                });\n                if (loginVerifyMasterPassword) {\n                    loginSuccessRedirectToApp();\n                } else {\n                    navigate(-1);\n                }\n            } else {\n                setShowPasswordError(true);\n            }\n        },\n        onError: (error) => {\n            console.log('checkMasterPassword error', error);\n            message.error(error?.message || 'check master password error');\n        },\n    });\n\n    const toDecription = () => {\n        navigate('/account/master-password/description');\n    };\n\n    const verifyMasterPassword = (values: any) => {\n        const { password } = values;\n        if (password?.length >= 6 && password?.length <= 20) {\n            setShowPasswordError(false);\n            runCheckMasterPassword(password);\n        } else {\n            setShowPasswordError(true);\n        }\n    };\n\n    const onValuesChange = (values: any) => {\n        const { password } = values;\n        setShowPasswordError(false);\n        setNextDisabled(!password);\n    };\n\n    useEffect(() => {\n        setTimeout(() => {\n            containerRef.current?.querySelector('.password-input input')?.focus();\n        }, 200);\n    }, []);\n\n    return (\n        <div className=\"mp-verify-container\" ref={containerRef}>\n            <style>{styles as unknown as string}</style>\n            <div className=\"mp-verify-title\">{t('account.restore_wallet')}</div>\n            <Form layout=\"vertical\" onFinish={verifyMasterPassword} onValuesChange={onValuesChange}>\n                <div className=\"scroll-content\">\n                    <div className=\"mp-input-name padding-top-16\">{t('account.master_password')}</div>\n                    <Form.Item name=\"password\">\n                        <InputPassword className=\"mp-input\" />\n                    </Form.Item>\n                    {showPasswordError && <div className=\"mp-input-error\">{t('account.password_error')}</div>}\n                    <Space direction=\"vertical\" className=\"mp-tip-space\">\n                        <Text>{t('account.mpc_tss_intro')}</Text>\n                        <Text>\n                            {t('account.input_decrypt_hint')}{' '}\n                            <Link onClick={toDecription} className=\"more-text-btn\">\n                                {t('account.learn_more_period')}\n                            </Link>\n                        </Text>\n                    </Space>\n                </div>\n                <Form.Item>\n                    <div className=\"bottom-container footer\">\n                        <Button\n                            className=\"primary-antd-btn mp-next\"\n                            htmlType=\"submit\"\n                            loading={loading}\n                            disabled={nextDisabled}\n                        >\n                            {t('common.confirm')}\n                        </Button>\n                        <PowerFooter className=\"footer-box-v2\" />\n                    </div>\n                </Form.Item>\n            </Form>\n        </div>\n    );\n};\n\nexport default MasterPasswordVerify;\n"],
  "mappings": "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",
  "names": ["masterPasswordVerify_default"]
}
