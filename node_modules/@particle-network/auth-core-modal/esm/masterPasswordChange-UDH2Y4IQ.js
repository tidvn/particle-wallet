"use client";
import{a as l}from"./chunk-3KXEBSWP.js";import{a as c}from"./chunk-WN72JIRK.js";import{a as p}from"./chunk-4SMRMVPX.js";import"./chunk-QNAXMJIS.js";import{a as m}from"./chunk-AMOVWUCP.js";import"./chunk-PZJW4BGW.js";import"./chunk-O6HTNRMG.js";import{J as d}from"./chunk-ZHONLBSB.js";import"./chunk-L535NPP3.js";import{verifyMasterPassword as F}from"@particle-network/auth-core";import{useRequest as C}from"ahooks";import{Button as I,Form as a,Space as T,Typography as S}from"antd";import t,{useState as h}from"react";import{useTranslation as B}from"react-i18next";var g=`.mp-change-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  height: 100%;
  overflow: auto;
  font-size: 14px;
  color: var(--text-color);
}
.mp-change-container .wapper {
  flex: 1;
  width: 100%;
  padding: 0 18px;
}
.mp-change-container .ant-form {
  display: flex;
  flex-direction: column;
  width: 100%;
  max-width: 800px;
  height: 100%;
}
.mp-change-container .ant-form .ant-form-item {
  margin-bottom: 0;
}
.mp-change-container .ant-form .scroll-content {
  flex: 1;
  width: 100%;
}
.mp-change-container .mp-change-title {
  margin-top: 16px;
  font-weight: 500;
  font-size: 18px;
  line-height: 28px;
  color: var(--text-color);
}
.mp-change-container .mp-input-name {
  align-self: flex-start;
  margin-top: 10px;
  font-weight: 400;
}
.mp-change-container .mp-input {
  margin-top: 6px;
}
.mp-change-container .mp-input-error {
  align-self: flex-start;
  margin-top: 8px;
  color: var(--error-color);
}
.mp-change-container .mp-tip-space {
  width: 100%;
  margin-top: 25px;
  margin-bottom: 110px;
  line-height: 20px;
}
.mp-change-container .mp-tip-space span {
  color: var(--text-color);
}
.mp-change-container .bottom-container .mp-next {
  width: 100%;
}
.mp-change-container .bottom-container .footer-box {
  display: flex;
  justify-content: center;
  align-items: center;
  height: var(--footer-height);
  margin: 0;
}
.mp-change-container .bottom-container .footer-box .footer {
  margin: 0;
}
`;var E=()=>{let s=d(),{t:n}=B(),{Text:i,Link:u}=S,[f,r]=h(!1),w=p(),[x,v]=h(!0),{run:y,loading:b}=C(e=>F(e).then(o=>{if(!o)throw new Error("Master password decryption error");return o}),{manual:!0,onSuccess:e=>{N()},onError:e=>{(e==null?void 0:e.message)==="Master password decryption error"?r(!0):w.error((e==null?void 0:e.message)||"check master password error")}}),N=()=>{s("/account/master-password",{state:{setNewMasterPassword:!0}})},_=e=>{let{password:o}=e;o&&o.length>=6&&o.length<=20?y(o):r(!0)},M=e=>{r(!1);let{password:o}=e;v(!o)},k=()=>{s("/account/master-password/description")};return t.createElement("div",{className:"mp-change-container"},t.createElement("style",null,g),t.createElement(c,{displayBackBtn:!0},n("account.current_master_password")),t.createElement("div",{className:"wapper"},t.createElement(a,{onFinish:_,layout:"vertical",onValuesChange:M},t.createElement("div",{className:"scroll-content"},t.createElement("div",{className:"mp-input-name padding-top-16"},n("account.input_master_password")),t.createElement(a.Item,{name:"password"},t.createElement(l,{className:"mp-input"})),f&&t.createElement("div",{className:"mp-input-error"},n("account.password_error")),t.createElement(T,{direction:"vertical",className:"mp-tip-space"},t.createElement(i,null,n("account.mpc_tss_intro")),t.createElement(i,null,n("account.input_decrypt_hint")," ",t.createElement(u,{onClick:k,className:"more-text-btn"},n("account.learn_more_period"))))),t.createElement(a.Item,null,t.createElement("div",{className:"bottom-container"},t.createElement(I,{className:"primary-antd-btn mp-next",htmlType:"submit",loading:b,disabled:x},n("common.next")),t.createElement(m,null))))))},Q=E;export{Q as default};
