import {
  AuthCoreEvent,
  AuthType,
  Bo,
  EvmEnhancedMethod,
  EvmRpcMethod,
  Fa,
  GasFeeMode,
  Ia,
  J,
  L,
  Na,
  Qo,
  RecordType,
  SignTypedDataVersion,
  SolanaRpcMethod,
  Uo,
  Ze,
  _i,
  analyticsRecord,
  check,
  connect,
  di,
  disconnect,
  ei,
  ethereumUtils,
  f,
  getCloudflareTurnstileResponse,
  getConnectCaptcha,
  getLatestAuthType,
  getSecurityAccount,
  hasMasterPassword,
  hasPaymentPassword,
  isConnected,
  isNeedRestoreWallet,
  isNullish,
  jo,
  particleAuth,
  requireNotNullish,
  require_base64url,
  require_debounce,
  require_dist as require_dist2,
  require_fast_json_stable_stringify,
  require_sha256,
  thirdpartyAuth,
  toHex,
  za
} from "./chunk-5K5SNHHZ.js";
import {
  o,
  p,
  q
} from "./chunk-6SATDP2A.js";
import {
  BigNumber
} from "./chunk-OKCYEHW4.js";
import {
  require_dist2 as require_dist
} from "./chunk-YM32VLGM.js";
import {
  require_buffer
} from "./chunk-GEJW2VKU.js";
import {
  require_bn
} from "./chunk-XBOBPJUC.js";
import {
  chains_exports
} from "./chunk-ZFG3MDGT.js";
import {
  require_react
} from "./chunk-YVDZNGKE.js";
import {
  __commonJS,
  __toESM
} from "./chunk-IKJM6GHQ.js";

// node_modules/numbro/dist/numbro.min.js
var require_numbro_min = __commonJS({
  "node_modules/numbro/dist/numbro.min.js"(exports, module) {
    !function(e, t) {
      "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : (e = "undefined" != typeof globalThis ? globalThis : e || self).numbro = t();
    }(exports, function() {
      "use strict";
      var e = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {};
      function t(e2) {
        return e2 && e2.__esModule && Object.prototype.hasOwnProperty.call(e2, "default") ? e2.default : e2;
      }
      var r, n, i, a, o2 = { languageTag: "en-US", delimiters: { thousands: ",", decimal: "." }, abbreviations: { thousand: "k", million: "m", billion: "b", trillion: "t" }, spaceSeparated: false, ordinal: function(e2) {
        let t2 = e2 % 10;
        return 1 == ~~(e2 % 100 / 10) ? "th" : 1 === t2 ? "st" : 2 === t2 ? "nd" : 3 === t2 ? "rd" : "th";
      }, bytes: { binarySuffixes: ["B", "KiB", "MiB", "GiB", "TiB", "PiB", "EiB", "ZiB", "YiB"], decimalSuffixes: ["B", "KB", "MB", "GB", "TB", "PB", "EB", "ZB", "YB"] }, currency: { symbol: "$", position: "prefix", code: "USD" }, currencyFormat: { thousandSeparated: true, totalLength: 4, spaceSeparated: true, spaceSeparatedCurrency: true }, formats: { fourDigits: { totalLength: 4, spaceSeparated: true }, fullWithTwoDecimals: { output: "currency", thousandSeparated: true, mantissa: 2 }, fullWithTwoDecimalsNoCurrency: { thousandSeparated: true, mantissa: 2 }, fullWithNoDecimals: { output: "currency", thousandSeparated: true, mantissa: 0 } } };
      function u() {
        if (n)
          return r;
        n = 1;
        const e2 = [{ key: "ZiB", factor: Math.pow(1024, 7) }, { key: "ZB", factor: Math.pow(1e3, 7) }, { key: "YiB", factor: Math.pow(1024, 8) }, { key: "YB", factor: Math.pow(1e3, 8) }, { key: "TiB", factor: Math.pow(1024, 4) }, { key: "TB", factor: Math.pow(1e3, 4) }, { key: "PiB", factor: Math.pow(1024, 5) }, { key: "PB", factor: Math.pow(1e3, 5) }, { key: "MiB", factor: Math.pow(1024, 2) }, { key: "MB", factor: Math.pow(1e3, 2) }, { key: "KiB", factor: Math.pow(1024, 1) }, { key: "KB", factor: Math.pow(1e3, 1) }, { key: "GiB", factor: Math.pow(1024, 3) }, { key: "GB", factor: Math.pow(1e3, 3) }, { key: "EiB", factor: Math.pow(1024, 6) }, { key: "EB", factor: Math.pow(1e3, 6) }, { key: "B", factor: 1 }];
        function t2(e3) {
          return e3.replace(/[-/\\^$*+?.()|[\]{}]/g, "\\$&");
        }
        function i2(r2, n2, a3, o3, u2, s2, l2) {
          if (!isNaN(+r2))
            return +r2;
          let c2 = "", f4 = r2.replace(/(^[^(]*)\((.*)\)([^)]*$)/, "$1$2$3");
          if (f4 !== r2)
            return -1 * i2(f4, n2, a3, o3, u2, s2);
          for (let t3 = 0; t3 < e2.length; t3++) {
            let l3 = e2[t3];
            if (c2 = r2.replace(RegExp(`([0-9 ])(${l3.key})$`), "$1"), c2 !== r2)
              return i2(c2, n2, a3, o3, u2, s2) * l3.factor;
          }
          if (c2 = r2.replace("%", ""), c2 !== r2)
            return i2(c2, n2, a3, o3, u2, s2) / 100;
          let p3 = parseFloat(r2);
          if (isNaN(p3))
            return;
          let g2 = o3(p3);
          if (g2 && "." !== g2 && (c2 = r2.replace(new RegExp(`${t2(g2)}$`), ""), c2 !== r2))
            return i2(c2, n2, a3, o3, u2, s2);
          let h2 = {};
          Object.keys(s2).forEach((e3) => {
            h2[s2[e3]] = e3;
          });
          let d2 = Object.keys(h2).sort().reverse(), m2 = d2.length;
          for (let e3 = 0; e3 < m2; e3++) {
            let t3 = d2[e3], l3 = h2[t3];
            if (c2 = r2.replace(t3, ""), c2 !== r2) {
              let e4;
              switch (l3) {
                case "thousand":
                  e4 = Math.pow(10, 3);
                  break;
                case "million":
                  e4 = Math.pow(10, 6);
                  break;
                case "billion":
                  e4 = Math.pow(10, 9);
                  break;
                case "trillion":
                  e4 = Math.pow(10, 12);
              }
              return i2(c2, n2, a3, o3, u2, s2) * e4;
            }
          }
        }
        function a2(e3, r2, n2 = "", a3, o3, u2, s2) {
          if ("" === e3)
            return;
          if (e3 === o3)
            return 0;
          let l2 = function(e4, r3, n3) {
            let i3 = e4.replace(n3, "");
            return i3 = i3.replace(new RegExp(`([0-9])${t2(r3.thousands)}([0-9])`, "g"), "$1$2"), i3 = i3.replace(r3.decimal, "."), i3;
          }(e3, r2, n2);
          return i2(l2, r2, n2, a3, o3, u2);
        }
        return r = { unformat: function(e3, t3) {
          const r2 = p2();
          let n2, i3 = r2.currentDelimiters(), o3 = r2.currentCurrency().symbol, u2 = r2.currentOrdinal(), s2 = r2.getZeroFormat(), l2 = r2.currentAbbreviations();
          if ("string" == typeof e3)
            n2 = function(e4, t4) {
              if (!e4.indexOf(":") || ":" === t4.thousands)
                return false;
              let r3 = e4.split(":");
              if (3 !== r3.length)
                return false;
              let n3 = +r3[0], i4 = +r3[1], a3 = +r3[2];
              return !isNaN(n3) && !isNaN(i4) && !isNaN(a3);
            }(e3, i3) ? function(e4) {
              let t4 = e4.split(":"), r3 = +t4[0], n3 = +t4[1];
              return +t4[2] + 60 * n3 + 3600 * r3;
            }(e3) : a2(e3, i3, o3, u2, s2, l2);
          else {
            if ("number" != typeof e3)
              return;
            n2 = e3;
          }
          if (void 0 !== n2)
            return n2;
        } }, r;
      }
      function s() {
        if (a)
          return i;
        a = 1;
        let e2 = u();
        const t2 = /^[a-z]{2,3}(-[a-zA-Z]{4})?(-([A-Z]{2}|[0-9]{3}))?$/, r2 = { output: { type: "string", validValues: ["currency", "percent", "byte", "time", "ordinal", "number"] }, base: { type: "string", validValues: ["decimal", "binary", "general"], restriction: (e3, t3) => "byte" === t3.output, message: "`base` must be provided only when the output is `byte`", mandatory: (e3) => "byte" === e3.output }, characteristic: { type: "number", restriction: (e3) => e3 >= 0, message: "value must be positive" }, prefix: "string", postfix: "string", forceAverage: { type: "string", validValues: ["trillion", "billion", "million", "thousand"] }, average: "boolean", lowPrecision: { type: "boolean", restriction: (e3, t3) => true === t3.average, message: "`lowPrecision` must be provided only when the option `average` is set" }, currencyPosition: { type: "string", validValues: ["prefix", "infix", "postfix"] }, currencySymbol: "string", totalLength: { type: "number", restrictions: [{ restriction: (e3) => e3 >= 0, message: "value must be positive" }, { restriction: (e3, t3) => !t3.exponential, message: "`totalLength` is incompatible with `exponential`" }] }, mantissa: { type: "number", restriction: (e3) => e3 >= 0, message: "value must be positive" }, optionalMantissa: "boolean", trimMantissa: "boolean", roundingFunction: "function", optionalCharacteristic: "boolean", thousandSeparated: "boolean", spaceSeparated: "boolean", spaceSeparatedCurrency: "boolean", spaceSeparatedAbbreviation: "boolean", abbreviations: { type: "object", children: { thousand: "string", million: "string", billion: "string", trillion: "string" } }, negative: { type: "string", validValues: ["sign", "parenthesis"] }, forceSign: "boolean", exponential: { type: "boolean" }, prefixSymbol: { type: "boolean", restriction: (e3, t3) => "percent" === t3.output, message: "`prefixSymbol` can be provided only when the output is `percent`" } }, n2 = { languageTag: { type: "string", mandatory: true, restriction: (e3) => e3.match(t2), message: "the language tag must follow the BCP 47 specification (see https://tools.ieft.org/html/bcp47)" }, delimiters: { type: "object", children: { thousands: "string", decimal: "string", thousandsSize: "number" }, mandatory: true }, abbreviations: { type: "object", children: { thousand: { type: "string", mandatory: true }, million: { type: "string", mandatory: true }, billion: { type: "string", mandatory: true }, trillion: { type: "string", mandatory: true } }, mandatory: true }, spaceSeparated: "boolean", spaceSeparatedCurrency: "boolean", ordinal: { type: "function", mandatory: true }, bytes: { type: "object", children: { binarySuffixes: "object", decimalSuffixes: "object" } }, currency: { type: "object", children: { symbol: "string", position: "string", code: "string" }, mandatory: true }, defaults: "format", ordinalFormat: "format", byteFormat: "format", percentageFormat: "format", currencyFormat: "format", timeDefaults: "format", formats: { type: "object", children: { fourDigits: { type: "format", mandatory: true }, fullWithTwoDecimals: { type: "format", mandatory: true }, fullWithTwoDecimalsNoCurrency: { type: "format", mandatory: true }, fullWithNoDecimals: { type: "format", mandatory: true } } } };
        function o3(t3) {
          return void 0 !== e2.unformat(t3);
        }
        function s2(e3, t3, n3, i2 = false) {
          let a2 = Object.keys(e3).map((i3) => {
            if (!t3[i3])
              return console.error(`${n3} Invalid key: ${i3}`), false;
            let a3 = e3[i3], o4 = t3[i3];
            if ("string" == typeof o4 && (o4 = { type: o4 }), "format" === o4.type) {
              if (!s2(a3, r2, `[Validate ${i3}]`, true))
                return false;
            } else if (typeof a3 !== o4.type)
              return console.error(`${n3} ${i3} type mismatched: "${o4.type}" expected, "${typeof a3}" provided`), false;
            if (o4.restrictions && o4.restrictions.length) {
              let t4 = o4.restrictions.length;
              for (let r3 = 0; r3 < t4; r3++) {
                let { restriction: t5, message: u2 } = o4.restrictions[r3];
                if (!t5(a3, e3))
                  return console.error(`${n3} ${i3} invalid value: ${u2}`), false;
              }
            }
            if (o4.restriction && !o4.restriction(a3, e3))
              return console.error(`${n3} ${i3} invalid value: ${o4.message}`), false;
            if (o4.validValues && -1 === o4.validValues.indexOf(a3))
              return console.error(`${n3} ${i3} invalid value: must be among ${JSON.stringify(o4.validValues)}, "${a3}" provided`), false;
            if (o4.children) {
              if (!s2(a3, o4.children, `[Validate ${i3}]`))
                return false;
            }
            return true;
          });
          return i2 || a2.push(...Object.keys(t3).map((r3) => {
            let i3 = t3[r3];
            if ("string" == typeof i3 && (i3 = { type: i3 }), i3.mandatory) {
              let t4 = i3.mandatory;
              if ("function" == typeof t4 && (t4 = t4(e3)), t4 && void 0 === e3[r3])
                return console.error(`${n3} Missing mandatory key "${r3}"`), false;
            }
            return true;
          })), a2.reduce((e4, t4) => e4 && t4, true);
        }
        function l2(e3) {
          return s2(e3, r2, "[Validate format]");
        }
        return i = { validate: function(e3, t3) {
          let r3 = o3(e3), n3 = l2(t3);
          return r3 && n3;
        }, validateFormat: l2, validateInput: o3, validateLanguage: function(e3) {
          return s2(e3, n2, "[Validate language]");
        } }, i;
      }
      var l, c, f3 = { parseFormat: function(e2, t2 = {}) {
        return "string" != typeof e2 ? e2 : (function(e3, t3) {
          if (-1 === e3.indexOf("$")) {
            if (-1 === e3.indexOf("%"))
              return -1 !== e3.indexOf("bd") ? (t3.output = "byte", void (t3.base = "general")) : -1 !== e3.indexOf("b") ? (t3.output = "byte", void (t3.base = "binary")) : -1 !== e3.indexOf("d") ? (t3.output = "byte", void (t3.base = "decimal")) : void (-1 === e3.indexOf(":") ? -1 !== e3.indexOf("o") && (t3.output = "ordinal") : t3.output = "time");
            t3.output = "percent";
          } else
            t3.output = "currency";
        }(e2 = function(e3, t3) {
          let r2 = e3.match(/{([^}]*)}$/);
          return r2 ? (t3.postfix = r2[1], e3.slice(0, -r2[0].length)) : e3;
        }(e2 = function(e3, t3) {
          let r2 = e3.match(/^{([^}]*)}/);
          return r2 ? (t3.prefix = r2[1], e3.slice(r2[0].length)) : e3;
        }(e2, t2), t2), t2), function(e3, t3) {
          let r2 = e3.match(/[1-9]+[0-9]*/);
          r2 && (t3.totalLength = +r2[0]);
        }(e2, t2), function(e3, t3) {
          let r2 = e3.split(".")[0].match(/0+/);
          r2 && (t3.characteristic = r2[0].length);
        }(e2, t2), function(e3, t3) {
          if (-1 !== e3.indexOf(".")) {
            let r2 = e3.split(".")[0];
            t3.optionalCharacteristic = -1 === r2.indexOf("0");
          }
        }(e2, t2), function(e3, t3) {
          -1 !== e3.indexOf("a") && (t3.average = true);
        }(e2, t2), function(e3, t3) {
          -1 !== e3.indexOf("K") ? t3.forceAverage = "thousand" : -1 !== e3.indexOf("M") ? t3.forceAverage = "million" : -1 !== e3.indexOf("B") ? t3.forceAverage = "billion" : -1 !== e3.indexOf("T") && (t3.forceAverage = "trillion");
        }(e2, t2), function(e3, t3) {
          let r2 = e3.split(".")[1];
          if (r2) {
            let e4 = r2.match(/0+/);
            e4 && (t3.mantissa = e4[0].length);
          }
        }(e2, t2), function(e3, t3) {
          e3.match(/\[\.]/) ? t3.optionalMantissa = true : e3.match(/\./) && (t3.optionalMantissa = false);
        }(e2, t2), function(e3, t3) {
          const r2 = e3.split(".")[1];
          r2 && (t3.trimMantissa = -1 !== r2.indexOf("["));
        }(e2, t2), function(e3, t3) {
          -1 !== e3.indexOf(",") && (t3.thousandSeparated = true);
        }(e2, t2), function(e3, t3) {
          -1 !== e3.indexOf(" ") && (t3.spaceSeparated = true, t3.spaceSeparatedCurrency = true, (t3.average || t3.forceAverage) && (t3.spaceSeparatedAbbreviation = true));
        }(e2, t2), function(e3, t3) {
          e3.match(/^\+?\([^)]*\)$/) && (t3.negative = "parenthesis"), e3.match(/^\+?-/) && (t3.negative = "sign");
        }(e2, t2), function(e3, t3) {
          e3.match(/^\+/) && (t3.forceSign = true);
        }(e2, t2), t2);
      } };
      function p2() {
        if (c)
          return l;
        c = 1;
        const e2 = o2, t2 = s(), r2 = f3;
        let n2, i2 = {}, a2 = {}, u2 = null, p3 = {};
        function g2(e3) {
          n2 = e3;
        }
        function h2() {
          return a2[n2];
        }
        return i2.languages = () => Object.assign({}, a2), i2.currentLanguage = () => n2, i2.currentBytes = () => h2().bytes || {}, i2.currentCurrency = () => h2().currency, i2.currentAbbreviations = () => h2().abbreviations, i2.currentDelimiters = () => h2().delimiters, i2.currentOrdinal = () => h2().ordinal, i2.currentDefaults = () => Object.assign({}, h2().defaults, p3), i2.currentOrdinalDefaultFormat = () => Object.assign({}, i2.currentDefaults(), h2().ordinalFormat), i2.currentByteDefaultFormat = () => Object.assign({}, i2.currentDefaults(), h2().byteFormat), i2.currentPercentageDefaultFormat = () => Object.assign({}, i2.currentDefaults(), h2().percentageFormat), i2.currentCurrencyDefaultFormat = () => Object.assign({}, i2.currentDefaults(), h2().currencyFormat), i2.currentTimeDefaultFormat = () => Object.assign({}, i2.currentDefaults(), h2().timeFormat), i2.setDefaults = (e3) => {
          e3 = r2.parseFormat(e3), t2.validateFormat(e3) && (p3 = e3);
        }, i2.getZeroFormat = () => u2, i2.setZeroFormat = (e3) => u2 = "string" == typeof e3 ? e3 : null, i2.hasZeroFormat = () => null !== u2, i2.languageData = (e3) => {
          if (e3) {
            if (a2[e3])
              return a2[e3];
            throw new Error(`Unknown tag "${e3}"`);
          }
          return h2();
        }, i2.registerLanguage = (e3, r3 = false) => {
          if (!t2.validateLanguage(e3))
            throw new Error("Invalid language data");
          a2[e3.languageTag] = e3, r3 && g2(e3.languageTag);
        }, i2.setLanguage = (t3, r3 = e2.languageTag) => {
          if (!a2[t3]) {
            let e3 = t3.split("-")[0], n3 = Object.keys(a2).find((t4) => t4.split("-")[0] === e3);
            return a2[n3] ? void g2(n3) : void g2(r3);
          }
          g2(t3);
        }, i2.registerLanguage(e2), n2 = e2.languageTag, l = i2;
      }
      function g(e2, t2) {
        e2.forEach((e3) => {
          let r2;
          try {
            r2 = function(e4) {
              throw new Error('Could not dynamically require "' + e4 + '". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
            }(`../languages/${e3}`);
          } catch (t3) {
            console.error(`Unable to load "${e3}". No matching language file found.`);
          }
          r2 && t2.registerLanguage(r2);
        });
      }
      var h = { exports: {} };
      !function(t2) {
        !function(e2) {
          var r2, n2 = /^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i, i2 = Math.ceil, a2 = Math.floor, o3 = "[BigNumber Error] ", u2 = o3 + "Number primitive has more than 15 significant digits: ", s2 = 1e14, l2 = 14, c2 = 9007199254740991, f4 = [1, 10, 100, 1e3, 1e4, 1e5, 1e6, 1e7, 1e8, 1e9, 1e10, 1e11, 1e12, 1e13], p3 = 1e7, g2 = 1e9;
          function h2(e3) {
            var t3 = 0 | e3;
            return e3 > 0 || e3 === t3 ? t3 : t3 - 1;
          }
          function d2(e3) {
            for (var t3, r3, n3 = 1, i3 = e3.length, a3 = e3[0] + ""; n3 < i3; ) {
              for (t3 = e3[n3++] + "", r3 = l2 - t3.length; r3--; t3 = "0" + t3)
                ;
              a3 += t3;
            }
            for (i3 = a3.length; 48 === a3.charCodeAt(--i3); )
              ;
            return a3.slice(0, i3 + 1 || 1);
          }
          function m2(e3, t3) {
            var r3, n3, i3 = e3.c, a3 = t3.c, o4 = e3.s, u3 = t3.s, s3 = e3.e, l3 = t3.e;
            if (!o4 || !u3)
              return null;
            if (r3 = i3 && !i3[0], n3 = a3 && !a3[0], r3 || n3)
              return r3 ? n3 ? 0 : -u3 : o4;
            if (o4 != u3)
              return o4;
            if (r3 = o4 < 0, n3 = s3 == l3, !i3 || !a3)
              return n3 ? 0 : !i3 ^ r3 ? 1 : -1;
            if (!n3)
              return s3 > l3 ^ r3 ? 1 : -1;
            for (u3 = (s3 = i3.length) < (l3 = a3.length) ? s3 : l3, o4 = 0; o4 < u3; o4++)
              if (i3[o4] != a3[o4])
                return i3[o4] > a3[o4] ^ r3 ? 1 : -1;
            return s3 == l3 ? 0 : s3 > l3 ^ r3 ? 1 : -1;
          }
          function y2(e3, t3, r3, n3) {
            if (e3 < t3 || e3 > r3 || e3 !== a2(e3))
              throw Error(o3 + (n3 || "Argument") + ("number" == typeof e3 ? e3 < t3 || e3 > r3 ? " out of range: " : " not an integer: " : " not a primitive number: ") + String(e3));
          }
          function b2(e3) {
            var t3 = e3.c.length - 1;
            return h2(e3.e / l2) == t3 && e3.c[t3] % 2 != 0;
          }
          function v2(e3, t3) {
            return (e3.length > 1 ? e3.charAt(0) + "." + e3.slice(1) : e3) + (t3 < 0 ? "e" : "e+") + t3;
          }
          function w2(e3, t3, r3) {
            var n3, i3;
            if (t3 < 0) {
              for (i3 = r3 + "."; ++t3; i3 += r3)
                ;
              e3 = i3 + e3;
            } else if (++t3 > (n3 = e3.length)) {
              for (i3 = r3, t3 -= n3; --t3; i3 += r3)
                ;
              e3 += i3;
            } else
              t3 < n3 && (e3 = e3.slice(0, t3) + "." + e3.slice(t3));
            return e3;
          }
          r2 = function e3(t3) {
            var r3, O2, x2, S2, N2, $2, B2, M2, D3, F2, E2 = q2.prototype = { constructor: q2, toString: null, valueOf: null }, A2 = new q2(1), _2 = 20, k2 = 4, L3 = -7, P2 = 21, T2 = -1e7, C2 = 1e7, j3 = false, U2 = 1, R2 = 0, I2 = { prefix: "", groupSize: 3, secondaryGroupSize: 0, groupSeparator: ",", decimalSeparator: ".", fractionGroupSize: 0, fractionGroupSeparator: "\xA0", suffix: "" }, G3 = "0123456789abcdefghijklmnopqrstuvwxyz", V2 = true;
            function q2(e4, t4) {
              var r4, i3, o4, s3, f5, p4, g3, h3, d3 = this;
              if (!(d3 instanceof q2))
                return new q2(e4, t4);
              if (null == t4) {
                if (e4 && true === e4._isBigNumber)
                  return d3.s = e4.s, void (!e4.c || e4.e > C2 ? d3.c = d3.e = null : e4.e < T2 ? d3.c = [d3.e = 0] : (d3.e = e4.e, d3.c = e4.c.slice()));
                if ((p4 = "number" == typeof e4) && 0 * e4 == 0) {
                  if (d3.s = 1 / e4 < 0 ? (e4 = -e4, -1) : 1, e4 === ~~e4) {
                    for (s3 = 0, f5 = e4; f5 >= 10; f5 /= 10, s3++)
                      ;
                    return void (s3 > C2 ? d3.c = d3.e = null : (d3.e = s3, d3.c = [e4]));
                  }
                  h3 = String(e4);
                } else {
                  if (!n2.test(h3 = String(e4)))
                    return x2(d3, h3, p4);
                  d3.s = 45 == h3.charCodeAt(0) ? (h3 = h3.slice(1), -1) : 1;
                }
                (s3 = h3.indexOf(".")) > -1 && (h3 = h3.replace(".", "")), (f5 = h3.search(/e/i)) > 0 ? (s3 < 0 && (s3 = f5), s3 += +h3.slice(f5 + 1), h3 = h3.substring(0, f5)) : s3 < 0 && (s3 = h3.length);
              } else {
                if (y2(t4, 2, G3.length, "Base"), 10 == t4 && V2)
                  return H(d3 = new q2(e4), _2 + d3.e + 1, k2);
                if (h3 = String(e4), p4 = "number" == typeof e4) {
                  if (0 * e4 != 0)
                    return x2(d3, h3, p4, t4);
                  if (d3.s = 1 / e4 < 0 ? (h3 = h3.slice(1), -1) : 1, q2.DEBUG && h3.replace(/^0\.0*|\./, "").length > 15)
                    throw Error(u2 + e4);
                } else
                  d3.s = 45 === h3.charCodeAt(0) ? (h3 = h3.slice(1), -1) : 1;
                for (r4 = G3.slice(0, t4), s3 = f5 = 0, g3 = h3.length; f5 < g3; f5++)
                  if (r4.indexOf(i3 = h3.charAt(f5)) < 0) {
                    if ("." == i3) {
                      if (f5 > s3) {
                        s3 = g3;
                        continue;
                      }
                    } else if (!o4 && (h3 == h3.toUpperCase() && (h3 = h3.toLowerCase()) || h3 == h3.toLowerCase() && (h3 = h3.toUpperCase()))) {
                      o4 = true, f5 = -1, s3 = 0;
                      continue;
                    }
                    return x2(d3, String(e4), p4, t4);
                  }
                p4 = false, (s3 = (h3 = O2(h3, t4, 10, d3.s)).indexOf(".")) > -1 ? h3 = h3.replace(".", "") : s3 = h3.length;
              }
              for (f5 = 0; 48 === h3.charCodeAt(f5); f5++)
                ;
              for (g3 = h3.length; 48 === h3.charCodeAt(--g3); )
                ;
              if (h3 = h3.slice(f5, ++g3)) {
                if (g3 -= f5, p4 && q2.DEBUG && g3 > 15 && (e4 > c2 || e4 !== a2(e4)))
                  throw Error(u2 + d3.s * e4);
                if ((s3 = s3 - f5 - 1) > C2)
                  d3.c = d3.e = null;
                else if (s3 < T2)
                  d3.c = [d3.e = 0];
                else {
                  if (d3.e = s3, d3.c = [], f5 = (s3 + 1) % l2, s3 < 0 && (f5 += l2), f5 < g3) {
                    for (f5 && d3.c.push(+h3.slice(0, f5)), g3 -= l2; f5 < g3; )
                      d3.c.push(+h3.slice(f5, f5 += l2));
                    f5 = l2 - (h3 = h3.slice(f5)).length;
                  } else
                    f5 -= g3;
                  for (; f5--; h3 += "0")
                    ;
                  d3.c.push(+h3);
                }
              } else
                d3.c = [d3.e = 0];
            }
            function Z2(e4, t4, r4, n3) {
              var i3, a3, o4, u3, s3;
              if (null == r4 ? r4 = k2 : y2(r4, 0, 8), !e4.c)
                return e4.toString();
              if (i3 = e4.c[0], o4 = e4.e, null == t4)
                s3 = d2(e4.c), s3 = 1 == n3 || 2 == n3 && (o4 <= L3 || o4 >= P2) ? v2(s3, o4) : w2(s3, o4, "0");
              else if (a3 = (e4 = H(new q2(e4), t4, r4)).e, u3 = (s3 = d2(e4.c)).length, 1 == n3 || 2 == n3 && (t4 <= a3 || a3 <= L3)) {
                for (; u3 < t4; s3 += "0", u3++)
                  ;
                s3 = v2(s3, a3);
              } else if (t4 -= o4, s3 = w2(s3, a3, "0"), a3 + 1 > u3) {
                if (--t4 > 0)
                  for (s3 += "."; t4--; s3 += "0")
                    ;
              } else if ((t4 += a3 - u3) > 0)
                for (a3 + 1 == u3 && (s3 += "."); t4--; s3 += "0")
                  ;
              return e4.s < 0 && i3 ? "-" + s3 : s3;
            }
            function z2(e4, t4) {
              for (var r4, n3, i3 = 1, a3 = new q2(e4[0]); i3 < e4.length; i3++)
                (!(n3 = new q2(e4[i3])).s || (r4 = m2(a3, n3)) === t4 || 0 === r4 && a3.s === t4) && (a3 = n3);
              return a3;
            }
            function W2(e4, t4, r4) {
              for (var n3 = 1, i3 = t4.length; !t4[--i3]; t4.pop())
                ;
              for (i3 = t4[0]; i3 >= 10; i3 /= 10, n3++)
                ;
              return (r4 = n3 + r4 * l2 - 1) > C2 ? e4.c = e4.e = null : r4 < T2 ? e4.c = [e4.e = 0] : (e4.e = r4, e4.c = t4), e4;
            }
            function H(e4, t4, r4, n3) {
              var o4, u3, c3, p4, g3, h3, d3, m3 = e4.c, y3 = f4;
              if (m3) {
                e: {
                  for (o4 = 1, p4 = m3[0]; p4 >= 10; p4 /= 10, o4++)
                    ;
                  if ((u3 = t4 - o4) < 0)
                    u3 += l2, c3 = t4, g3 = m3[h3 = 0], d3 = a2(g3 / y3[o4 - c3 - 1] % 10);
                  else if ((h3 = i2((u3 + 1) / l2)) >= m3.length) {
                    if (!n3)
                      break e;
                    for (; m3.length <= h3; m3.push(0))
                      ;
                    g3 = d3 = 0, o4 = 1, c3 = (u3 %= l2) - l2 + 1;
                  } else {
                    for (g3 = p4 = m3[h3], o4 = 1; p4 >= 10; p4 /= 10, o4++)
                      ;
                    d3 = (c3 = (u3 %= l2) - l2 + o4) < 0 ? 0 : a2(g3 / y3[o4 - c3 - 1] % 10);
                  }
                  if (n3 = n3 || t4 < 0 || null != m3[h3 + 1] || (c3 < 0 ? g3 : g3 % y3[o4 - c3 - 1]), n3 = r4 < 4 ? (d3 || n3) && (0 == r4 || r4 == (e4.s < 0 ? 3 : 2)) : d3 > 5 || 5 == d3 && (4 == r4 || n3 || 6 == r4 && (u3 > 0 ? c3 > 0 ? g3 / y3[o4 - c3] : 0 : m3[h3 - 1]) % 10 & 1 || r4 == (e4.s < 0 ? 8 : 7)), t4 < 1 || !m3[0])
                    return m3.length = 0, n3 ? (t4 -= e4.e + 1, m3[0] = y3[(l2 - t4 % l2) % l2], e4.e = -t4 || 0) : m3[0] = e4.e = 0, e4;
                  if (0 == u3 ? (m3.length = h3, p4 = 1, h3--) : (m3.length = h3 + 1, p4 = y3[l2 - u3], m3[h3] = c3 > 0 ? a2(g3 / y3[o4 - c3] % y3[c3]) * p4 : 0), n3)
                    for (; ; ) {
                      if (0 == h3) {
                        for (u3 = 1, c3 = m3[0]; c3 >= 10; c3 /= 10, u3++)
                          ;
                        for (c3 = m3[0] += p4, p4 = 1; c3 >= 10; c3 /= 10, p4++)
                          ;
                        u3 != p4 && (e4.e++, m3[0] == s2 && (m3[0] = 1));
                        break;
                      }
                      if (m3[h3] += p4, m3[h3] != s2)
                        break;
                      m3[h3--] = 0, p4 = 1;
                    }
                  for (u3 = m3.length; 0 === m3[--u3]; m3.pop())
                    ;
                }
                e4.e > C2 ? e4.c = e4.e = null : e4.e < T2 && (e4.c = [e4.e = 0]);
              }
              return e4;
            }
            function Y(e4) {
              var t4, r4 = e4.e;
              return null === r4 ? e4.toString() : (t4 = d2(e4.c), t4 = r4 <= L3 || r4 >= P2 ? v2(t4, r4) : w2(t4, r4, "0"), e4.s < 0 ? "-" + t4 : t4);
            }
            return q2.clone = e3, q2.ROUND_UP = 0, q2.ROUND_DOWN = 1, q2.ROUND_CEIL = 2, q2.ROUND_FLOOR = 3, q2.ROUND_HALF_UP = 4, q2.ROUND_HALF_DOWN = 5, q2.ROUND_HALF_EVEN = 6, q2.ROUND_HALF_CEIL = 7, q2.ROUND_HALF_FLOOR = 8, q2.EUCLID = 9, q2.config = q2.set = function(e4) {
              var t4, r4;
              if (null != e4) {
                if ("object" != typeof e4)
                  throw Error(o3 + "Object expected: " + e4);
                if (e4.hasOwnProperty(t4 = "DECIMAL_PLACES") && (y2(r4 = e4[t4], 0, g2, t4), _2 = r4), e4.hasOwnProperty(t4 = "ROUNDING_MODE") && (y2(r4 = e4[t4], 0, 8, t4), k2 = r4), e4.hasOwnProperty(t4 = "EXPONENTIAL_AT") && ((r4 = e4[t4]) && r4.pop ? (y2(r4[0], -g2, 0, t4), y2(r4[1], 0, g2, t4), L3 = r4[0], P2 = r4[1]) : (y2(r4, -g2, g2, t4), L3 = -(P2 = r4 < 0 ? -r4 : r4))), e4.hasOwnProperty(t4 = "RANGE"))
                  if ((r4 = e4[t4]) && r4.pop)
                    y2(r4[0], -g2, -1, t4), y2(r4[1], 1, g2, t4), T2 = r4[0], C2 = r4[1];
                  else {
                    if (y2(r4, -g2, g2, t4), !r4)
                      throw Error(o3 + t4 + " cannot be zero: " + r4);
                    T2 = -(C2 = r4 < 0 ? -r4 : r4);
                  }
                if (e4.hasOwnProperty(t4 = "CRYPTO")) {
                  if ((r4 = e4[t4]) !== !!r4)
                    throw Error(o3 + t4 + " not true or false: " + r4);
                  if (r4) {
                    if ("undefined" == typeof crypto || !crypto || !crypto.getRandomValues && !crypto.randomBytes)
                      throw j3 = !r4, Error(o3 + "crypto unavailable");
                    j3 = r4;
                  } else
                    j3 = r4;
                }
                if (e4.hasOwnProperty(t4 = "MODULO_MODE") && (y2(r4 = e4[t4], 0, 9, t4), U2 = r4), e4.hasOwnProperty(t4 = "POW_PRECISION") && (y2(r4 = e4[t4], 0, g2, t4), R2 = r4), e4.hasOwnProperty(t4 = "FORMAT")) {
                  if ("object" != typeof (r4 = e4[t4]))
                    throw Error(o3 + t4 + " not an object: " + r4);
                  I2 = r4;
                }
                if (e4.hasOwnProperty(t4 = "ALPHABET")) {
                  if ("string" != typeof (r4 = e4[t4]) || /^.?$|[+\-.\s]|(.).*\1/.test(r4))
                    throw Error(o3 + t4 + " invalid: " + r4);
                  V2 = "0123456789" == r4.slice(0, 10), G3 = r4;
                }
              }
              return { DECIMAL_PLACES: _2, ROUNDING_MODE: k2, EXPONENTIAL_AT: [L3, P2], RANGE: [T2, C2], CRYPTO: j3, MODULO_MODE: U2, POW_PRECISION: R2, FORMAT: I2, ALPHABET: G3 };
            }, q2.isBigNumber = function(e4) {
              if (!e4 || true !== e4._isBigNumber)
                return false;
              if (!q2.DEBUG)
                return true;
              var t4, r4, n3 = e4.c, i3 = e4.e, u3 = e4.s;
              e:
                if ("[object Array]" == {}.toString.call(n3)) {
                  if ((1 === u3 || -1 === u3) && i3 >= -g2 && i3 <= g2 && i3 === a2(i3)) {
                    if (0 === n3[0]) {
                      if (0 === i3 && 1 === n3.length)
                        return true;
                      break e;
                    }
                    if ((t4 = (i3 + 1) % l2) < 1 && (t4 += l2), String(n3[0]).length == t4) {
                      for (t4 = 0; t4 < n3.length; t4++)
                        if ((r4 = n3[t4]) < 0 || r4 >= s2 || r4 !== a2(r4))
                          break e;
                      if (0 !== r4)
                        return true;
                    }
                  }
                } else if (null === n3 && null === i3 && (null === u3 || 1 === u3 || -1 === u3))
                  return true;
              throw Error(o3 + "Invalid BigNumber: " + e4);
            }, q2.maximum = q2.max = function() {
              return z2(arguments, -1);
            }, q2.minimum = q2.min = function() {
              return z2(arguments, 1);
            }, q2.random = (S2 = 9007199254740992, N2 = Math.random() * S2 & 2097151 ? function() {
              return a2(Math.random() * S2);
            } : function() {
              return 8388608 * (1073741824 * Math.random() | 0) + (8388608 * Math.random() | 0);
            }, function(e4) {
              var t4, r4, n3, u3, s3, c3 = 0, p4 = [], h3 = new q2(A2);
              if (null == e4 ? e4 = _2 : y2(e4, 0, g2), u3 = i2(e4 / l2), j3)
                if (crypto.getRandomValues) {
                  for (t4 = crypto.getRandomValues(new Uint32Array(u3 *= 2)); c3 < u3; )
                    (s3 = 131072 * t4[c3] + (t4[c3 + 1] >>> 11)) >= 9e15 ? (r4 = crypto.getRandomValues(new Uint32Array(2)), t4[c3] = r4[0], t4[c3 + 1] = r4[1]) : (p4.push(s3 % 1e14), c3 += 2);
                  c3 = u3 / 2;
                } else {
                  if (!crypto.randomBytes)
                    throw j3 = false, Error(o3 + "crypto unavailable");
                  for (t4 = crypto.randomBytes(u3 *= 7); c3 < u3; )
                    (s3 = 281474976710656 * (31 & t4[c3]) + 1099511627776 * t4[c3 + 1] + 4294967296 * t4[c3 + 2] + 16777216 * t4[c3 + 3] + (t4[c3 + 4] << 16) + (t4[c3 + 5] << 8) + t4[c3 + 6]) >= 9e15 ? crypto.randomBytes(7).copy(t4, c3) : (p4.push(s3 % 1e14), c3 += 7);
                  c3 = u3 / 7;
                }
              if (!j3)
                for (; c3 < u3; )
                  (s3 = N2()) < 9e15 && (p4[c3++] = s3 % 1e14);
              for (u3 = p4[--c3], e4 %= l2, u3 && e4 && (s3 = f4[l2 - e4], p4[c3] = a2(u3 / s3) * s3); 0 === p4[c3]; p4.pop(), c3--)
                ;
              if (c3 < 0)
                p4 = [n3 = 0];
              else {
                for (n3 = -1; 0 === p4[0]; p4.splice(0, 1), n3 -= l2)
                  ;
                for (c3 = 1, s3 = p4[0]; s3 >= 10; s3 /= 10, c3++)
                  ;
                c3 < l2 && (n3 -= l2 - c3);
              }
              return h3.e = n3, h3.c = p4, h3;
            }), q2.sum = function() {
              for (var e4 = 1, t4 = arguments, r4 = new q2(t4[0]); e4 < t4.length; )
                r4 = r4.plus(t4[e4++]);
              return r4;
            }, O2 = function() {
              var e4 = "0123456789";
              function t4(e5, t5, r4, n3) {
                for (var i3, a3, o4 = [0], u3 = 0, s3 = e5.length; u3 < s3; ) {
                  for (a3 = o4.length; a3--; o4[a3] *= t5)
                    ;
                  for (o4[0] += n3.indexOf(e5.charAt(u3++)), i3 = 0; i3 < o4.length; i3++)
                    o4[i3] > r4 - 1 && (null == o4[i3 + 1] && (o4[i3 + 1] = 0), o4[i3 + 1] += o4[i3] / r4 | 0, o4[i3] %= r4);
                }
                return o4.reverse();
              }
              return function(n3, i3, a3, o4, u3) {
                var s3, l3, c3, f5, p4, g3, h3, m3, y3 = n3.indexOf("."), b3 = _2, v6 = k2;
                for (y3 >= 0 && (f5 = R2, R2 = 0, n3 = n3.replace(".", ""), g3 = (m3 = new q2(i3)).pow(n3.length - y3), R2 = f5, m3.c = t4(w2(d2(g3.c), g3.e, "0"), 10, a3, e4), m3.e = m3.c.length), c3 = f5 = (h3 = t4(n3, i3, a3, u3 ? (s3 = G3, e4) : (s3 = e4, G3))).length; 0 == h3[--f5]; h3.pop())
                  ;
                if (!h3[0])
                  return s3.charAt(0);
                if (y3 < 0 ? --c3 : (g3.c = h3, g3.e = c3, g3.s = o4, h3 = (g3 = r3(g3, m3, b3, v6, a3)).c, p4 = g3.r, c3 = g3.e), y3 = h3[l3 = c3 + b3 + 1], f5 = a3 / 2, p4 = p4 || l3 < 0 || null != h3[l3 + 1], p4 = v6 < 4 ? (null != y3 || p4) && (0 == v6 || v6 == (g3.s < 0 ? 3 : 2)) : y3 > f5 || y3 == f5 && (4 == v6 || p4 || 6 == v6 && 1 & h3[l3 - 1] || v6 == (g3.s < 0 ? 8 : 7)), l3 < 1 || !h3[0])
                  n3 = p4 ? w2(s3.charAt(1), -b3, s3.charAt(0)) : s3.charAt(0);
                else {
                  if (h3.length = l3, p4)
                    for (--a3; ++h3[--l3] > a3; )
                      h3[l3] = 0, l3 || (++c3, h3 = [1].concat(h3));
                  for (f5 = h3.length; !h3[--f5]; )
                    ;
                  for (y3 = 0, n3 = ""; y3 <= f5; n3 += s3.charAt(h3[y3++]))
                    ;
                  n3 = w2(n3, c3, s3.charAt(0));
                }
                return n3;
              };
            }(), r3 = function() {
              function e4(e5, t5, r5) {
                var n3, i3, a3, o4, u3 = 0, s3 = e5.length, l3 = t5 % p3, c3 = t5 / p3 | 0;
                for (e5 = e5.slice(); s3--; )
                  u3 = ((i3 = l3 * (a3 = e5[s3] % p3) + (n3 = c3 * a3 + (o4 = e5[s3] / p3 | 0) * l3) % p3 * p3 + u3) / r5 | 0) + (n3 / p3 | 0) + c3 * o4, e5[s3] = i3 % r5;
                return u3 && (e5 = [u3].concat(e5)), e5;
              }
              function t4(e5, t5, r5, n3) {
                var i3, a3;
                if (r5 != n3)
                  a3 = r5 > n3 ? 1 : -1;
                else
                  for (i3 = a3 = 0; i3 < r5; i3++)
                    if (e5[i3] != t5[i3]) {
                      a3 = e5[i3] > t5[i3] ? 1 : -1;
                      break;
                    }
                return a3;
              }
              function r4(e5, t5, r5, n3) {
                for (var i3 = 0; r5--; )
                  e5[r5] -= i3, i3 = e5[r5] < t5[r5] ? 1 : 0, e5[r5] = i3 * n3 + e5[r5] - t5[r5];
                for (; !e5[0] && e5.length > 1; e5.splice(0, 1))
                  ;
              }
              return function(n3, i3, o4, u3, c3) {
                var f5, p4, g3, d3, m3, y3, b3, v6, w3, O3, x3, S3, N3, $3, B3, M3, D4, F3 = n3.s == i3.s ? 1 : -1, E3 = n3.c, A3 = i3.c;
                if (!(E3 && E3[0] && A3 && A3[0]))
                  return new q2(n3.s && i3.s && (E3 ? !A3 || E3[0] != A3[0] : A3) ? E3 && 0 == E3[0] || !A3 ? 0 * F3 : F3 / 0 : NaN);
                for (w3 = (v6 = new q2(F3)).c = [], F3 = o4 + (p4 = n3.e - i3.e) + 1, c3 || (c3 = s2, p4 = h2(n3.e / l2) - h2(i3.e / l2), F3 = F3 / l2 | 0), g3 = 0; A3[g3] == (E3[g3] || 0); g3++)
                  ;
                if (A3[g3] > (E3[g3] || 0) && p4--, F3 < 0)
                  w3.push(1), d3 = true;
                else {
                  for ($3 = E3.length, M3 = A3.length, g3 = 0, F3 += 2, (m3 = a2(c3 / (A3[0] + 1))) > 1 && (A3 = e4(A3, m3, c3), E3 = e4(E3, m3, c3), M3 = A3.length, $3 = E3.length), N3 = M3, x3 = (O3 = E3.slice(0, M3)).length; x3 < M3; O3[x3++] = 0)
                    ;
                  D4 = A3.slice(), D4 = [0].concat(D4), B3 = A3[0], A3[1] >= c3 / 2 && B3++;
                  do {
                    if (m3 = 0, (f5 = t4(A3, O3, M3, x3)) < 0) {
                      if (S3 = O3[0], M3 != x3 && (S3 = S3 * c3 + (O3[1] || 0)), (m3 = a2(S3 / B3)) > 1)
                        for (m3 >= c3 && (m3 = c3 - 1), b3 = (y3 = e4(A3, m3, c3)).length, x3 = O3.length; 1 == t4(y3, O3, b3, x3); )
                          m3--, r4(y3, M3 < b3 ? D4 : A3, b3, c3), b3 = y3.length, f5 = 1;
                      else
                        0 == m3 && (f5 = m3 = 1), b3 = (y3 = A3.slice()).length;
                      if (b3 < x3 && (y3 = [0].concat(y3)), r4(O3, y3, x3, c3), x3 = O3.length, -1 == f5)
                        for (; t4(A3, O3, M3, x3) < 1; )
                          m3++, r4(O3, M3 < x3 ? D4 : A3, x3, c3), x3 = O3.length;
                    } else
                      0 === f5 && (m3++, O3 = [0]);
                    w3[g3++] = m3, O3[0] ? O3[x3++] = E3[N3] || 0 : (O3 = [E3[N3]], x3 = 1);
                  } while ((N3++ < $3 || null != O3[0]) && F3--);
                  d3 = null != O3[0], w3[0] || w3.splice(0, 1);
                }
                if (c3 == s2) {
                  for (g3 = 1, F3 = w3[0]; F3 >= 10; F3 /= 10, g3++)
                    ;
                  H(v6, o4 + (v6.e = g3 + p4 * l2 - 1) + 1, u3, d3);
                } else
                  v6.e = p4, v6.r = +d3;
                return v6;
              };
            }(), $2 = /^(-?)0([xbo])(?=\w[\w.]*$)/i, B2 = /^([^.]+)\.$/, M2 = /^\.([^.]+)$/, D3 = /^-?(Infinity|NaN)$/, F2 = /^\s*\+(?=[\w.])|^\s+|\s+$/g, x2 = function(e4, t4, r4, n3) {
              var i3, a3 = r4 ? t4 : t4.replace(F2, "");
              if (D3.test(a3))
                e4.s = isNaN(a3) ? null : a3 < 0 ? -1 : 1;
              else {
                if (!r4 && (a3 = a3.replace($2, function(e5, t5, r5) {
                  return i3 = "x" == (r5 = r5.toLowerCase()) ? 16 : "b" == r5 ? 2 : 8, n3 && n3 != i3 ? e5 : t5;
                }), n3 && (i3 = n3, a3 = a3.replace(B2, "$1").replace(M2, "0.$1")), t4 != a3))
                  return new q2(a3, i3);
                if (q2.DEBUG)
                  throw Error(o3 + "Not a" + (n3 ? " base " + n3 : "") + " number: " + t4);
                e4.s = null;
              }
              e4.c = e4.e = null;
            }, E2.absoluteValue = E2.abs = function() {
              var e4 = new q2(this);
              return e4.s < 0 && (e4.s = 1), e4;
            }, E2.comparedTo = function(e4, t4) {
              return m2(this, new q2(e4, t4));
            }, E2.decimalPlaces = E2.dp = function(e4, t4) {
              var r4, n3, i3, a3 = this;
              if (null != e4)
                return y2(e4, 0, g2), null == t4 ? t4 = k2 : y2(t4, 0, 8), H(new q2(a3), e4 + a3.e + 1, t4);
              if (!(r4 = a3.c))
                return null;
              if (n3 = ((i3 = r4.length - 1) - h2(this.e / l2)) * l2, i3 = r4[i3])
                for (; i3 % 10 == 0; i3 /= 10, n3--)
                  ;
              return n3 < 0 && (n3 = 0), n3;
            }, E2.dividedBy = E2.div = function(e4, t4) {
              return r3(this, new q2(e4, t4), _2, k2);
            }, E2.dividedToIntegerBy = E2.idiv = function(e4, t4) {
              return r3(this, new q2(e4, t4), 0, 1);
            }, E2.exponentiatedBy = E2.pow = function(e4, t4) {
              var r4, n3, u3, s3, c3, f5, p4, g3, h3 = this;
              if ((e4 = new q2(e4)).c && !e4.isInteger())
                throw Error(o3 + "Exponent not an integer: " + Y(e4));
              if (null != t4 && (t4 = new q2(t4)), c3 = e4.e > 14, !h3.c || !h3.c[0] || 1 == h3.c[0] && !h3.e && 1 == h3.c.length || !e4.c || !e4.c[0])
                return g3 = new q2(Math.pow(+Y(h3), c3 ? e4.s * (2 - b2(e4)) : +Y(e4))), t4 ? g3.mod(t4) : g3;
              if (f5 = e4.s < 0, t4) {
                if (t4.c ? !t4.c[0] : !t4.s)
                  return new q2(NaN);
                (n3 = !f5 && h3.isInteger() && t4.isInteger()) && (h3 = h3.mod(t4));
              } else {
                if (e4.e > 9 && (h3.e > 0 || h3.e < -1 || (0 == h3.e ? h3.c[0] > 1 || c3 && h3.c[1] >= 24e7 : h3.c[0] < 8e13 || c3 && h3.c[0] <= 9999975e7)))
                  return s3 = h3.s < 0 && b2(e4) ? -0 : 0, h3.e > -1 && (s3 = 1 / s3), new q2(f5 ? 1 / s3 : s3);
                R2 && (s3 = i2(R2 / l2 + 2));
              }
              for (c3 ? (r4 = new q2(0.5), f5 && (e4.s = 1), p4 = b2(e4)) : p4 = (u3 = Math.abs(+Y(e4))) % 2, g3 = new q2(A2); ; ) {
                if (p4) {
                  if (!(g3 = g3.times(h3)).c)
                    break;
                  s3 ? g3.c.length > s3 && (g3.c.length = s3) : n3 && (g3 = g3.mod(t4));
                }
                if (u3) {
                  if (0 === (u3 = a2(u3 / 2)))
                    break;
                  p4 = u3 % 2;
                } else if (H(e4 = e4.times(r4), e4.e + 1, 1), e4.e > 14)
                  p4 = b2(e4);
                else {
                  if (0 === (u3 = +Y(e4)))
                    break;
                  p4 = u3 % 2;
                }
                h3 = h3.times(h3), s3 ? h3.c && h3.c.length > s3 && (h3.c.length = s3) : n3 && (h3 = h3.mod(t4));
              }
              return n3 ? g3 : (f5 && (g3 = A2.div(g3)), t4 ? g3.mod(t4) : s3 ? H(g3, R2, k2, void 0) : g3);
            }, E2.integerValue = function(e4) {
              var t4 = new q2(this);
              return null == e4 ? e4 = k2 : y2(e4, 0, 8), H(t4, t4.e + 1, e4);
            }, E2.isEqualTo = E2.eq = function(e4, t4) {
              return 0 === m2(this, new q2(e4, t4));
            }, E2.isFinite = function() {
              return !!this.c;
            }, E2.isGreaterThan = E2.gt = function(e4, t4) {
              return m2(this, new q2(e4, t4)) > 0;
            }, E2.isGreaterThanOrEqualTo = E2.gte = function(e4, t4) {
              return 1 === (t4 = m2(this, new q2(e4, t4))) || 0 === t4;
            }, E2.isInteger = function() {
              return !!this.c && h2(this.e / l2) > this.c.length - 2;
            }, E2.isLessThan = E2.lt = function(e4, t4) {
              return m2(this, new q2(e4, t4)) < 0;
            }, E2.isLessThanOrEqualTo = E2.lte = function(e4, t4) {
              return -1 === (t4 = m2(this, new q2(e4, t4))) || 0 === t4;
            }, E2.isNaN = function() {
              return !this.s;
            }, E2.isNegative = function() {
              return this.s < 0;
            }, E2.isPositive = function() {
              return this.s > 0;
            }, E2.isZero = function() {
              return !!this.c && 0 == this.c[0];
            }, E2.minus = function(e4, t4) {
              var r4, n3, i3, a3, o4 = this, u3 = o4.s;
              if (t4 = (e4 = new q2(e4, t4)).s, !u3 || !t4)
                return new q2(NaN);
              if (u3 != t4)
                return e4.s = -t4, o4.plus(e4);
              var c3 = o4.e / l2, f5 = e4.e / l2, p4 = o4.c, g3 = e4.c;
              if (!c3 || !f5) {
                if (!p4 || !g3)
                  return p4 ? (e4.s = -t4, e4) : new q2(g3 ? o4 : NaN);
                if (!p4[0] || !g3[0])
                  return g3[0] ? (e4.s = -t4, e4) : new q2(p4[0] ? o4 : 3 == k2 ? -0 : 0);
              }
              if (c3 = h2(c3), f5 = h2(f5), p4 = p4.slice(), u3 = c3 - f5) {
                for ((a3 = u3 < 0) ? (u3 = -u3, i3 = p4) : (f5 = c3, i3 = g3), i3.reverse(), t4 = u3; t4--; i3.push(0))
                  ;
                i3.reverse();
              } else
                for (n3 = (a3 = (u3 = p4.length) < (t4 = g3.length)) ? u3 : t4, u3 = t4 = 0; t4 < n3; t4++)
                  if (p4[t4] != g3[t4]) {
                    a3 = p4[t4] < g3[t4];
                    break;
                  }
              if (a3 && (i3 = p4, p4 = g3, g3 = i3, e4.s = -e4.s), (t4 = (n3 = g3.length) - (r4 = p4.length)) > 0)
                for (; t4--; p4[r4++] = 0)
                  ;
              for (t4 = s2 - 1; n3 > u3; ) {
                if (p4[--n3] < g3[n3]) {
                  for (r4 = n3; r4 && !p4[--r4]; p4[r4] = t4)
                    ;
                  --p4[r4], p4[n3] += s2;
                }
                p4[n3] -= g3[n3];
              }
              for (; 0 == p4[0]; p4.splice(0, 1), --f5)
                ;
              return p4[0] ? W2(e4, p4, f5) : (e4.s = 3 == k2 ? -1 : 1, e4.c = [e4.e = 0], e4);
            }, E2.modulo = E2.mod = function(e4, t4) {
              var n3, i3, a3 = this;
              return e4 = new q2(e4, t4), !a3.c || !e4.s || e4.c && !e4.c[0] ? new q2(NaN) : !e4.c || a3.c && !a3.c[0] ? new q2(a3) : (9 == U2 ? (i3 = e4.s, e4.s = 1, n3 = r3(a3, e4, 0, 3), e4.s = i3, n3.s *= i3) : n3 = r3(a3, e4, 0, U2), (e4 = a3.minus(n3.times(e4))).c[0] || 1 != U2 || (e4.s = a3.s), e4);
            }, E2.multipliedBy = E2.times = function(e4, t4) {
              var r4, n3, i3, a3, o4, u3, c3, f5, g3, d3, m3, y3, b3, v6, w3, O3 = this, x3 = O3.c, S3 = (e4 = new q2(e4, t4)).c;
              if (!(x3 && S3 && x3[0] && S3[0]))
                return !O3.s || !e4.s || x3 && !x3[0] && !S3 || S3 && !S3[0] && !x3 ? e4.c = e4.e = e4.s = null : (e4.s *= O3.s, x3 && S3 ? (e4.c = [0], e4.e = 0) : e4.c = e4.e = null), e4;
              for (n3 = h2(O3.e / l2) + h2(e4.e / l2), e4.s *= O3.s, (c3 = x3.length) < (d3 = S3.length) && (b3 = x3, x3 = S3, S3 = b3, i3 = c3, c3 = d3, d3 = i3), i3 = c3 + d3, b3 = []; i3--; b3.push(0))
                ;
              for (v6 = s2, w3 = p3, i3 = d3; --i3 >= 0; ) {
                for (r4 = 0, m3 = S3[i3] % w3, y3 = S3[i3] / w3 | 0, a3 = i3 + (o4 = c3); a3 > i3; )
                  r4 = ((f5 = m3 * (f5 = x3[--o4] % w3) + (u3 = y3 * f5 + (g3 = x3[o4] / w3 | 0) * m3) % w3 * w3 + b3[a3] + r4) / v6 | 0) + (u3 / w3 | 0) + y3 * g3, b3[a3--] = f5 % v6;
                b3[a3] = r4;
              }
              return r4 ? ++n3 : b3.splice(0, 1), W2(e4, b3, n3);
            }, E2.negated = function() {
              var e4 = new q2(this);
              return e4.s = -e4.s || null, e4;
            }, E2.plus = function(e4, t4) {
              var r4, n3 = this, i3 = n3.s;
              if (t4 = (e4 = new q2(e4, t4)).s, !i3 || !t4)
                return new q2(NaN);
              if (i3 != t4)
                return e4.s = -t4, n3.minus(e4);
              var a3 = n3.e / l2, o4 = e4.e / l2, u3 = n3.c, c3 = e4.c;
              if (!a3 || !o4) {
                if (!u3 || !c3)
                  return new q2(i3 / 0);
                if (!u3[0] || !c3[0])
                  return c3[0] ? e4 : new q2(u3[0] ? n3 : 0 * i3);
              }
              if (a3 = h2(a3), o4 = h2(o4), u3 = u3.slice(), i3 = a3 - o4) {
                for (i3 > 0 ? (o4 = a3, r4 = c3) : (i3 = -i3, r4 = u3), r4.reverse(); i3--; r4.push(0))
                  ;
                r4.reverse();
              }
              for ((i3 = u3.length) - (t4 = c3.length) < 0 && (r4 = c3, c3 = u3, u3 = r4, t4 = i3), i3 = 0; t4; )
                i3 = (u3[--t4] = u3[t4] + c3[t4] + i3) / s2 | 0, u3[t4] = s2 === u3[t4] ? 0 : u3[t4] % s2;
              return i3 && (u3 = [i3].concat(u3), ++o4), W2(e4, u3, o4);
            }, E2.precision = E2.sd = function(e4, t4) {
              var r4, n3, i3, a3 = this;
              if (null != e4 && e4 !== !!e4)
                return y2(e4, 1, g2), null == t4 ? t4 = k2 : y2(t4, 0, 8), H(new q2(a3), e4, t4);
              if (!(r4 = a3.c))
                return null;
              if (n3 = (i3 = r4.length - 1) * l2 + 1, i3 = r4[i3]) {
                for (; i3 % 10 == 0; i3 /= 10, n3--)
                  ;
                for (i3 = r4[0]; i3 >= 10; i3 /= 10, n3++)
                  ;
              }
              return e4 && a3.e + 1 > n3 && (n3 = a3.e + 1), n3;
            }, E2.shiftedBy = function(e4) {
              return y2(e4, -9007199254740991, c2), this.times("1e" + e4);
            }, E2.squareRoot = E2.sqrt = function() {
              var e4, t4, n3, i3, a3, o4 = this, u3 = o4.c, s3 = o4.s, l3 = o4.e, c3 = _2 + 4, f5 = new q2("0.5");
              if (1 !== s3 || !u3 || !u3[0])
                return new q2(!s3 || s3 < 0 && (!u3 || u3[0]) ? NaN : u3 ? o4 : 1 / 0);
              if (0 == (s3 = Math.sqrt(+Y(o4))) || s3 == 1 / 0 ? (((t4 = d2(u3)).length + l3) % 2 == 0 && (t4 += "0"), s3 = Math.sqrt(+t4), l3 = h2((l3 + 1) / 2) - (l3 < 0 || l3 % 2), n3 = new q2(t4 = s3 == 1 / 0 ? "5e" + l3 : (t4 = s3.toExponential()).slice(0, t4.indexOf("e") + 1) + l3)) : n3 = new q2(s3 + ""), n3.c[0]) {
                for ((s3 = (l3 = n3.e) + c3) < 3 && (s3 = 0); ; )
                  if (a3 = n3, n3 = f5.times(a3.plus(r3(o4, a3, c3, 1))), d2(a3.c).slice(0, s3) === (t4 = d2(n3.c)).slice(0, s3)) {
                    if (n3.e < l3 && --s3, "9999" != (t4 = t4.slice(s3 - 3, s3 + 1)) && (i3 || "4999" != t4)) {
                      +t4 && (+t4.slice(1) || "5" != t4.charAt(0)) || (H(n3, n3.e + _2 + 2, 1), e4 = !n3.times(n3).eq(o4));
                      break;
                    }
                    if (!i3 && (H(a3, a3.e + _2 + 2, 0), a3.times(a3).eq(o4))) {
                      n3 = a3;
                      break;
                    }
                    c3 += 4, s3 += 4, i3 = 1;
                  }
              }
              return H(n3, n3.e + _2 + 1, k2, e4);
            }, E2.toExponential = function(e4, t4) {
              return null != e4 && (y2(e4, 0, g2), e4++), Z2(this, e4, t4, 1);
            }, E2.toFixed = function(e4, t4) {
              return null != e4 && (y2(e4, 0, g2), e4 = e4 + this.e + 1), Z2(this, e4, t4);
            }, E2.toFormat = function(e4, t4, r4) {
              var n3, i3 = this;
              if (null == r4)
                null != e4 && t4 && "object" == typeof t4 ? (r4 = t4, t4 = null) : e4 && "object" == typeof e4 ? (r4 = e4, e4 = t4 = null) : r4 = I2;
              else if ("object" != typeof r4)
                throw Error(o3 + "Argument not an object: " + r4);
              if (n3 = i3.toFixed(e4, t4), i3.c) {
                var a3, u3 = n3.split("."), s3 = +r4.groupSize, l3 = +r4.secondaryGroupSize, c3 = r4.groupSeparator || "", f5 = u3[0], p4 = u3[1], g3 = i3.s < 0, h3 = g3 ? f5.slice(1) : f5, d3 = h3.length;
                if (l3 && (a3 = s3, s3 = l3, l3 = a3, d3 -= a3), s3 > 0 && d3 > 0) {
                  for (a3 = d3 % s3 || s3, f5 = h3.substr(0, a3); a3 < d3; a3 += s3)
                    f5 += c3 + h3.substr(a3, s3);
                  l3 > 0 && (f5 += c3 + h3.slice(a3)), g3 && (f5 = "-" + f5);
                }
                n3 = p4 ? f5 + (r4.decimalSeparator || "") + ((l3 = +r4.fractionGroupSize) ? p4.replace(new RegExp("\\d{" + l3 + "}\\B", "g"), "$&" + (r4.fractionGroupSeparator || "")) : p4) : f5;
              }
              return (r4.prefix || "") + n3 + (r4.suffix || "");
            }, E2.toFraction = function(e4) {
              var t4, n3, i3, a3, u3, s3, c3, p4, g3, h3, m3, y3, b3 = this, v6 = b3.c;
              if (null != e4 && (!(c3 = new q2(e4)).isInteger() && (c3.c || 1 !== c3.s) || c3.lt(A2)))
                throw Error(o3 + "Argument " + (c3.isInteger() ? "out of range: " : "not an integer: ") + Y(c3));
              if (!v6)
                return new q2(b3);
              for (t4 = new q2(A2), g3 = n3 = new q2(A2), i3 = p4 = new q2(A2), y3 = d2(v6), u3 = t4.e = y3.length - b3.e - 1, t4.c[0] = f4[(s3 = u3 % l2) < 0 ? l2 + s3 : s3], e4 = !e4 || c3.comparedTo(t4) > 0 ? u3 > 0 ? t4 : g3 : c3, s3 = C2, C2 = 1 / 0, c3 = new q2(y3), p4.c[0] = 0; h3 = r3(c3, t4, 0, 1), 1 != (a3 = n3.plus(h3.times(i3))).comparedTo(e4); )
                n3 = i3, i3 = a3, g3 = p4.plus(h3.times(a3 = g3)), p4 = a3, t4 = c3.minus(h3.times(a3 = t4)), c3 = a3;
              return a3 = r3(e4.minus(n3), i3, 0, 1), p4 = p4.plus(a3.times(g3)), n3 = n3.plus(a3.times(i3)), p4.s = g3.s = b3.s, m3 = r3(g3, i3, u3 *= 2, k2).minus(b3).abs().comparedTo(r3(p4, n3, u3, k2).minus(b3).abs()) < 1 ? [g3, i3] : [p4, n3], C2 = s3, m3;
            }, E2.toNumber = function() {
              return +Y(this);
            }, E2.toPrecision = function(e4, t4) {
              return null != e4 && y2(e4, 1, g2), Z2(this, e4, t4, 2);
            }, E2.toString = function(e4) {
              var t4, r4 = this, n3 = r4.s, i3 = r4.e;
              return null === i3 ? n3 ? (t4 = "Infinity", n3 < 0 && (t4 = "-" + t4)) : t4 = "NaN" : (null == e4 ? t4 = i3 <= L3 || i3 >= P2 ? v2(d2(r4.c), i3) : w2(d2(r4.c), i3, "0") : 10 === e4 && V2 ? t4 = w2(d2((r4 = H(new q2(r4), _2 + i3 + 1, k2)).c), r4.e, "0") : (y2(e4, 2, G3.length, "Base"), t4 = O2(w2(d2(r4.c), i3, "0"), 10, e4, n3, true)), n3 < 0 && r4.c[0] && (t4 = "-" + t4)), t4;
            }, E2.valueOf = E2.toJSON = function() {
              return Y(this);
            }, E2._isBigNumber = true, null != t3 && q2.set(t3), q2;
          }(), r2.default = r2.BigNumber = r2, t2.exports ? t2.exports = r2 : (e2 || (e2 = "undefined" != typeof self && self ? self : window), e2.BigNumber = r2);
        }(e);
      }(h);
      var d = h.exports;
      const m = p2(), y = s(), b = f3, v = d, w = { trillion: Math.pow(10, 12), billion: Math.pow(10, 9), million: Math.pow(10, 6), thousand: Math.pow(10, 3) }, O = { totalLength: 0, characteristic: 0, forceAverage: false, average: false, mantissa: -1, optionalMantissa: true, thousandSeparated: false, spaceSeparated: false, negative: "sign", forceSign: false, roundingFunction: Math.round, spaceSeparatedAbbreviation: false }, { binarySuffixes: x, decimalSuffixes: S } = m.currentBytes(), N = { general: { scale: 1024, suffixes: S, marker: "bd" }, binary: { scale: 1024, suffixes: x, marker: "b" }, decimal: { scale: 1e3, suffixes: S, marker: "d" } };
      function $(e2, t2 = {}, r2) {
        if ("string" == typeof t2 && (t2 = b.parseFormat(t2)), !y.validateFormat(t2))
          return "ERROR: invalid format";
        let n2 = t2.prefix || "", i2 = t2.postfix || "", a2 = function(e3, t3, r3) {
          switch (t3.output) {
            case "currency":
              return function(e4, t4, r4) {
                const n3 = r4.currentCurrency();
                let i3, a3 = Object.assign({}, t4), o3 = Object.assign({}, O, a3), u2 = "", s2 = !!o3.totalLength || !!o3.forceAverage || o3.average, l2 = a3.currencyPosition || n3.position, c2 = a3.currencySymbol || n3.symbol;
                const f4 = void 0 !== o3.spaceSeparatedCurrency ? o3.spaceSeparatedCurrency : o3.spaceSeparated;
                void 0 === a3.lowPrecision && (a3.lowPrecision = false);
                f4 && (u2 = " ");
                "infix" === l2 && (i3 = u2 + c2 + u2);
                let p3 = F({ instance: e4, providedFormat: a3, state: r4, decimalSeparator: i3 });
                "prefix" === l2 && (p3 = e4._value < 0 && "sign" === o3.negative ? `-${u2}${c2}${p3.slice(1)}` : e4._value > 0 && o3.forceSign ? `+${u2}${c2}${p3.slice(1)}` : c2 + u2 + p3);
                l2 && "postfix" !== l2 || (u2 = !o3.spaceSeparatedAbbreviation && s2 ? "" : u2, p3 = p3 + u2 + c2);
                return p3;
              }(e3, t3 = E(t3, m.currentCurrencyDefaultFormat()), m);
            case "percent":
              return function(e4, t4, r4, n3) {
                let i3 = t4.prefixSymbol, a3 = F({ instance: n3(100 * e4._value), providedFormat: t4, state: r4 }), o3 = Object.assign({}, O, t4);
                if (i3)
                  return `%${o3.spaceSeparated ? " " : ""}${a3}`;
                return `${a3}${o3.spaceSeparated ? " " : ""}%`;
              }(e3, t3 = E(t3, m.currentPercentageDefaultFormat()), m, r3);
            case "byte":
              return function(e4, t4, r4, n3) {
                let i3 = t4.base || "binary", a3 = Object.assign({}, O, t4);
                const { binarySuffixes: o3, decimalSuffixes: u2 } = r4.currentBytes();
                let s2 = { general: { scale: 1024, suffixes: u2 || S, marker: "bd" }, binary: { scale: 1024, suffixes: o3 || x, marker: "b" }, decimal: { scale: 1e3, suffixes: u2 || S, marker: "d" } }[i3], { value: l2, suffix: c2 } = B(e4._value, s2.suffixes, s2.scale), f4 = F({ instance: n3(l2), providedFormat: t4, state: r4, defaults: r4.currentByteDefaultFormat() });
                return `${f4}${a3.spaceSeparated ? " " : ""}${c2}`;
              }(e3, t3 = E(t3, m.currentByteDefaultFormat()), m, r3);
            case "time":
              return t3 = E(t3, m.currentTimeDefaultFormat()), function(e4) {
                let t4 = Math.floor(e4._value / 60 / 60), r4 = Math.floor((e4._value - 60 * t4 * 60) / 60), n3 = Math.round(e4._value - 60 * t4 * 60 - 60 * r4);
                return `${t4}:${r4 < 10 ? "0" : ""}${r4}:${n3 < 10 ? "0" : ""}${n3}`;
              }(e3);
            case "ordinal":
              return function(e4, t4, r4) {
                let n3 = r4.currentOrdinal(), i3 = Object.assign({}, O, t4), a3 = F({ instance: e4, providedFormat: t4, state: r4 }), o3 = n3(e4._value);
                return `${a3}${i3.spaceSeparated ? " " : ""}${o3}`;
              }(e3, t3 = E(t3, m.currentOrdinalDefaultFormat()), m);
            default:
              return F({ instance: e3, providedFormat: t3, numbro: r3 });
          }
        }(e2, t2, r2);
        return a2 = function(e3, t3) {
          return t3 + e3;
        }(a2, n2), a2 = function(e3, t3) {
          return e3 + t3;
        }(a2, i2), a2;
      }
      function B(e2, t2, r2) {
        let n2 = t2[0], i2 = Math.abs(e2);
        if (i2 >= r2) {
          for (let a2 = 1; a2 < t2.length; ++a2) {
            let o3 = Math.pow(r2, a2), u2 = Math.pow(r2, a2 + 1);
            if (i2 >= o3 && i2 < u2) {
              n2 = t2[a2], e2 /= o3;
              break;
            }
          }
          n2 === t2[0] && (e2 /= Math.pow(r2, t2.length - 1), n2 = t2[t2.length - 1]);
        }
        return { value: e2, suffix: n2 };
      }
      function M(e2) {
        let t2 = "";
        for (let r2 = 0; r2 < e2; r2++)
          t2 += "0";
        return t2;
      }
      function D2(e2, t2, r2 = Math.round) {
        if (-1 !== e2.toString().indexOf("e"))
          return function(e3, t3) {
            let r3 = e3.toString(), [n2, i2] = r3.split("e"), [a2, o3 = ""] = n2.split(".");
            if (+i2 > 0)
              r3 = a2 + o3 + M(i2 - o3.length);
            else {
              let e4 = ".";
              e4 = +a2 < 0 ? `-0${e4}` : `0${e4}`;
              let n3 = (M(-i2 - 1) + Math.abs(a2) + o3).substr(0, t3);
              n3.length < t3 && (n3 += M(t3 - n3.length)), r3 = e4 + n3;
            }
            return +i2 > 0 && t3 > 0 && (r3 += `.${M(t3)}`), r3;
          }(e2, t2);
        return new v(r2(+`${e2}e+${t2}`) / Math.pow(10, t2)).toFixed(t2);
      }
      function F({ instance: e2, providedFormat: t2, state: r2 = m, decimalSeparator: n2, defaults: i2 = r2.currentDefaults() }) {
        let a2 = e2._value;
        if (0 === a2 && r2.hasZeroFormat())
          return r2.getZeroFormat();
        if (!isFinite(a2))
          return a2.toString();
        let o3 = Object.assign({}, O, i2, t2), u2 = o3.totalLength, s2 = u2 ? 0 : o3.characteristic, l2 = o3.optionalCharacteristic, c2 = o3.forceAverage, f4 = o3.lowPrecision, p3 = !!u2 || !!c2 || o3.average, g2 = u2 ? -1 : p3 && void 0 === t2.mantissa ? 0 : o3.mantissa, h2 = !u2 && (void 0 === t2.optionalMantissa ? -1 === g2 : o3.optionalMantissa), d2 = o3.trimMantissa, y2 = o3.thousandSeparated, b2 = o3.spaceSeparated, v2 = o3.negative, x2 = o3.forceSign, S2 = o3.exponential, N2 = o3.roundingFunction, $2 = "";
        if (p3) {
          let e3 = function({ value: e4, forceAverage: t3, lowPrecision: r3 = true, abbreviations: n3, spaceSeparated: i3 = false, totalLength: a3 = 0, roundingFunction: o4 = Math.round }) {
            let u3 = "", s3 = Math.abs(e4), l3 = -1;
            if (t3 && n3[t3] && w[t3] ? (u3 = n3[t3], e4 /= w[t3]) : s3 >= w.trillion || r3 && 1 === o4(s3 / w.trillion) ? (u3 = n3.trillion, e4 /= w.trillion) : s3 < w.trillion && s3 >= w.billion || r3 && 1 === o4(s3 / w.billion) ? (u3 = n3.billion, e4 /= w.billion) : s3 < w.billion && s3 >= w.million || r3 && 1 === o4(s3 / w.million) ? (u3 = n3.million, e4 /= w.million) : (s3 < w.million && s3 >= w.thousand || r3 && 1 === o4(s3 / w.thousand)) && (u3 = n3.thousand, e4 /= w.thousand), u3 && (u3 = (i3 ? " " : "") + u3), a3) {
              let t4 = e4 < 0, r4 = e4.toString().split(".")[0], n4 = t4 ? r4.length - 1 : r4.length;
              l3 = Math.max(a3 - n4, 0);
            }
            return { value: e4, abbreviation: u3, mantissaPrecision: l3 };
          }({ value: a2, forceAverage: c2, lowPrecision: f4, abbreviations: r2.currentAbbreviations(), spaceSeparated: b2, roundingFunction: N2, totalLength: u2 });
          a2 = e3.value, $2 += e3.abbreviation, u2 && (g2 = e3.mantissaPrecision);
        }
        if (S2) {
          let e3 = function({ value: e4, characteristicPrecision: t3 }) {
            let [r3, n3] = e4.toExponential().split("e"), i3 = +r3;
            return t3 ? (1 < t3 && (i3 *= Math.pow(10, t3 - 1), n3 = +n3 - (t3 - 1), n3 = n3 >= 0 ? `+${n3}` : n3), { value: i3, abbreviation: `e${n3}` }) : { value: i3, abbreviation: `e${n3}` };
          }({ value: a2, characteristicPrecision: s2 });
          a2 = e3.value, $2 = e3.abbreviation + $2;
        }
        let B2 = function(e3, t3, r3, n3, i3, a3) {
          if (-1 === n3)
            return e3;
          let o4 = D2(t3, n3, a3), [u3, s3 = ""] = o4.toString().split(".");
          if (s3.match(/^0+$/) && (r3 || i3))
            return u3;
          let l3 = s3.match(/0+$/);
          return i3 && l3 ? `${u3}.${s3.toString().slice(0, l3.index)}` : o4.toString();
        }(a2.toString(), a2, h2, g2, d2, N2);
        return B2 = function(e3, t3, r3, n3) {
          let i3 = e3, [a3, o4] = i3.toString().split(".");
          if (a3.match(/^-?0$/) && r3)
            return o4 ? `${a3.replace("0", "")}.${o4}` : a3.replace("0", "");
          const u3 = t3 < 0 && 0 === a3.indexOf("-");
          if (u3 && (a3 = a3.slice(1), i3 = i3.slice(1)), a3.length < n3) {
            let e4 = n3 - a3.length;
            for (let t4 = 0; t4 < e4; t4++)
              i3 = `0${i3}`;
          }
          return u3 && (i3 = `-${i3}`), i3.toString();
        }(B2, a2, l2, s2), B2 = function(e3, t3, r3, n3, i3) {
          let a3 = n3.currentDelimiters(), o4 = a3.thousands;
          i3 = i3 || a3.decimal;
          let u3 = a3.thousandsSize || 3, s3 = e3.toString(), l3 = s3.split(".")[0], c3 = s3.split(".")[1];
          const f5 = t3 < 0 && 0 === l3.indexOf("-");
          if (r3) {
            f5 && (l3 = l3.slice(1));
            let e4 = function(e5, t4) {
              let r4 = [], n4 = 0;
              for (let i4 = e5; i4 > 0; i4--)
                n4 === t4 && (r4.unshift(i4), n4 = 0), n4++;
              return r4;
            }(l3.length, u3);
            e4.forEach((e5, t4) => {
              l3 = l3.slice(0, e5 + t4) + o4 + l3.slice(e5 + t4);
            }), f5 && (l3 = `-${l3}`);
          }
          return s3 = c3 ? l3 + i3 + c3 : l3, s3;
        }(B2, a2, y2, r2, n2), (p3 || S2) && (B2 = function(e3, t3) {
          return e3 + t3;
        }(B2, $2)), (x2 || a2 < 0) && (B2 = function(e3, t3, r3) {
          return 0 === t3 ? e3 : 0 == +e3 ? e3.replace("-", "") : t3 > 0 ? `+${e3}` : "sign" === r3 ? e3 : `(${e3.replace("-", "")})`;
        }(B2, a2, v2)), B2;
      }
      function E(e2, t2) {
        if (!e2)
          return t2;
        let r2 = Object.keys(e2);
        return 1 === r2.length && "output" === r2[0] ? t2 : e2;
      }
      const A = d;
      function _(e2, t2, r2) {
        let n2 = new A(e2._value), i2 = t2;
        return r2.isNumbro(t2) && (i2 = t2._value), i2 = new A(i2), e2._value = n2.minus(i2).toNumber(), e2;
      }
      const k = p2(), L2 = s(), P = ((e2) => ({ loadLanguagesInNode: (t2) => g(t2, e2) }))(G2), T = u();
      let C = ((e2) => ({ format: (...t2) => $(...t2, e2), getByteUnit: (...t2) => function(e3) {
        let t3 = N.general;
        return B(e3._value, t3.suffixes, t3.scale).suffix;
      }(...t2, e2), getBinaryByteUnit: (...t2) => function(e3) {
        let t3 = N.binary;
        return B(e3._value, t3.suffixes, t3.scale).suffix;
      }(...t2, e2), getDecimalByteUnit: (...t2) => function(e3) {
        let t3 = N.decimal;
        return B(e3._value, t3.suffixes, t3.scale).suffix;
      }(...t2, e2), formatOrDefault: E }))(G2), j2 = ((e2) => ({ add: (t2, r2) => function(e3, t3, r3) {
        let n2 = new A(e3._value), i2 = t3;
        return r3.isNumbro(t3) && (i2 = t3._value), i2 = new A(i2), e3._value = n2.plus(i2).toNumber(), e3;
      }(t2, r2, e2), subtract: (t2, r2) => _(t2, r2, e2), multiply: (t2, r2) => function(e3, t3, r3) {
        let n2 = new A(e3._value), i2 = t3;
        return r3.isNumbro(t3) && (i2 = t3._value), i2 = new A(i2), e3._value = n2.times(i2).toNumber(), e3;
      }(t2, r2, e2), divide: (t2, r2) => function(e3, t3, r3) {
        let n2 = new A(e3._value), i2 = t3;
        return r3.isNumbro(t3) && (i2 = t3._value), i2 = new A(i2), e3._value = n2.dividedBy(i2).toNumber(), e3;
      }(t2, r2, e2), set: (t2, r2) => function(e3, t3, r3) {
        let n2 = t3;
        return r3.isNumbro(t3) && (n2 = t3._value), e3._value = n2, e3;
      }(t2, r2, e2), difference: (t2, r2) => function(e3, t3, r3) {
        let n2 = r3(e3._value);
        return _(n2, t3, r3), Math.abs(n2._value);
      }(t2, r2, e2), BigNumber: A }))(G2);
      const U = f3;
      class R {
        constructor(e2) {
          this._value = e2;
        }
        clone() {
          return G2(this._value);
        }
        format(e2 = {}) {
          return C.format(this, e2);
        }
        formatCurrency(e2) {
          return "string" == typeof e2 && (e2 = U.parseFormat(e2)), (e2 = C.formatOrDefault(e2, k.currentCurrencyDefaultFormat())).output = "currency", C.format(this, e2);
        }
        formatTime(e2 = {}) {
          return e2.output = "time", C.format(this, e2);
        }
        binaryByteUnits() {
          return C.getBinaryByteUnit(this);
        }
        decimalByteUnits() {
          return C.getDecimalByteUnit(this);
        }
        byteUnits() {
          return C.getByteUnit(this);
        }
        difference(e2) {
          return j2.difference(this, e2);
        }
        add(e2) {
          return j2.add(this, e2);
        }
        subtract(e2) {
          return j2.subtract(this, e2);
        }
        multiply(e2) {
          return j2.multiply(this, e2);
        }
        divide(e2) {
          return j2.divide(this, e2);
        }
        set(e2) {
          return j2.set(this, I(e2));
        }
        value() {
          return this._value;
        }
        valueOf() {
          return this._value;
        }
      }
      function I(e2) {
        let t2 = e2;
        return G2.isNumbro(e2) ? t2 = e2._value : "string" == typeof e2 ? t2 = G2.unformat(e2) : isNaN(e2) && (t2 = NaN), t2;
      }
      function G2(e2) {
        return new R(I(e2));
      }
      return G2.version = "2.4.0", G2.isNumbro = function(e2) {
        return e2 instanceof R;
      }, G2.language = k.currentLanguage, G2.registerLanguage = k.registerLanguage, G2.setLanguage = k.setLanguage, G2.languages = k.languages, G2.languageData = k.languageData, G2.zeroFormat = k.setZeroFormat, G2.defaultFormat = k.currentDefaults, G2.setDefaults = k.setDefaults, G2.defaultCurrencyFormat = k.currentCurrencyDefaultFormat, G2.validate = L2.validate, G2.loadLanguagesInNode = P.loadLanguagesInNode, G2.unformat = T.unformat, G2.BigNumber = j2.BigNumber, t(G2);
    });
  }
});

// node_modules/ethjs-unit/node_modules/bn.js/lib/bn.js
var require_bn2 = __commonJS({
  "node_modules/ethjs-unit/node_modules/bn.js/lib/bn.js"(exports, module) {
    (function(module2, exports2) {
      "use strict";
      function assert(val, msg) {
        if (!val)
          throw new Error(msg || "Assertion failed");
      }
      function inherits(ctor, superCtor) {
        ctor.super_ = superCtor;
        var TempCtor = function() {
        };
        TempCtor.prototype = superCtor.prototype;
        ctor.prototype = new TempCtor();
        ctor.prototype.constructor = ctor;
      }
      function BN(number, base, endian) {
        if (BN.isBN(number)) {
          return number;
        }
        this.negative = 0;
        this.words = null;
        this.length = 0;
        this.red = null;
        if (number !== null) {
          if (base === "le" || base === "be") {
            endian = base;
            base = 10;
          }
          this._init(number || 0, base || 10, endian || "be");
        }
      }
      if (typeof module2 === "object") {
        module2.exports = BN;
      } else {
        exports2.BN = BN;
      }
      BN.BN = BN;
      BN.wordSize = 26;
      var Buffer2;
      try {
        Buffer2 = require_buffer().Buffer;
      } catch (e) {
      }
      BN.isBN = function isBN(num) {
        if (num instanceof BN) {
          return true;
        }
        return num !== null && typeof num === "object" && num.constructor.wordSize === BN.wordSize && Array.isArray(num.words);
      };
      BN.max = function max(left, right) {
        if (left.cmp(right) > 0)
          return left;
        return right;
      };
      BN.min = function min(left, right) {
        if (left.cmp(right) < 0)
          return left;
        return right;
      };
      BN.prototype._init = function init(number, base, endian) {
        if (typeof number === "number") {
          return this._initNumber(number, base, endian);
        }
        if (typeof number === "object") {
          return this._initArray(number, base, endian);
        }
        if (base === "hex") {
          base = 16;
        }
        assert(base === (base | 0) && base >= 2 && base <= 36);
        number = number.toString().replace(/\s+/g, "");
        var start = 0;
        if (number[0] === "-") {
          start++;
        }
        if (base === 16) {
          this._parseHex(number, start);
        } else {
          this._parseBase(number, base, start);
        }
        if (number[0] === "-") {
          this.negative = 1;
        }
        this.strip();
        if (endian !== "le")
          return;
        this._initArray(this.toArray(), base, endian);
      };
      BN.prototype._initNumber = function _initNumber(number, base, endian) {
        if (number < 0) {
          this.negative = 1;
          number = -number;
        }
        if (number < 67108864) {
          this.words = [number & 67108863];
          this.length = 1;
        } else if (number < 4503599627370496) {
          this.words = [
            number & 67108863,
            number / 67108864 & 67108863
          ];
          this.length = 2;
        } else {
          assert(number < 9007199254740992);
          this.words = [
            number & 67108863,
            number / 67108864 & 67108863,
            1
          ];
          this.length = 3;
        }
        if (endian !== "le")
          return;
        this._initArray(this.toArray(), base, endian);
      };
      BN.prototype._initArray = function _initArray(number, base, endian) {
        assert(typeof number.length === "number");
        if (number.length <= 0) {
          this.words = [0];
          this.length = 1;
          return this;
        }
        this.length = Math.ceil(number.length / 3);
        this.words = new Array(this.length);
        for (var i = 0; i < this.length; i++) {
          this.words[i] = 0;
        }
        var j2, w;
        var off = 0;
        if (endian === "be") {
          for (i = number.length - 1, j2 = 0; i >= 0; i -= 3) {
            w = number[i] | number[i - 1] << 8 | number[i - 2] << 16;
            this.words[j2] |= w << off & 67108863;
            this.words[j2 + 1] = w >>> 26 - off & 67108863;
            off += 24;
            if (off >= 26) {
              off -= 26;
              j2++;
            }
          }
        } else if (endian === "le") {
          for (i = 0, j2 = 0; i < number.length; i += 3) {
            w = number[i] | number[i + 1] << 8 | number[i + 2] << 16;
            this.words[j2] |= w << off & 67108863;
            this.words[j2 + 1] = w >>> 26 - off & 67108863;
            off += 24;
            if (off >= 26) {
              off -= 26;
              j2++;
            }
          }
        }
        return this.strip();
      };
      function parseHex(str, start, end) {
        var r = 0;
        var len = Math.min(str.length, end);
        for (var i = start; i < len; i++) {
          var c = str.charCodeAt(i) - 48;
          r <<= 4;
          if (c >= 49 && c <= 54) {
            r |= c - 49 + 10;
          } else if (c >= 17 && c <= 22) {
            r |= c - 17 + 10;
          } else {
            r |= c & 15;
          }
        }
        return r;
      }
      BN.prototype._parseHex = function _parseHex(number, start) {
        this.length = Math.ceil((number.length - start) / 6);
        this.words = new Array(this.length);
        for (var i = 0; i < this.length; i++) {
          this.words[i] = 0;
        }
        var j2, w;
        var off = 0;
        for (i = number.length - 6, j2 = 0; i >= start; i -= 6) {
          w = parseHex(number, i, i + 6);
          this.words[j2] |= w << off & 67108863;
          this.words[j2 + 1] |= w >>> 26 - off & 4194303;
          off += 24;
          if (off >= 26) {
            off -= 26;
            j2++;
          }
        }
        if (i + 6 !== start) {
          w = parseHex(number, start, i + 6);
          this.words[j2] |= w << off & 67108863;
          this.words[j2 + 1] |= w >>> 26 - off & 4194303;
        }
        this.strip();
      };
      function parseBase(str, start, end, mul) {
        var r = 0;
        var len = Math.min(str.length, end);
        for (var i = start; i < len; i++) {
          var c = str.charCodeAt(i) - 48;
          r *= mul;
          if (c >= 49) {
            r += c - 49 + 10;
          } else if (c >= 17) {
            r += c - 17 + 10;
          } else {
            r += c;
          }
        }
        return r;
      }
      BN.prototype._parseBase = function _parseBase(number, base, start) {
        this.words = [0];
        this.length = 1;
        for (var limbLen = 0, limbPow = 1; limbPow <= 67108863; limbPow *= base) {
          limbLen++;
        }
        limbLen--;
        limbPow = limbPow / base | 0;
        var total = number.length - start;
        var mod = total % limbLen;
        var end = Math.min(total, total - mod) + start;
        var word = 0;
        for (var i = start; i < end; i += limbLen) {
          word = parseBase(number, i, i + limbLen, base);
          this.imuln(limbPow);
          if (this.words[0] + word < 67108864) {
            this.words[0] += word;
          } else {
            this._iaddn(word);
          }
        }
        if (mod !== 0) {
          var pow = 1;
          word = parseBase(number, i, number.length, base);
          for (i = 0; i < mod; i++) {
            pow *= base;
          }
          this.imuln(pow);
          if (this.words[0] + word < 67108864) {
            this.words[0] += word;
          } else {
            this._iaddn(word);
          }
        }
      };
      BN.prototype.copy = function copy(dest) {
        dest.words = new Array(this.length);
        for (var i = 0; i < this.length; i++) {
          dest.words[i] = this.words[i];
        }
        dest.length = this.length;
        dest.negative = this.negative;
        dest.red = this.red;
      };
      BN.prototype.clone = function clone() {
        var r = new BN(null);
        this.copy(r);
        return r;
      };
      BN.prototype._expand = function _expand(size) {
        while (this.length < size) {
          this.words[this.length++] = 0;
        }
        return this;
      };
      BN.prototype.strip = function strip() {
        while (this.length > 1 && this.words[this.length - 1] === 0) {
          this.length--;
        }
        return this._normSign();
      };
      BN.prototype._normSign = function _normSign() {
        if (this.length === 1 && this.words[0] === 0) {
          this.negative = 0;
        }
        return this;
      };
      BN.prototype.inspect = function inspect() {
        return (this.red ? "<BN-R: " : "<BN: ") + this.toString(16) + ">";
      };
      var zeros = [
        "",
        "0",
        "00",
        "000",
        "0000",
        "00000",
        "000000",
        "0000000",
        "00000000",
        "000000000",
        "0000000000",
        "00000000000",
        "000000000000",
        "0000000000000",
        "00000000000000",
        "000000000000000",
        "0000000000000000",
        "00000000000000000",
        "000000000000000000",
        "0000000000000000000",
        "00000000000000000000",
        "000000000000000000000",
        "0000000000000000000000",
        "00000000000000000000000",
        "000000000000000000000000",
        "0000000000000000000000000"
      ];
      var groupSizes = [
        0,
        0,
        25,
        16,
        12,
        11,
        10,
        9,
        8,
        8,
        7,
        7,
        7,
        7,
        6,
        6,
        6,
        6,
        6,
        6,
        6,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5
      ];
      var groupBases = [
        0,
        0,
        33554432,
        43046721,
        16777216,
        48828125,
        60466176,
        40353607,
        16777216,
        43046721,
        1e7,
        19487171,
        35831808,
        62748517,
        7529536,
        11390625,
        16777216,
        24137569,
        34012224,
        47045881,
        64e6,
        4084101,
        5153632,
        6436343,
        7962624,
        9765625,
        11881376,
        14348907,
        17210368,
        20511149,
        243e5,
        28629151,
        33554432,
        39135393,
        45435424,
        52521875,
        60466176
      ];
      BN.prototype.toString = function toString(base, padding) {
        base = base || 10;
        padding = padding | 0 || 1;
        var out;
        if (base === 16 || base === "hex") {
          out = "";
          var off = 0;
          var carry = 0;
          for (var i = 0; i < this.length; i++) {
            var w = this.words[i];
            var word = ((w << off | carry) & 16777215).toString(16);
            carry = w >>> 24 - off & 16777215;
            if (carry !== 0 || i !== this.length - 1) {
              out = zeros[6 - word.length] + word + out;
            } else {
              out = word + out;
            }
            off += 2;
            if (off >= 26) {
              off -= 26;
              i--;
            }
          }
          if (carry !== 0) {
            out = carry.toString(16) + out;
          }
          while (out.length % padding !== 0) {
            out = "0" + out;
          }
          if (this.negative !== 0) {
            out = "-" + out;
          }
          return out;
        }
        if (base === (base | 0) && base >= 2 && base <= 36) {
          var groupSize = groupSizes[base];
          var groupBase = groupBases[base];
          out = "";
          var c = this.clone();
          c.negative = 0;
          while (!c.isZero()) {
            var r = c.modn(groupBase).toString(base);
            c = c.idivn(groupBase);
            if (!c.isZero()) {
              out = zeros[groupSize - r.length] + r + out;
            } else {
              out = r + out;
            }
          }
          if (this.isZero()) {
            out = "0" + out;
          }
          while (out.length % padding !== 0) {
            out = "0" + out;
          }
          if (this.negative !== 0) {
            out = "-" + out;
          }
          return out;
        }
        assert(false, "Base should be between 2 and 36");
      };
      BN.prototype.toNumber = function toNumber() {
        var ret = this.words[0];
        if (this.length === 2) {
          ret += this.words[1] * 67108864;
        } else if (this.length === 3 && this.words[2] === 1) {
          ret += 4503599627370496 + this.words[1] * 67108864;
        } else if (this.length > 2) {
          assert(false, "Number can only safely store up to 53 bits");
        }
        return this.negative !== 0 ? -ret : ret;
      };
      BN.prototype.toJSON = function toJSON() {
        return this.toString(16);
      };
      BN.prototype.toBuffer = function toBuffer(endian, length) {
        assert(typeof Buffer2 !== "undefined");
        return this.toArrayLike(Buffer2, endian, length);
      };
      BN.prototype.toArray = function toArray(endian, length) {
        return this.toArrayLike(Array, endian, length);
      };
      BN.prototype.toArrayLike = function toArrayLike(ArrayType, endian, length) {
        var byteLength = this.byteLength();
        var reqLength = length || Math.max(1, byteLength);
        assert(byteLength <= reqLength, "byte array longer than desired length");
        assert(reqLength > 0, "Requested array length <= 0");
        this.strip();
        var littleEndian = endian === "le";
        var res = new ArrayType(reqLength);
        var b, i;
        var q2 = this.clone();
        if (!littleEndian) {
          for (i = 0; i < reqLength - byteLength; i++) {
            res[i] = 0;
          }
          for (i = 0; !q2.isZero(); i++) {
            b = q2.andln(255);
            q2.iushrn(8);
            res[reqLength - i - 1] = b;
          }
        } else {
          for (i = 0; !q2.isZero(); i++) {
            b = q2.andln(255);
            q2.iushrn(8);
            res[i] = b;
          }
          for (; i < reqLength; i++) {
            res[i] = 0;
          }
        }
        return res;
      };
      if (Math.clz32) {
        BN.prototype._countBits = function _countBits(w) {
          return 32 - Math.clz32(w);
        };
      } else {
        BN.prototype._countBits = function _countBits(w) {
          var t = w;
          var r = 0;
          if (t >= 4096) {
            r += 13;
            t >>>= 13;
          }
          if (t >= 64) {
            r += 7;
            t >>>= 7;
          }
          if (t >= 8) {
            r += 4;
            t >>>= 4;
          }
          if (t >= 2) {
            r += 2;
            t >>>= 2;
          }
          return r + t;
        };
      }
      BN.prototype._zeroBits = function _zeroBits(w) {
        if (w === 0)
          return 26;
        var t = w;
        var r = 0;
        if ((t & 8191) === 0) {
          r += 13;
          t >>>= 13;
        }
        if ((t & 127) === 0) {
          r += 7;
          t >>>= 7;
        }
        if ((t & 15) === 0) {
          r += 4;
          t >>>= 4;
        }
        if ((t & 3) === 0) {
          r += 2;
          t >>>= 2;
        }
        if ((t & 1) === 0) {
          r++;
        }
        return r;
      };
      BN.prototype.bitLength = function bitLength() {
        var w = this.words[this.length - 1];
        var hi = this._countBits(w);
        return (this.length - 1) * 26 + hi;
      };
      function toBitArray(num) {
        var w = new Array(num.bitLength());
        for (var bit = 0; bit < w.length; bit++) {
          var off = bit / 26 | 0;
          var wbit = bit % 26;
          w[bit] = (num.words[off] & 1 << wbit) >>> wbit;
        }
        return w;
      }
      BN.prototype.zeroBits = function zeroBits() {
        if (this.isZero())
          return 0;
        var r = 0;
        for (var i = 0; i < this.length; i++) {
          var b = this._zeroBits(this.words[i]);
          r += b;
          if (b !== 26)
            break;
        }
        return r;
      };
      BN.prototype.byteLength = function byteLength() {
        return Math.ceil(this.bitLength() / 8);
      };
      BN.prototype.toTwos = function toTwos(width) {
        if (this.negative !== 0) {
          return this.abs().inotn(width).iaddn(1);
        }
        return this.clone();
      };
      BN.prototype.fromTwos = function fromTwos(width) {
        if (this.testn(width - 1)) {
          return this.notn(width).iaddn(1).ineg();
        }
        return this.clone();
      };
      BN.prototype.isNeg = function isNeg() {
        return this.negative !== 0;
      };
      BN.prototype.neg = function neg() {
        return this.clone().ineg();
      };
      BN.prototype.ineg = function ineg() {
        if (!this.isZero()) {
          this.negative ^= 1;
        }
        return this;
      };
      BN.prototype.iuor = function iuor(num) {
        while (this.length < num.length) {
          this.words[this.length++] = 0;
        }
        for (var i = 0; i < num.length; i++) {
          this.words[i] = this.words[i] | num.words[i];
        }
        return this.strip();
      };
      BN.prototype.ior = function ior(num) {
        assert((this.negative | num.negative) === 0);
        return this.iuor(num);
      };
      BN.prototype.or = function or2(num) {
        if (this.length > num.length)
          return this.clone().ior(num);
        return num.clone().ior(this);
      };
      BN.prototype.uor = function uor(num) {
        if (this.length > num.length)
          return this.clone().iuor(num);
        return num.clone().iuor(this);
      };
      BN.prototype.iuand = function iuand(num) {
        var b;
        if (this.length > num.length) {
          b = num;
        } else {
          b = this;
        }
        for (var i = 0; i < b.length; i++) {
          this.words[i] = this.words[i] & num.words[i];
        }
        this.length = b.length;
        return this.strip();
      };
      BN.prototype.iand = function iand(num) {
        assert((this.negative | num.negative) === 0);
        return this.iuand(num);
      };
      BN.prototype.and = function and(num) {
        if (this.length > num.length)
          return this.clone().iand(num);
        return num.clone().iand(this);
      };
      BN.prototype.uand = function uand(num) {
        if (this.length > num.length)
          return this.clone().iuand(num);
        return num.clone().iuand(this);
      };
      BN.prototype.iuxor = function iuxor(num) {
        var a;
        var b;
        if (this.length > num.length) {
          a = this;
          b = num;
        } else {
          a = num;
          b = this;
        }
        for (var i = 0; i < b.length; i++) {
          this.words[i] = a.words[i] ^ b.words[i];
        }
        if (this !== a) {
          for (; i < a.length; i++) {
            this.words[i] = a.words[i];
          }
        }
        this.length = a.length;
        return this.strip();
      };
      BN.prototype.ixor = function ixor(num) {
        assert((this.negative | num.negative) === 0);
        return this.iuxor(num);
      };
      BN.prototype.xor = function xor(num) {
        if (this.length > num.length)
          return this.clone().ixor(num);
        return num.clone().ixor(this);
      };
      BN.prototype.uxor = function uxor(num) {
        if (this.length > num.length)
          return this.clone().iuxor(num);
        return num.clone().iuxor(this);
      };
      BN.prototype.inotn = function inotn(width) {
        assert(typeof width === "number" && width >= 0);
        var bytesNeeded = Math.ceil(width / 26) | 0;
        var bitsLeft = width % 26;
        this._expand(bytesNeeded);
        if (bitsLeft > 0) {
          bytesNeeded--;
        }
        for (var i = 0; i < bytesNeeded; i++) {
          this.words[i] = ~this.words[i] & 67108863;
        }
        if (bitsLeft > 0) {
          this.words[i] = ~this.words[i] & 67108863 >> 26 - bitsLeft;
        }
        return this.strip();
      };
      BN.prototype.notn = function notn(width) {
        return this.clone().inotn(width);
      };
      BN.prototype.setn = function setn(bit, val) {
        assert(typeof bit === "number" && bit >= 0);
        var off = bit / 26 | 0;
        var wbit = bit % 26;
        this._expand(off + 1);
        if (val) {
          this.words[off] = this.words[off] | 1 << wbit;
        } else {
          this.words[off] = this.words[off] & ~(1 << wbit);
        }
        return this.strip();
      };
      BN.prototype.iadd = function iadd(num) {
        var r;
        if (this.negative !== 0 && num.negative === 0) {
          this.negative = 0;
          r = this.isub(num);
          this.negative ^= 1;
          return this._normSign();
        } else if (this.negative === 0 && num.negative !== 0) {
          num.negative = 0;
          r = this.isub(num);
          num.negative = 1;
          return r._normSign();
        }
        var a, b;
        if (this.length > num.length) {
          a = this;
          b = num;
        } else {
          a = num;
          b = this;
        }
        var carry = 0;
        for (var i = 0; i < b.length; i++) {
          r = (a.words[i] | 0) + (b.words[i] | 0) + carry;
          this.words[i] = r & 67108863;
          carry = r >>> 26;
        }
        for (; carry !== 0 && i < a.length; i++) {
          r = (a.words[i] | 0) + carry;
          this.words[i] = r & 67108863;
          carry = r >>> 26;
        }
        this.length = a.length;
        if (carry !== 0) {
          this.words[this.length] = carry;
          this.length++;
        } else if (a !== this) {
          for (; i < a.length; i++) {
            this.words[i] = a.words[i];
          }
        }
        return this;
      };
      BN.prototype.add = function add(num) {
        var res;
        if (num.negative !== 0 && this.negative === 0) {
          num.negative = 0;
          res = this.sub(num);
          num.negative ^= 1;
          return res;
        } else if (num.negative === 0 && this.negative !== 0) {
          this.negative = 0;
          res = num.sub(this);
          this.negative = 1;
          return res;
        }
        if (this.length > num.length)
          return this.clone().iadd(num);
        return num.clone().iadd(this);
      };
      BN.prototype.isub = function isub(num) {
        if (num.negative !== 0) {
          num.negative = 0;
          var r = this.iadd(num);
          num.negative = 1;
          return r._normSign();
        } else if (this.negative !== 0) {
          this.negative = 0;
          this.iadd(num);
          this.negative = 1;
          return this._normSign();
        }
        var cmp = this.cmp(num);
        if (cmp === 0) {
          this.negative = 0;
          this.length = 1;
          this.words[0] = 0;
          return this;
        }
        var a, b;
        if (cmp > 0) {
          a = this;
          b = num;
        } else {
          a = num;
          b = this;
        }
        var carry = 0;
        for (var i = 0; i < b.length; i++) {
          r = (a.words[i] | 0) - (b.words[i] | 0) + carry;
          carry = r >> 26;
          this.words[i] = r & 67108863;
        }
        for (; carry !== 0 && i < a.length; i++) {
          r = (a.words[i] | 0) + carry;
          carry = r >> 26;
          this.words[i] = r & 67108863;
        }
        if (carry === 0 && i < a.length && a !== this) {
          for (; i < a.length; i++) {
            this.words[i] = a.words[i];
          }
        }
        this.length = Math.max(this.length, i);
        if (a !== this) {
          this.negative = 1;
        }
        return this.strip();
      };
      BN.prototype.sub = function sub(num) {
        return this.clone().isub(num);
      };
      function smallMulTo(self2, num, out) {
        out.negative = num.negative ^ self2.negative;
        var len = self2.length + num.length | 0;
        out.length = len;
        len = len - 1 | 0;
        var a = self2.words[0] | 0;
        var b = num.words[0] | 0;
        var r = a * b;
        var lo = r & 67108863;
        var carry = r / 67108864 | 0;
        out.words[0] = lo;
        for (var k = 1; k < len; k++) {
          var ncarry = carry >>> 26;
          var rword = carry & 67108863;
          var maxJ = Math.min(k, num.length - 1);
          for (var j2 = Math.max(0, k - self2.length + 1); j2 <= maxJ; j2++) {
            var i = k - j2 | 0;
            a = self2.words[i] | 0;
            b = num.words[j2] | 0;
            r = a * b + rword;
            ncarry += r / 67108864 | 0;
            rword = r & 67108863;
          }
          out.words[k] = rword | 0;
          carry = ncarry | 0;
        }
        if (carry !== 0) {
          out.words[k] = carry | 0;
        } else {
          out.length--;
        }
        return out.strip();
      }
      var comb10MulTo = function comb10MulTo2(self2, num, out) {
        var a = self2.words;
        var b = num.words;
        var o2 = out.words;
        var c = 0;
        var lo;
        var mid;
        var hi;
        var a0 = a[0] | 0;
        var al0 = a0 & 8191;
        var ah0 = a0 >>> 13;
        var a1 = a[1] | 0;
        var al1 = a1 & 8191;
        var ah1 = a1 >>> 13;
        var a2 = a[2] | 0;
        var al2 = a2 & 8191;
        var ah2 = a2 >>> 13;
        var a3 = a[3] | 0;
        var al3 = a3 & 8191;
        var ah3 = a3 >>> 13;
        var a4 = a[4] | 0;
        var al4 = a4 & 8191;
        var ah4 = a4 >>> 13;
        var a5 = a[5] | 0;
        var al5 = a5 & 8191;
        var ah5 = a5 >>> 13;
        var a6 = a[6] | 0;
        var al6 = a6 & 8191;
        var ah6 = a6 >>> 13;
        var a7 = a[7] | 0;
        var al7 = a7 & 8191;
        var ah7 = a7 >>> 13;
        var a8 = a[8] | 0;
        var al8 = a8 & 8191;
        var ah8 = a8 >>> 13;
        var a9 = a[9] | 0;
        var al9 = a9 & 8191;
        var ah9 = a9 >>> 13;
        var b0 = b[0] | 0;
        var bl0 = b0 & 8191;
        var bh0 = b0 >>> 13;
        var b1 = b[1] | 0;
        var bl1 = b1 & 8191;
        var bh1 = b1 >>> 13;
        var b2 = b[2] | 0;
        var bl2 = b2 & 8191;
        var bh2 = b2 >>> 13;
        var b3 = b[3] | 0;
        var bl3 = b3 & 8191;
        var bh3 = b3 >>> 13;
        var b4 = b[4] | 0;
        var bl4 = b4 & 8191;
        var bh4 = b4 >>> 13;
        var b5 = b[5] | 0;
        var bl5 = b5 & 8191;
        var bh5 = b5 >>> 13;
        var b6 = b[6] | 0;
        var bl6 = b6 & 8191;
        var bh6 = b6 >>> 13;
        var b7 = b[7] | 0;
        var bl7 = b7 & 8191;
        var bh7 = b7 >>> 13;
        var b8 = b[8] | 0;
        var bl8 = b8 & 8191;
        var bh8 = b8 >>> 13;
        var b9 = b[9] | 0;
        var bl9 = b9 & 8191;
        var bh9 = b9 >>> 13;
        out.negative = self2.negative ^ num.negative;
        out.length = 19;
        lo = Math.imul(al0, bl0);
        mid = Math.imul(al0, bh0);
        mid = mid + Math.imul(ah0, bl0) | 0;
        hi = Math.imul(ah0, bh0);
        var w0 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w0 >>> 26) | 0;
        w0 &= 67108863;
        lo = Math.imul(al1, bl0);
        mid = Math.imul(al1, bh0);
        mid = mid + Math.imul(ah1, bl0) | 0;
        hi = Math.imul(ah1, bh0);
        lo = lo + Math.imul(al0, bl1) | 0;
        mid = mid + Math.imul(al0, bh1) | 0;
        mid = mid + Math.imul(ah0, bl1) | 0;
        hi = hi + Math.imul(ah0, bh1) | 0;
        var w1 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w1 >>> 26) | 0;
        w1 &= 67108863;
        lo = Math.imul(al2, bl0);
        mid = Math.imul(al2, bh0);
        mid = mid + Math.imul(ah2, bl0) | 0;
        hi = Math.imul(ah2, bh0);
        lo = lo + Math.imul(al1, bl1) | 0;
        mid = mid + Math.imul(al1, bh1) | 0;
        mid = mid + Math.imul(ah1, bl1) | 0;
        hi = hi + Math.imul(ah1, bh1) | 0;
        lo = lo + Math.imul(al0, bl2) | 0;
        mid = mid + Math.imul(al0, bh2) | 0;
        mid = mid + Math.imul(ah0, bl2) | 0;
        hi = hi + Math.imul(ah0, bh2) | 0;
        var w2 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w2 >>> 26) | 0;
        w2 &= 67108863;
        lo = Math.imul(al3, bl0);
        mid = Math.imul(al3, bh0);
        mid = mid + Math.imul(ah3, bl0) | 0;
        hi = Math.imul(ah3, bh0);
        lo = lo + Math.imul(al2, bl1) | 0;
        mid = mid + Math.imul(al2, bh1) | 0;
        mid = mid + Math.imul(ah2, bl1) | 0;
        hi = hi + Math.imul(ah2, bh1) | 0;
        lo = lo + Math.imul(al1, bl2) | 0;
        mid = mid + Math.imul(al1, bh2) | 0;
        mid = mid + Math.imul(ah1, bl2) | 0;
        hi = hi + Math.imul(ah1, bh2) | 0;
        lo = lo + Math.imul(al0, bl3) | 0;
        mid = mid + Math.imul(al0, bh3) | 0;
        mid = mid + Math.imul(ah0, bl3) | 0;
        hi = hi + Math.imul(ah0, bh3) | 0;
        var w3 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w3 >>> 26) | 0;
        w3 &= 67108863;
        lo = Math.imul(al4, bl0);
        mid = Math.imul(al4, bh0);
        mid = mid + Math.imul(ah4, bl0) | 0;
        hi = Math.imul(ah4, bh0);
        lo = lo + Math.imul(al3, bl1) | 0;
        mid = mid + Math.imul(al3, bh1) | 0;
        mid = mid + Math.imul(ah3, bl1) | 0;
        hi = hi + Math.imul(ah3, bh1) | 0;
        lo = lo + Math.imul(al2, bl2) | 0;
        mid = mid + Math.imul(al2, bh2) | 0;
        mid = mid + Math.imul(ah2, bl2) | 0;
        hi = hi + Math.imul(ah2, bh2) | 0;
        lo = lo + Math.imul(al1, bl3) | 0;
        mid = mid + Math.imul(al1, bh3) | 0;
        mid = mid + Math.imul(ah1, bl3) | 0;
        hi = hi + Math.imul(ah1, bh3) | 0;
        lo = lo + Math.imul(al0, bl4) | 0;
        mid = mid + Math.imul(al0, bh4) | 0;
        mid = mid + Math.imul(ah0, bl4) | 0;
        hi = hi + Math.imul(ah0, bh4) | 0;
        var w4 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w4 >>> 26) | 0;
        w4 &= 67108863;
        lo = Math.imul(al5, bl0);
        mid = Math.imul(al5, bh0);
        mid = mid + Math.imul(ah5, bl0) | 0;
        hi = Math.imul(ah5, bh0);
        lo = lo + Math.imul(al4, bl1) | 0;
        mid = mid + Math.imul(al4, bh1) | 0;
        mid = mid + Math.imul(ah4, bl1) | 0;
        hi = hi + Math.imul(ah4, bh1) | 0;
        lo = lo + Math.imul(al3, bl2) | 0;
        mid = mid + Math.imul(al3, bh2) | 0;
        mid = mid + Math.imul(ah3, bl2) | 0;
        hi = hi + Math.imul(ah3, bh2) | 0;
        lo = lo + Math.imul(al2, bl3) | 0;
        mid = mid + Math.imul(al2, bh3) | 0;
        mid = mid + Math.imul(ah2, bl3) | 0;
        hi = hi + Math.imul(ah2, bh3) | 0;
        lo = lo + Math.imul(al1, bl4) | 0;
        mid = mid + Math.imul(al1, bh4) | 0;
        mid = mid + Math.imul(ah1, bl4) | 0;
        hi = hi + Math.imul(ah1, bh4) | 0;
        lo = lo + Math.imul(al0, bl5) | 0;
        mid = mid + Math.imul(al0, bh5) | 0;
        mid = mid + Math.imul(ah0, bl5) | 0;
        hi = hi + Math.imul(ah0, bh5) | 0;
        var w5 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w5 >>> 26) | 0;
        w5 &= 67108863;
        lo = Math.imul(al6, bl0);
        mid = Math.imul(al6, bh0);
        mid = mid + Math.imul(ah6, bl0) | 0;
        hi = Math.imul(ah6, bh0);
        lo = lo + Math.imul(al5, bl1) | 0;
        mid = mid + Math.imul(al5, bh1) | 0;
        mid = mid + Math.imul(ah5, bl1) | 0;
        hi = hi + Math.imul(ah5, bh1) | 0;
        lo = lo + Math.imul(al4, bl2) | 0;
        mid = mid + Math.imul(al4, bh2) | 0;
        mid = mid + Math.imul(ah4, bl2) | 0;
        hi = hi + Math.imul(ah4, bh2) | 0;
        lo = lo + Math.imul(al3, bl3) | 0;
        mid = mid + Math.imul(al3, bh3) | 0;
        mid = mid + Math.imul(ah3, bl3) | 0;
        hi = hi + Math.imul(ah3, bh3) | 0;
        lo = lo + Math.imul(al2, bl4) | 0;
        mid = mid + Math.imul(al2, bh4) | 0;
        mid = mid + Math.imul(ah2, bl4) | 0;
        hi = hi + Math.imul(ah2, bh4) | 0;
        lo = lo + Math.imul(al1, bl5) | 0;
        mid = mid + Math.imul(al1, bh5) | 0;
        mid = mid + Math.imul(ah1, bl5) | 0;
        hi = hi + Math.imul(ah1, bh5) | 0;
        lo = lo + Math.imul(al0, bl6) | 0;
        mid = mid + Math.imul(al0, bh6) | 0;
        mid = mid + Math.imul(ah0, bl6) | 0;
        hi = hi + Math.imul(ah0, bh6) | 0;
        var w6 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w6 >>> 26) | 0;
        w6 &= 67108863;
        lo = Math.imul(al7, bl0);
        mid = Math.imul(al7, bh0);
        mid = mid + Math.imul(ah7, bl0) | 0;
        hi = Math.imul(ah7, bh0);
        lo = lo + Math.imul(al6, bl1) | 0;
        mid = mid + Math.imul(al6, bh1) | 0;
        mid = mid + Math.imul(ah6, bl1) | 0;
        hi = hi + Math.imul(ah6, bh1) | 0;
        lo = lo + Math.imul(al5, bl2) | 0;
        mid = mid + Math.imul(al5, bh2) | 0;
        mid = mid + Math.imul(ah5, bl2) | 0;
        hi = hi + Math.imul(ah5, bh2) | 0;
        lo = lo + Math.imul(al4, bl3) | 0;
        mid = mid + Math.imul(al4, bh3) | 0;
        mid = mid + Math.imul(ah4, bl3) | 0;
        hi = hi + Math.imul(ah4, bh3) | 0;
        lo = lo + Math.imul(al3, bl4) | 0;
        mid = mid + Math.imul(al3, bh4) | 0;
        mid = mid + Math.imul(ah3, bl4) | 0;
        hi = hi + Math.imul(ah3, bh4) | 0;
        lo = lo + Math.imul(al2, bl5) | 0;
        mid = mid + Math.imul(al2, bh5) | 0;
        mid = mid + Math.imul(ah2, bl5) | 0;
        hi = hi + Math.imul(ah2, bh5) | 0;
        lo = lo + Math.imul(al1, bl6) | 0;
        mid = mid + Math.imul(al1, bh6) | 0;
        mid = mid + Math.imul(ah1, bl6) | 0;
        hi = hi + Math.imul(ah1, bh6) | 0;
        lo = lo + Math.imul(al0, bl7) | 0;
        mid = mid + Math.imul(al0, bh7) | 0;
        mid = mid + Math.imul(ah0, bl7) | 0;
        hi = hi + Math.imul(ah0, bh7) | 0;
        var w7 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w7 >>> 26) | 0;
        w7 &= 67108863;
        lo = Math.imul(al8, bl0);
        mid = Math.imul(al8, bh0);
        mid = mid + Math.imul(ah8, bl0) | 0;
        hi = Math.imul(ah8, bh0);
        lo = lo + Math.imul(al7, bl1) | 0;
        mid = mid + Math.imul(al7, bh1) | 0;
        mid = mid + Math.imul(ah7, bl1) | 0;
        hi = hi + Math.imul(ah7, bh1) | 0;
        lo = lo + Math.imul(al6, bl2) | 0;
        mid = mid + Math.imul(al6, bh2) | 0;
        mid = mid + Math.imul(ah6, bl2) | 0;
        hi = hi + Math.imul(ah6, bh2) | 0;
        lo = lo + Math.imul(al5, bl3) | 0;
        mid = mid + Math.imul(al5, bh3) | 0;
        mid = mid + Math.imul(ah5, bl3) | 0;
        hi = hi + Math.imul(ah5, bh3) | 0;
        lo = lo + Math.imul(al4, bl4) | 0;
        mid = mid + Math.imul(al4, bh4) | 0;
        mid = mid + Math.imul(ah4, bl4) | 0;
        hi = hi + Math.imul(ah4, bh4) | 0;
        lo = lo + Math.imul(al3, bl5) | 0;
        mid = mid + Math.imul(al3, bh5) | 0;
        mid = mid + Math.imul(ah3, bl5) | 0;
        hi = hi + Math.imul(ah3, bh5) | 0;
        lo = lo + Math.imul(al2, bl6) | 0;
        mid = mid + Math.imul(al2, bh6) | 0;
        mid = mid + Math.imul(ah2, bl6) | 0;
        hi = hi + Math.imul(ah2, bh6) | 0;
        lo = lo + Math.imul(al1, bl7) | 0;
        mid = mid + Math.imul(al1, bh7) | 0;
        mid = mid + Math.imul(ah1, bl7) | 0;
        hi = hi + Math.imul(ah1, bh7) | 0;
        lo = lo + Math.imul(al0, bl8) | 0;
        mid = mid + Math.imul(al0, bh8) | 0;
        mid = mid + Math.imul(ah0, bl8) | 0;
        hi = hi + Math.imul(ah0, bh8) | 0;
        var w8 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w8 >>> 26) | 0;
        w8 &= 67108863;
        lo = Math.imul(al9, bl0);
        mid = Math.imul(al9, bh0);
        mid = mid + Math.imul(ah9, bl0) | 0;
        hi = Math.imul(ah9, bh0);
        lo = lo + Math.imul(al8, bl1) | 0;
        mid = mid + Math.imul(al8, bh1) | 0;
        mid = mid + Math.imul(ah8, bl1) | 0;
        hi = hi + Math.imul(ah8, bh1) | 0;
        lo = lo + Math.imul(al7, bl2) | 0;
        mid = mid + Math.imul(al7, bh2) | 0;
        mid = mid + Math.imul(ah7, bl2) | 0;
        hi = hi + Math.imul(ah7, bh2) | 0;
        lo = lo + Math.imul(al6, bl3) | 0;
        mid = mid + Math.imul(al6, bh3) | 0;
        mid = mid + Math.imul(ah6, bl3) | 0;
        hi = hi + Math.imul(ah6, bh3) | 0;
        lo = lo + Math.imul(al5, bl4) | 0;
        mid = mid + Math.imul(al5, bh4) | 0;
        mid = mid + Math.imul(ah5, bl4) | 0;
        hi = hi + Math.imul(ah5, bh4) | 0;
        lo = lo + Math.imul(al4, bl5) | 0;
        mid = mid + Math.imul(al4, bh5) | 0;
        mid = mid + Math.imul(ah4, bl5) | 0;
        hi = hi + Math.imul(ah4, bh5) | 0;
        lo = lo + Math.imul(al3, bl6) | 0;
        mid = mid + Math.imul(al3, bh6) | 0;
        mid = mid + Math.imul(ah3, bl6) | 0;
        hi = hi + Math.imul(ah3, bh6) | 0;
        lo = lo + Math.imul(al2, bl7) | 0;
        mid = mid + Math.imul(al2, bh7) | 0;
        mid = mid + Math.imul(ah2, bl7) | 0;
        hi = hi + Math.imul(ah2, bh7) | 0;
        lo = lo + Math.imul(al1, bl8) | 0;
        mid = mid + Math.imul(al1, bh8) | 0;
        mid = mid + Math.imul(ah1, bl8) | 0;
        hi = hi + Math.imul(ah1, bh8) | 0;
        lo = lo + Math.imul(al0, bl9) | 0;
        mid = mid + Math.imul(al0, bh9) | 0;
        mid = mid + Math.imul(ah0, bl9) | 0;
        hi = hi + Math.imul(ah0, bh9) | 0;
        var w9 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w9 >>> 26) | 0;
        w9 &= 67108863;
        lo = Math.imul(al9, bl1);
        mid = Math.imul(al9, bh1);
        mid = mid + Math.imul(ah9, bl1) | 0;
        hi = Math.imul(ah9, bh1);
        lo = lo + Math.imul(al8, bl2) | 0;
        mid = mid + Math.imul(al8, bh2) | 0;
        mid = mid + Math.imul(ah8, bl2) | 0;
        hi = hi + Math.imul(ah8, bh2) | 0;
        lo = lo + Math.imul(al7, bl3) | 0;
        mid = mid + Math.imul(al7, bh3) | 0;
        mid = mid + Math.imul(ah7, bl3) | 0;
        hi = hi + Math.imul(ah7, bh3) | 0;
        lo = lo + Math.imul(al6, bl4) | 0;
        mid = mid + Math.imul(al6, bh4) | 0;
        mid = mid + Math.imul(ah6, bl4) | 0;
        hi = hi + Math.imul(ah6, bh4) | 0;
        lo = lo + Math.imul(al5, bl5) | 0;
        mid = mid + Math.imul(al5, bh5) | 0;
        mid = mid + Math.imul(ah5, bl5) | 0;
        hi = hi + Math.imul(ah5, bh5) | 0;
        lo = lo + Math.imul(al4, bl6) | 0;
        mid = mid + Math.imul(al4, bh6) | 0;
        mid = mid + Math.imul(ah4, bl6) | 0;
        hi = hi + Math.imul(ah4, bh6) | 0;
        lo = lo + Math.imul(al3, bl7) | 0;
        mid = mid + Math.imul(al3, bh7) | 0;
        mid = mid + Math.imul(ah3, bl7) | 0;
        hi = hi + Math.imul(ah3, bh7) | 0;
        lo = lo + Math.imul(al2, bl8) | 0;
        mid = mid + Math.imul(al2, bh8) | 0;
        mid = mid + Math.imul(ah2, bl8) | 0;
        hi = hi + Math.imul(ah2, bh8) | 0;
        lo = lo + Math.imul(al1, bl9) | 0;
        mid = mid + Math.imul(al1, bh9) | 0;
        mid = mid + Math.imul(ah1, bl9) | 0;
        hi = hi + Math.imul(ah1, bh9) | 0;
        var w10 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w10 >>> 26) | 0;
        w10 &= 67108863;
        lo = Math.imul(al9, bl2);
        mid = Math.imul(al9, bh2);
        mid = mid + Math.imul(ah9, bl2) | 0;
        hi = Math.imul(ah9, bh2);
        lo = lo + Math.imul(al8, bl3) | 0;
        mid = mid + Math.imul(al8, bh3) | 0;
        mid = mid + Math.imul(ah8, bl3) | 0;
        hi = hi + Math.imul(ah8, bh3) | 0;
        lo = lo + Math.imul(al7, bl4) | 0;
        mid = mid + Math.imul(al7, bh4) | 0;
        mid = mid + Math.imul(ah7, bl4) | 0;
        hi = hi + Math.imul(ah7, bh4) | 0;
        lo = lo + Math.imul(al6, bl5) | 0;
        mid = mid + Math.imul(al6, bh5) | 0;
        mid = mid + Math.imul(ah6, bl5) | 0;
        hi = hi + Math.imul(ah6, bh5) | 0;
        lo = lo + Math.imul(al5, bl6) | 0;
        mid = mid + Math.imul(al5, bh6) | 0;
        mid = mid + Math.imul(ah5, bl6) | 0;
        hi = hi + Math.imul(ah5, bh6) | 0;
        lo = lo + Math.imul(al4, bl7) | 0;
        mid = mid + Math.imul(al4, bh7) | 0;
        mid = mid + Math.imul(ah4, bl7) | 0;
        hi = hi + Math.imul(ah4, bh7) | 0;
        lo = lo + Math.imul(al3, bl8) | 0;
        mid = mid + Math.imul(al3, bh8) | 0;
        mid = mid + Math.imul(ah3, bl8) | 0;
        hi = hi + Math.imul(ah3, bh8) | 0;
        lo = lo + Math.imul(al2, bl9) | 0;
        mid = mid + Math.imul(al2, bh9) | 0;
        mid = mid + Math.imul(ah2, bl9) | 0;
        hi = hi + Math.imul(ah2, bh9) | 0;
        var w11 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w11 >>> 26) | 0;
        w11 &= 67108863;
        lo = Math.imul(al9, bl3);
        mid = Math.imul(al9, bh3);
        mid = mid + Math.imul(ah9, bl3) | 0;
        hi = Math.imul(ah9, bh3);
        lo = lo + Math.imul(al8, bl4) | 0;
        mid = mid + Math.imul(al8, bh4) | 0;
        mid = mid + Math.imul(ah8, bl4) | 0;
        hi = hi + Math.imul(ah8, bh4) | 0;
        lo = lo + Math.imul(al7, bl5) | 0;
        mid = mid + Math.imul(al7, bh5) | 0;
        mid = mid + Math.imul(ah7, bl5) | 0;
        hi = hi + Math.imul(ah7, bh5) | 0;
        lo = lo + Math.imul(al6, bl6) | 0;
        mid = mid + Math.imul(al6, bh6) | 0;
        mid = mid + Math.imul(ah6, bl6) | 0;
        hi = hi + Math.imul(ah6, bh6) | 0;
        lo = lo + Math.imul(al5, bl7) | 0;
        mid = mid + Math.imul(al5, bh7) | 0;
        mid = mid + Math.imul(ah5, bl7) | 0;
        hi = hi + Math.imul(ah5, bh7) | 0;
        lo = lo + Math.imul(al4, bl8) | 0;
        mid = mid + Math.imul(al4, bh8) | 0;
        mid = mid + Math.imul(ah4, bl8) | 0;
        hi = hi + Math.imul(ah4, bh8) | 0;
        lo = lo + Math.imul(al3, bl9) | 0;
        mid = mid + Math.imul(al3, bh9) | 0;
        mid = mid + Math.imul(ah3, bl9) | 0;
        hi = hi + Math.imul(ah3, bh9) | 0;
        var w12 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w12 >>> 26) | 0;
        w12 &= 67108863;
        lo = Math.imul(al9, bl4);
        mid = Math.imul(al9, bh4);
        mid = mid + Math.imul(ah9, bl4) | 0;
        hi = Math.imul(ah9, bh4);
        lo = lo + Math.imul(al8, bl5) | 0;
        mid = mid + Math.imul(al8, bh5) | 0;
        mid = mid + Math.imul(ah8, bl5) | 0;
        hi = hi + Math.imul(ah8, bh5) | 0;
        lo = lo + Math.imul(al7, bl6) | 0;
        mid = mid + Math.imul(al7, bh6) | 0;
        mid = mid + Math.imul(ah7, bl6) | 0;
        hi = hi + Math.imul(ah7, bh6) | 0;
        lo = lo + Math.imul(al6, bl7) | 0;
        mid = mid + Math.imul(al6, bh7) | 0;
        mid = mid + Math.imul(ah6, bl7) | 0;
        hi = hi + Math.imul(ah6, bh7) | 0;
        lo = lo + Math.imul(al5, bl8) | 0;
        mid = mid + Math.imul(al5, bh8) | 0;
        mid = mid + Math.imul(ah5, bl8) | 0;
        hi = hi + Math.imul(ah5, bh8) | 0;
        lo = lo + Math.imul(al4, bl9) | 0;
        mid = mid + Math.imul(al4, bh9) | 0;
        mid = mid + Math.imul(ah4, bl9) | 0;
        hi = hi + Math.imul(ah4, bh9) | 0;
        var w13 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w13 >>> 26) | 0;
        w13 &= 67108863;
        lo = Math.imul(al9, bl5);
        mid = Math.imul(al9, bh5);
        mid = mid + Math.imul(ah9, bl5) | 0;
        hi = Math.imul(ah9, bh5);
        lo = lo + Math.imul(al8, bl6) | 0;
        mid = mid + Math.imul(al8, bh6) | 0;
        mid = mid + Math.imul(ah8, bl6) | 0;
        hi = hi + Math.imul(ah8, bh6) | 0;
        lo = lo + Math.imul(al7, bl7) | 0;
        mid = mid + Math.imul(al7, bh7) | 0;
        mid = mid + Math.imul(ah7, bl7) | 0;
        hi = hi + Math.imul(ah7, bh7) | 0;
        lo = lo + Math.imul(al6, bl8) | 0;
        mid = mid + Math.imul(al6, bh8) | 0;
        mid = mid + Math.imul(ah6, bl8) | 0;
        hi = hi + Math.imul(ah6, bh8) | 0;
        lo = lo + Math.imul(al5, bl9) | 0;
        mid = mid + Math.imul(al5, bh9) | 0;
        mid = mid + Math.imul(ah5, bl9) | 0;
        hi = hi + Math.imul(ah5, bh9) | 0;
        var w14 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w14 >>> 26) | 0;
        w14 &= 67108863;
        lo = Math.imul(al9, bl6);
        mid = Math.imul(al9, bh6);
        mid = mid + Math.imul(ah9, bl6) | 0;
        hi = Math.imul(ah9, bh6);
        lo = lo + Math.imul(al8, bl7) | 0;
        mid = mid + Math.imul(al8, bh7) | 0;
        mid = mid + Math.imul(ah8, bl7) | 0;
        hi = hi + Math.imul(ah8, bh7) | 0;
        lo = lo + Math.imul(al7, bl8) | 0;
        mid = mid + Math.imul(al7, bh8) | 0;
        mid = mid + Math.imul(ah7, bl8) | 0;
        hi = hi + Math.imul(ah7, bh8) | 0;
        lo = lo + Math.imul(al6, bl9) | 0;
        mid = mid + Math.imul(al6, bh9) | 0;
        mid = mid + Math.imul(ah6, bl9) | 0;
        hi = hi + Math.imul(ah6, bh9) | 0;
        var w15 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w15 >>> 26) | 0;
        w15 &= 67108863;
        lo = Math.imul(al9, bl7);
        mid = Math.imul(al9, bh7);
        mid = mid + Math.imul(ah9, bl7) | 0;
        hi = Math.imul(ah9, bh7);
        lo = lo + Math.imul(al8, bl8) | 0;
        mid = mid + Math.imul(al8, bh8) | 0;
        mid = mid + Math.imul(ah8, bl8) | 0;
        hi = hi + Math.imul(ah8, bh8) | 0;
        lo = lo + Math.imul(al7, bl9) | 0;
        mid = mid + Math.imul(al7, bh9) | 0;
        mid = mid + Math.imul(ah7, bl9) | 0;
        hi = hi + Math.imul(ah7, bh9) | 0;
        var w16 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w16 >>> 26) | 0;
        w16 &= 67108863;
        lo = Math.imul(al9, bl8);
        mid = Math.imul(al9, bh8);
        mid = mid + Math.imul(ah9, bl8) | 0;
        hi = Math.imul(ah9, bh8);
        lo = lo + Math.imul(al8, bl9) | 0;
        mid = mid + Math.imul(al8, bh9) | 0;
        mid = mid + Math.imul(ah8, bl9) | 0;
        hi = hi + Math.imul(ah8, bh9) | 0;
        var w17 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w17 >>> 26) | 0;
        w17 &= 67108863;
        lo = Math.imul(al9, bl9);
        mid = Math.imul(al9, bh9);
        mid = mid + Math.imul(ah9, bl9) | 0;
        hi = Math.imul(ah9, bh9);
        var w18 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w18 >>> 26) | 0;
        w18 &= 67108863;
        o2[0] = w0;
        o2[1] = w1;
        o2[2] = w2;
        o2[3] = w3;
        o2[4] = w4;
        o2[5] = w5;
        o2[6] = w6;
        o2[7] = w7;
        o2[8] = w8;
        o2[9] = w9;
        o2[10] = w10;
        o2[11] = w11;
        o2[12] = w12;
        o2[13] = w13;
        o2[14] = w14;
        o2[15] = w15;
        o2[16] = w16;
        o2[17] = w17;
        o2[18] = w18;
        if (c !== 0) {
          o2[19] = c;
          out.length++;
        }
        return out;
      };
      if (!Math.imul) {
        comb10MulTo = smallMulTo;
      }
      function bigMulTo(self2, num, out) {
        out.negative = num.negative ^ self2.negative;
        out.length = self2.length + num.length;
        var carry = 0;
        var hncarry = 0;
        for (var k = 0; k < out.length - 1; k++) {
          var ncarry = hncarry;
          hncarry = 0;
          var rword = carry & 67108863;
          var maxJ = Math.min(k, num.length - 1);
          for (var j2 = Math.max(0, k - self2.length + 1); j2 <= maxJ; j2++) {
            var i = k - j2;
            var a = self2.words[i] | 0;
            var b = num.words[j2] | 0;
            var r = a * b;
            var lo = r & 67108863;
            ncarry = ncarry + (r / 67108864 | 0) | 0;
            lo = lo + rword | 0;
            rword = lo & 67108863;
            ncarry = ncarry + (lo >>> 26) | 0;
            hncarry += ncarry >>> 26;
            ncarry &= 67108863;
          }
          out.words[k] = rword;
          carry = ncarry;
          ncarry = hncarry;
        }
        if (carry !== 0) {
          out.words[k] = carry;
        } else {
          out.length--;
        }
        return out.strip();
      }
      function jumboMulTo(self2, num, out) {
        var fftm = new FFTM();
        return fftm.mulp(self2, num, out);
      }
      BN.prototype.mulTo = function mulTo(num, out) {
        var res;
        var len = this.length + num.length;
        if (this.length === 10 && num.length === 10) {
          res = comb10MulTo(this, num, out);
        } else if (len < 63) {
          res = smallMulTo(this, num, out);
        } else if (len < 1024) {
          res = bigMulTo(this, num, out);
        } else {
          res = jumboMulTo(this, num, out);
        }
        return res;
      };
      function FFTM(x, y) {
        this.x = x;
        this.y = y;
      }
      FFTM.prototype.makeRBT = function makeRBT(N) {
        var t = new Array(N);
        var l = BN.prototype._countBits(N) - 1;
        for (var i = 0; i < N; i++) {
          t[i] = this.revBin(i, l, N);
        }
        return t;
      };
      FFTM.prototype.revBin = function revBin(x, l, N) {
        if (x === 0 || x === N - 1)
          return x;
        var rb = 0;
        for (var i = 0; i < l; i++) {
          rb |= (x & 1) << l - i - 1;
          x >>= 1;
        }
        return rb;
      };
      FFTM.prototype.permute = function permute(rbt, rws, iws, rtws, itws, N) {
        for (var i = 0; i < N; i++) {
          rtws[i] = rws[rbt[i]];
          itws[i] = iws[rbt[i]];
        }
      };
      FFTM.prototype.transform = function transform(rws, iws, rtws, itws, N, rbt) {
        this.permute(rbt, rws, iws, rtws, itws, N);
        for (var s = 1; s < N; s <<= 1) {
          var l = s << 1;
          var rtwdf = Math.cos(2 * Math.PI / l);
          var itwdf = Math.sin(2 * Math.PI / l);
          for (var p2 = 0; p2 < N; p2 += l) {
            var rtwdf_ = rtwdf;
            var itwdf_ = itwdf;
            for (var j2 = 0; j2 < s; j2++) {
              var re2 = rtws[p2 + j2];
              var ie2 = itws[p2 + j2];
              var ro = rtws[p2 + j2 + s];
              var io = itws[p2 + j2 + s];
              var rx = rtwdf_ * ro - itwdf_ * io;
              io = rtwdf_ * io + itwdf_ * ro;
              ro = rx;
              rtws[p2 + j2] = re2 + ro;
              itws[p2 + j2] = ie2 + io;
              rtws[p2 + j2 + s] = re2 - ro;
              itws[p2 + j2 + s] = ie2 - io;
              if (j2 !== l) {
                rx = rtwdf * rtwdf_ - itwdf * itwdf_;
                itwdf_ = rtwdf * itwdf_ + itwdf * rtwdf_;
                rtwdf_ = rx;
              }
            }
          }
        }
      };
      FFTM.prototype.guessLen13b = function guessLen13b(n, m) {
        var N = Math.max(m, n) | 1;
        var odd = N & 1;
        var i = 0;
        for (N = N / 2 | 0; N; N = N >>> 1) {
          i++;
        }
        return 1 << i + 1 + odd;
      };
      FFTM.prototype.conjugate = function conjugate(rws, iws, N) {
        if (N <= 1)
          return;
        for (var i = 0; i < N / 2; i++) {
          var t = rws[i];
          rws[i] = rws[N - i - 1];
          rws[N - i - 1] = t;
          t = iws[i];
          iws[i] = -iws[N - i - 1];
          iws[N - i - 1] = -t;
        }
      };
      FFTM.prototype.normalize13b = function normalize13b(ws, N) {
        var carry = 0;
        for (var i = 0; i < N / 2; i++) {
          var w = Math.round(ws[2 * i + 1] / N) * 8192 + Math.round(ws[2 * i] / N) + carry;
          ws[i] = w & 67108863;
          if (w < 67108864) {
            carry = 0;
          } else {
            carry = w / 67108864 | 0;
          }
        }
        return ws;
      };
      FFTM.prototype.convert13b = function convert13b(ws, len, rws, N) {
        var carry = 0;
        for (var i = 0; i < len; i++) {
          carry = carry + (ws[i] | 0);
          rws[2 * i] = carry & 8191;
          carry = carry >>> 13;
          rws[2 * i + 1] = carry & 8191;
          carry = carry >>> 13;
        }
        for (i = 2 * len; i < N; ++i) {
          rws[i] = 0;
        }
        assert(carry === 0);
        assert((carry & ~8191) === 0);
      };
      FFTM.prototype.stub = function stub(N) {
        var ph = new Array(N);
        for (var i = 0; i < N; i++) {
          ph[i] = 0;
        }
        return ph;
      };
      FFTM.prototype.mulp = function mulp(x, y, out) {
        var N = 2 * this.guessLen13b(x.length, y.length);
        var rbt = this.makeRBT(N);
        var _ = this.stub(N);
        var rws = new Array(N);
        var rwst = new Array(N);
        var iwst = new Array(N);
        var nrws = new Array(N);
        var nrwst = new Array(N);
        var niwst = new Array(N);
        var rmws = out.words;
        rmws.length = N;
        this.convert13b(x.words, x.length, rws, N);
        this.convert13b(y.words, y.length, nrws, N);
        this.transform(rws, _, rwst, iwst, N, rbt);
        this.transform(nrws, _, nrwst, niwst, N, rbt);
        for (var i = 0; i < N; i++) {
          var rx = rwst[i] * nrwst[i] - iwst[i] * niwst[i];
          iwst[i] = rwst[i] * niwst[i] + iwst[i] * nrwst[i];
          rwst[i] = rx;
        }
        this.conjugate(rwst, iwst, N);
        this.transform(rwst, iwst, rmws, _, N, rbt);
        this.conjugate(rmws, _, N);
        this.normalize13b(rmws, N);
        out.negative = x.negative ^ y.negative;
        out.length = x.length + y.length;
        return out.strip();
      };
      BN.prototype.mul = function mul(num) {
        var out = new BN(null);
        out.words = new Array(this.length + num.length);
        return this.mulTo(num, out);
      };
      BN.prototype.mulf = function mulf(num) {
        var out = new BN(null);
        out.words = new Array(this.length + num.length);
        return jumboMulTo(this, num, out);
      };
      BN.prototype.imul = function imul(num) {
        return this.clone().mulTo(num, this);
      };
      BN.prototype.imuln = function imuln(num) {
        assert(typeof num === "number");
        assert(num < 67108864);
        var carry = 0;
        for (var i = 0; i < this.length; i++) {
          var w = (this.words[i] | 0) * num;
          var lo = (w & 67108863) + (carry & 67108863);
          carry >>= 26;
          carry += w / 67108864 | 0;
          carry += lo >>> 26;
          this.words[i] = lo & 67108863;
        }
        if (carry !== 0) {
          this.words[i] = carry;
          this.length++;
        }
        return this;
      };
      BN.prototype.muln = function muln(num) {
        return this.clone().imuln(num);
      };
      BN.prototype.sqr = function sqr() {
        return this.mul(this);
      };
      BN.prototype.isqr = function isqr() {
        return this.imul(this.clone());
      };
      BN.prototype.pow = function pow(num) {
        var w = toBitArray(num);
        if (w.length === 0)
          return new BN(1);
        var res = this;
        for (var i = 0; i < w.length; i++, res = res.sqr()) {
          if (w[i] !== 0)
            break;
        }
        if (++i < w.length) {
          for (var q2 = res.sqr(); i < w.length; i++, q2 = q2.sqr()) {
            if (w[i] === 0)
              continue;
            res = res.mul(q2);
          }
        }
        return res;
      };
      BN.prototype.iushln = function iushln(bits) {
        assert(typeof bits === "number" && bits >= 0);
        var r = bits % 26;
        var s = (bits - r) / 26;
        var carryMask = 67108863 >>> 26 - r << 26 - r;
        var i;
        if (r !== 0) {
          var carry = 0;
          for (i = 0; i < this.length; i++) {
            var newCarry = this.words[i] & carryMask;
            var c = (this.words[i] | 0) - newCarry << r;
            this.words[i] = c | carry;
            carry = newCarry >>> 26 - r;
          }
          if (carry) {
            this.words[i] = carry;
            this.length++;
          }
        }
        if (s !== 0) {
          for (i = this.length - 1; i >= 0; i--) {
            this.words[i + s] = this.words[i];
          }
          for (i = 0; i < s; i++) {
            this.words[i] = 0;
          }
          this.length += s;
        }
        return this.strip();
      };
      BN.prototype.ishln = function ishln(bits) {
        assert(this.negative === 0);
        return this.iushln(bits);
      };
      BN.prototype.iushrn = function iushrn(bits, hint, extended) {
        assert(typeof bits === "number" && bits >= 0);
        var h;
        if (hint) {
          h = (hint - hint % 26) / 26;
        } else {
          h = 0;
        }
        var r = bits % 26;
        var s = Math.min((bits - r) / 26, this.length);
        var mask = 67108863 ^ 67108863 >>> r << r;
        var maskedWords = extended;
        h -= s;
        h = Math.max(0, h);
        if (maskedWords) {
          for (var i = 0; i < s; i++) {
            maskedWords.words[i] = this.words[i];
          }
          maskedWords.length = s;
        }
        if (s === 0) {
        } else if (this.length > s) {
          this.length -= s;
          for (i = 0; i < this.length; i++) {
            this.words[i] = this.words[i + s];
          }
        } else {
          this.words[0] = 0;
          this.length = 1;
        }
        var carry = 0;
        for (i = this.length - 1; i >= 0 && (carry !== 0 || i >= h); i--) {
          var word = this.words[i] | 0;
          this.words[i] = carry << 26 - r | word >>> r;
          carry = word & mask;
        }
        if (maskedWords && carry !== 0) {
          maskedWords.words[maskedWords.length++] = carry;
        }
        if (this.length === 0) {
          this.words[0] = 0;
          this.length = 1;
        }
        return this.strip();
      };
      BN.prototype.ishrn = function ishrn(bits, hint, extended) {
        assert(this.negative === 0);
        return this.iushrn(bits, hint, extended);
      };
      BN.prototype.shln = function shln(bits) {
        return this.clone().ishln(bits);
      };
      BN.prototype.ushln = function ushln(bits) {
        return this.clone().iushln(bits);
      };
      BN.prototype.shrn = function shrn(bits) {
        return this.clone().ishrn(bits);
      };
      BN.prototype.ushrn = function ushrn(bits) {
        return this.clone().iushrn(bits);
      };
      BN.prototype.testn = function testn(bit) {
        assert(typeof bit === "number" && bit >= 0);
        var r = bit % 26;
        var s = (bit - r) / 26;
        var q2 = 1 << r;
        if (this.length <= s)
          return false;
        var w = this.words[s];
        return !!(w & q2);
      };
      BN.prototype.imaskn = function imaskn(bits) {
        assert(typeof bits === "number" && bits >= 0);
        var r = bits % 26;
        var s = (bits - r) / 26;
        assert(this.negative === 0, "imaskn works only with positive numbers");
        if (this.length <= s) {
          return this;
        }
        if (r !== 0) {
          s++;
        }
        this.length = Math.min(s, this.length);
        if (r !== 0) {
          var mask = 67108863 ^ 67108863 >>> r << r;
          this.words[this.length - 1] &= mask;
        }
        return this.strip();
      };
      BN.prototype.maskn = function maskn(bits) {
        return this.clone().imaskn(bits);
      };
      BN.prototype.iaddn = function iaddn(num) {
        assert(typeof num === "number");
        assert(num < 67108864);
        if (num < 0)
          return this.isubn(-num);
        if (this.negative !== 0) {
          if (this.length === 1 && (this.words[0] | 0) < num) {
            this.words[0] = num - (this.words[0] | 0);
            this.negative = 0;
            return this;
          }
          this.negative = 0;
          this.isubn(num);
          this.negative = 1;
          return this;
        }
        return this._iaddn(num);
      };
      BN.prototype._iaddn = function _iaddn(num) {
        this.words[0] += num;
        for (var i = 0; i < this.length && this.words[i] >= 67108864; i++) {
          this.words[i] -= 67108864;
          if (i === this.length - 1) {
            this.words[i + 1] = 1;
          } else {
            this.words[i + 1]++;
          }
        }
        this.length = Math.max(this.length, i + 1);
        return this;
      };
      BN.prototype.isubn = function isubn(num) {
        assert(typeof num === "number");
        assert(num < 67108864);
        if (num < 0)
          return this.iaddn(-num);
        if (this.negative !== 0) {
          this.negative = 0;
          this.iaddn(num);
          this.negative = 1;
          return this;
        }
        this.words[0] -= num;
        if (this.length === 1 && this.words[0] < 0) {
          this.words[0] = -this.words[0];
          this.negative = 1;
        } else {
          for (var i = 0; i < this.length && this.words[i] < 0; i++) {
            this.words[i] += 67108864;
            this.words[i + 1] -= 1;
          }
        }
        return this.strip();
      };
      BN.prototype.addn = function addn(num) {
        return this.clone().iaddn(num);
      };
      BN.prototype.subn = function subn(num) {
        return this.clone().isubn(num);
      };
      BN.prototype.iabs = function iabs() {
        this.negative = 0;
        return this;
      };
      BN.prototype.abs = function abs() {
        return this.clone().iabs();
      };
      BN.prototype._ishlnsubmul = function _ishlnsubmul(num, mul, shift) {
        var len = num.length + shift;
        var i;
        this._expand(len);
        var w;
        var carry = 0;
        for (i = 0; i < num.length; i++) {
          w = (this.words[i + shift] | 0) + carry;
          var right = (num.words[i] | 0) * mul;
          w -= right & 67108863;
          carry = (w >> 26) - (right / 67108864 | 0);
          this.words[i + shift] = w & 67108863;
        }
        for (; i < this.length - shift; i++) {
          w = (this.words[i + shift] | 0) + carry;
          carry = w >> 26;
          this.words[i + shift] = w & 67108863;
        }
        if (carry === 0)
          return this.strip();
        assert(carry === -1);
        carry = 0;
        for (i = 0; i < this.length; i++) {
          w = -(this.words[i] | 0) + carry;
          carry = w >> 26;
          this.words[i] = w & 67108863;
        }
        this.negative = 1;
        return this.strip();
      };
      BN.prototype._wordDiv = function _wordDiv(num, mode) {
        var shift = this.length - num.length;
        var a = this.clone();
        var b = num;
        var bhi = b.words[b.length - 1] | 0;
        var bhiBits = this._countBits(bhi);
        shift = 26 - bhiBits;
        if (shift !== 0) {
          b = b.ushln(shift);
          a.iushln(shift);
          bhi = b.words[b.length - 1] | 0;
        }
        var m = a.length - b.length;
        var q2;
        if (mode !== "mod") {
          q2 = new BN(null);
          q2.length = m + 1;
          q2.words = new Array(q2.length);
          for (var i = 0; i < q2.length; i++) {
            q2.words[i] = 0;
          }
        }
        var diff = a.clone()._ishlnsubmul(b, 1, m);
        if (diff.negative === 0) {
          a = diff;
          if (q2) {
            q2.words[m] = 1;
          }
        }
        for (var j2 = m - 1; j2 >= 0; j2--) {
          var qj = (a.words[b.length + j2] | 0) * 67108864 + (a.words[b.length + j2 - 1] | 0);
          qj = Math.min(qj / bhi | 0, 67108863);
          a._ishlnsubmul(b, qj, j2);
          while (a.negative !== 0) {
            qj--;
            a.negative = 0;
            a._ishlnsubmul(b, 1, j2);
            if (!a.isZero()) {
              a.negative ^= 1;
            }
          }
          if (q2) {
            q2.words[j2] = qj;
          }
        }
        if (q2) {
          q2.strip();
        }
        a.strip();
        if (mode !== "div" && shift !== 0) {
          a.iushrn(shift);
        }
        return {
          div: q2 || null,
          mod: a
        };
      };
      BN.prototype.divmod = function divmod(num, mode, positive) {
        assert(!num.isZero());
        if (this.isZero()) {
          return {
            div: new BN(0),
            mod: new BN(0)
          };
        }
        var div, mod, res;
        if (this.negative !== 0 && num.negative === 0) {
          res = this.neg().divmod(num, mode);
          if (mode !== "mod") {
            div = res.div.neg();
          }
          if (mode !== "div") {
            mod = res.mod.neg();
            if (positive && mod.negative !== 0) {
              mod.iadd(num);
            }
          }
          return {
            div,
            mod
          };
        }
        if (this.negative === 0 && num.negative !== 0) {
          res = this.divmod(num.neg(), mode);
          if (mode !== "mod") {
            div = res.div.neg();
          }
          return {
            div,
            mod: res.mod
          };
        }
        if ((this.negative & num.negative) !== 0) {
          res = this.neg().divmod(num.neg(), mode);
          if (mode !== "div") {
            mod = res.mod.neg();
            if (positive && mod.negative !== 0) {
              mod.isub(num);
            }
          }
          return {
            div: res.div,
            mod
          };
        }
        if (num.length > this.length || this.cmp(num) < 0) {
          return {
            div: new BN(0),
            mod: this
          };
        }
        if (num.length === 1) {
          if (mode === "div") {
            return {
              div: this.divn(num.words[0]),
              mod: null
            };
          }
          if (mode === "mod") {
            return {
              div: null,
              mod: new BN(this.modn(num.words[0]))
            };
          }
          return {
            div: this.divn(num.words[0]),
            mod: new BN(this.modn(num.words[0]))
          };
        }
        return this._wordDiv(num, mode);
      };
      BN.prototype.div = function div(num) {
        return this.divmod(num, "div", false).div;
      };
      BN.prototype.mod = function mod(num) {
        return this.divmod(num, "mod", false).mod;
      };
      BN.prototype.umod = function umod(num) {
        return this.divmod(num, "mod", true).mod;
      };
      BN.prototype.divRound = function divRound(num) {
        var dm = this.divmod(num);
        if (dm.mod.isZero())
          return dm.div;
        var mod = dm.div.negative !== 0 ? dm.mod.isub(num) : dm.mod;
        var half = num.ushrn(1);
        var r2 = num.andln(1);
        var cmp = mod.cmp(half);
        if (cmp < 0 || r2 === 1 && cmp === 0)
          return dm.div;
        return dm.div.negative !== 0 ? dm.div.isubn(1) : dm.div.iaddn(1);
      };
      BN.prototype.modn = function modn(num) {
        assert(num <= 67108863);
        var p2 = (1 << 26) % num;
        var acc = 0;
        for (var i = this.length - 1; i >= 0; i--) {
          acc = (p2 * acc + (this.words[i] | 0)) % num;
        }
        return acc;
      };
      BN.prototype.idivn = function idivn(num) {
        assert(num <= 67108863);
        var carry = 0;
        for (var i = this.length - 1; i >= 0; i--) {
          var w = (this.words[i] | 0) + carry * 67108864;
          this.words[i] = w / num | 0;
          carry = w % num;
        }
        return this.strip();
      };
      BN.prototype.divn = function divn(num) {
        return this.clone().idivn(num);
      };
      BN.prototype.egcd = function egcd(p2) {
        assert(p2.negative === 0);
        assert(!p2.isZero());
        var x = this;
        var y = p2.clone();
        if (x.negative !== 0) {
          x = x.umod(p2);
        } else {
          x = x.clone();
        }
        var A = new BN(1);
        var B = new BN(0);
        var C = new BN(0);
        var D2 = new BN(1);
        var g = 0;
        while (x.isEven() && y.isEven()) {
          x.iushrn(1);
          y.iushrn(1);
          ++g;
        }
        var yp = y.clone();
        var xp = x.clone();
        while (!x.isZero()) {
          for (var i = 0, im = 1; (x.words[0] & im) === 0 && i < 26; ++i, im <<= 1)
            ;
          if (i > 0) {
            x.iushrn(i);
            while (i-- > 0) {
              if (A.isOdd() || B.isOdd()) {
                A.iadd(yp);
                B.isub(xp);
              }
              A.iushrn(1);
              B.iushrn(1);
            }
          }
          for (var j2 = 0, jm = 1; (y.words[0] & jm) === 0 && j2 < 26; ++j2, jm <<= 1)
            ;
          if (j2 > 0) {
            y.iushrn(j2);
            while (j2-- > 0) {
              if (C.isOdd() || D2.isOdd()) {
                C.iadd(yp);
                D2.isub(xp);
              }
              C.iushrn(1);
              D2.iushrn(1);
            }
          }
          if (x.cmp(y) >= 0) {
            x.isub(y);
            A.isub(C);
            B.isub(D2);
          } else {
            y.isub(x);
            C.isub(A);
            D2.isub(B);
          }
        }
        return {
          a: C,
          b: D2,
          gcd: y.iushln(g)
        };
      };
      BN.prototype._invmp = function _invmp(p2) {
        assert(p2.negative === 0);
        assert(!p2.isZero());
        var a = this;
        var b = p2.clone();
        if (a.negative !== 0) {
          a = a.umod(p2);
        } else {
          a = a.clone();
        }
        var x1 = new BN(1);
        var x2 = new BN(0);
        var delta = b.clone();
        while (a.cmpn(1) > 0 && b.cmpn(1) > 0) {
          for (var i = 0, im = 1; (a.words[0] & im) === 0 && i < 26; ++i, im <<= 1)
            ;
          if (i > 0) {
            a.iushrn(i);
            while (i-- > 0) {
              if (x1.isOdd()) {
                x1.iadd(delta);
              }
              x1.iushrn(1);
            }
          }
          for (var j2 = 0, jm = 1; (b.words[0] & jm) === 0 && j2 < 26; ++j2, jm <<= 1)
            ;
          if (j2 > 0) {
            b.iushrn(j2);
            while (j2-- > 0) {
              if (x2.isOdd()) {
                x2.iadd(delta);
              }
              x2.iushrn(1);
            }
          }
          if (a.cmp(b) >= 0) {
            a.isub(b);
            x1.isub(x2);
          } else {
            b.isub(a);
            x2.isub(x1);
          }
        }
        var res;
        if (a.cmpn(1) === 0) {
          res = x1;
        } else {
          res = x2;
        }
        if (res.cmpn(0) < 0) {
          res.iadd(p2);
        }
        return res;
      };
      BN.prototype.gcd = function gcd(num) {
        if (this.isZero())
          return num.abs();
        if (num.isZero())
          return this.abs();
        var a = this.clone();
        var b = num.clone();
        a.negative = 0;
        b.negative = 0;
        for (var shift = 0; a.isEven() && b.isEven(); shift++) {
          a.iushrn(1);
          b.iushrn(1);
        }
        do {
          while (a.isEven()) {
            a.iushrn(1);
          }
          while (b.isEven()) {
            b.iushrn(1);
          }
          var r = a.cmp(b);
          if (r < 0) {
            var t = a;
            a = b;
            b = t;
          } else if (r === 0 || b.cmpn(1) === 0) {
            break;
          }
          a.isub(b);
        } while (true);
        return b.iushln(shift);
      };
      BN.prototype.invm = function invm(num) {
        return this.egcd(num).a.umod(num);
      };
      BN.prototype.isEven = function isEven() {
        return (this.words[0] & 1) === 0;
      };
      BN.prototype.isOdd = function isOdd() {
        return (this.words[0] & 1) === 1;
      };
      BN.prototype.andln = function andln(num) {
        return this.words[0] & num;
      };
      BN.prototype.bincn = function bincn(bit) {
        assert(typeof bit === "number");
        var r = bit % 26;
        var s = (bit - r) / 26;
        var q2 = 1 << r;
        if (this.length <= s) {
          this._expand(s + 1);
          this.words[s] |= q2;
          return this;
        }
        var carry = q2;
        for (var i = s; carry !== 0 && i < this.length; i++) {
          var w = this.words[i] | 0;
          w += carry;
          carry = w >>> 26;
          w &= 67108863;
          this.words[i] = w;
        }
        if (carry !== 0) {
          this.words[i] = carry;
          this.length++;
        }
        return this;
      };
      BN.prototype.isZero = function isZero() {
        return this.length === 1 && this.words[0] === 0;
      };
      BN.prototype.cmpn = function cmpn(num) {
        var negative = num < 0;
        if (this.negative !== 0 && !negative)
          return -1;
        if (this.negative === 0 && negative)
          return 1;
        this.strip();
        var res;
        if (this.length > 1) {
          res = 1;
        } else {
          if (negative) {
            num = -num;
          }
          assert(num <= 67108863, "Number is too big");
          var w = this.words[0] | 0;
          res = w === num ? 0 : w < num ? -1 : 1;
        }
        if (this.negative !== 0)
          return -res | 0;
        return res;
      };
      BN.prototype.cmp = function cmp(num) {
        if (this.negative !== 0 && num.negative === 0)
          return -1;
        if (this.negative === 0 && num.negative !== 0)
          return 1;
        var res = this.ucmp(num);
        if (this.negative !== 0)
          return -res | 0;
        return res;
      };
      BN.prototype.ucmp = function ucmp(num) {
        if (this.length > num.length)
          return 1;
        if (this.length < num.length)
          return -1;
        var res = 0;
        for (var i = this.length - 1; i >= 0; i--) {
          var a = this.words[i] | 0;
          var b = num.words[i] | 0;
          if (a === b)
            continue;
          if (a < b) {
            res = -1;
          } else if (a > b) {
            res = 1;
          }
          break;
        }
        return res;
      };
      BN.prototype.gtn = function gtn(num) {
        return this.cmpn(num) === 1;
      };
      BN.prototype.gt = function gt(num) {
        return this.cmp(num) === 1;
      };
      BN.prototype.gten = function gten(num) {
        return this.cmpn(num) >= 0;
      };
      BN.prototype.gte = function gte(num) {
        return this.cmp(num) >= 0;
      };
      BN.prototype.ltn = function ltn(num) {
        return this.cmpn(num) === -1;
      };
      BN.prototype.lt = function lt(num) {
        return this.cmp(num) === -1;
      };
      BN.prototype.lten = function lten(num) {
        return this.cmpn(num) <= 0;
      };
      BN.prototype.lte = function lte(num) {
        return this.cmp(num) <= 0;
      };
      BN.prototype.eqn = function eqn(num) {
        return this.cmpn(num) === 0;
      };
      BN.prototype.eq = function eq(num) {
        return this.cmp(num) === 0;
      };
      BN.red = function red(num) {
        return new Red(num);
      };
      BN.prototype.toRed = function toRed(ctx) {
        assert(!this.red, "Already a number in reduction context");
        assert(this.negative === 0, "red works only with positives");
        return ctx.convertTo(this)._forceRed(ctx);
      };
      BN.prototype.fromRed = function fromRed() {
        assert(this.red, "fromRed works only with numbers in reduction context");
        return this.red.convertFrom(this);
      };
      BN.prototype._forceRed = function _forceRed(ctx) {
        this.red = ctx;
        return this;
      };
      BN.prototype.forceRed = function forceRed(ctx) {
        assert(!this.red, "Already a number in reduction context");
        return this._forceRed(ctx);
      };
      BN.prototype.redAdd = function redAdd(num) {
        assert(this.red, "redAdd works only with red numbers");
        return this.red.add(this, num);
      };
      BN.prototype.redIAdd = function redIAdd(num) {
        assert(this.red, "redIAdd works only with red numbers");
        return this.red.iadd(this, num);
      };
      BN.prototype.redSub = function redSub(num) {
        assert(this.red, "redSub works only with red numbers");
        return this.red.sub(this, num);
      };
      BN.prototype.redISub = function redISub(num) {
        assert(this.red, "redISub works only with red numbers");
        return this.red.isub(this, num);
      };
      BN.prototype.redShl = function redShl(num) {
        assert(this.red, "redShl works only with red numbers");
        return this.red.shl(this, num);
      };
      BN.prototype.redMul = function redMul(num) {
        assert(this.red, "redMul works only with red numbers");
        this.red._verify2(this, num);
        return this.red.mul(this, num);
      };
      BN.prototype.redIMul = function redIMul(num) {
        assert(this.red, "redMul works only with red numbers");
        this.red._verify2(this, num);
        return this.red.imul(this, num);
      };
      BN.prototype.redSqr = function redSqr() {
        assert(this.red, "redSqr works only with red numbers");
        this.red._verify1(this);
        return this.red.sqr(this);
      };
      BN.prototype.redISqr = function redISqr() {
        assert(this.red, "redISqr works only with red numbers");
        this.red._verify1(this);
        return this.red.isqr(this);
      };
      BN.prototype.redSqrt = function redSqrt() {
        assert(this.red, "redSqrt works only with red numbers");
        this.red._verify1(this);
        return this.red.sqrt(this);
      };
      BN.prototype.redInvm = function redInvm() {
        assert(this.red, "redInvm works only with red numbers");
        this.red._verify1(this);
        return this.red.invm(this);
      };
      BN.prototype.redNeg = function redNeg() {
        assert(this.red, "redNeg works only with red numbers");
        this.red._verify1(this);
        return this.red.neg(this);
      };
      BN.prototype.redPow = function redPow(num) {
        assert(this.red && !num.red, "redPow(normalNum)");
        this.red._verify1(this);
        return this.red.pow(this, num);
      };
      var primes = {
        k256: null,
        p224: null,
        p192: null,
        p25519: null
      };
      function MPrime(name, p2) {
        this.name = name;
        this.p = new BN(p2, 16);
        this.n = this.p.bitLength();
        this.k = new BN(1).iushln(this.n).isub(this.p);
        this.tmp = this._tmp();
      }
      MPrime.prototype._tmp = function _tmp() {
        var tmp = new BN(null);
        tmp.words = new Array(Math.ceil(this.n / 13));
        return tmp;
      };
      MPrime.prototype.ireduce = function ireduce(num) {
        var r = num;
        var rlen;
        do {
          this.split(r, this.tmp);
          r = this.imulK(r);
          r = r.iadd(this.tmp);
          rlen = r.bitLength();
        } while (rlen > this.n);
        var cmp = rlen < this.n ? -1 : r.ucmp(this.p);
        if (cmp === 0) {
          r.words[0] = 0;
          r.length = 1;
        } else if (cmp > 0) {
          r.isub(this.p);
        } else {
          r.strip();
        }
        return r;
      };
      MPrime.prototype.split = function split(input, out) {
        input.iushrn(this.n, 0, out);
      };
      MPrime.prototype.imulK = function imulK(num) {
        return num.imul(this.k);
      };
      function K256() {
        MPrime.call(
          this,
          "k256",
          "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f"
        );
      }
      inherits(K256, MPrime);
      K256.prototype.split = function split(input, output) {
        var mask = 4194303;
        var outLen = Math.min(input.length, 9);
        for (var i = 0; i < outLen; i++) {
          output.words[i] = input.words[i];
        }
        output.length = outLen;
        if (input.length <= 9) {
          input.words[0] = 0;
          input.length = 1;
          return;
        }
        var prev = input.words[9];
        output.words[output.length++] = prev & mask;
        for (i = 10; i < input.length; i++) {
          var next = input.words[i] | 0;
          input.words[i - 10] = (next & mask) << 4 | prev >>> 22;
          prev = next;
        }
        prev >>>= 22;
        input.words[i - 10] = prev;
        if (prev === 0 && input.length > 10) {
          input.length -= 10;
        } else {
          input.length -= 9;
        }
      };
      K256.prototype.imulK = function imulK(num) {
        num.words[num.length] = 0;
        num.words[num.length + 1] = 0;
        num.length += 2;
        var lo = 0;
        for (var i = 0; i < num.length; i++) {
          var w = num.words[i] | 0;
          lo += w * 977;
          num.words[i] = lo & 67108863;
          lo = w * 64 + (lo / 67108864 | 0);
        }
        if (num.words[num.length - 1] === 0) {
          num.length--;
          if (num.words[num.length - 1] === 0) {
            num.length--;
          }
        }
        return num;
      };
      function P224() {
        MPrime.call(
          this,
          "p224",
          "ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001"
        );
      }
      inherits(P224, MPrime);
      function P192() {
        MPrime.call(
          this,
          "p192",
          "ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff"
        );
      }
      inherits(P192, MPrime);
      function P25519() {
        MPrime.call(
          this,
          "25519",
          "7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed"
        );
      }
      inherits(P25519, MPrime);
      P25519.prototype.imulK = function imulK(num) {
        var carry = 0;
        for (var i = 0; i < num.length; i++) {
          var hi = (num.words[i] | 0) * 19 + carry;
          var lo = hi & 67108863;
          hi >>>= 26;
          num.words[i] = lo;
          carry = hi;
        }
        if (carry !== 0) {
          num.words[num.length++] = carry;
        }
        return num;
      };
      BN._prime = function prime(name) {
        if (primes[name])
          return primes[name];
        var prime2;
        if (name === "k256") {
          prime2 = new K256();
        } else if (name === "p224") {
          prime2 = new P224();
        } else if (name === "p192") {
          prime2 = new P192();
        } else if (name === "p25519") {
          prime2 = new P25519();
        } else {
          throw new Error("Unknown prime " + name);
        }
        primes[name] = prime2;
        return prime2;
      };
      function Red(m) {
        if (typeof m === "string") {
          var prime = BN._prime(m);
          this.m = prime.p;
          this.prime = prime;
        } else {
          assert(m.gtn(1), "modulus must be greater than 1");
          this.m = m;
          this.prime = null;
        }
      }
      Red.prototype._verify1 = function _verify1(a) {
        assert(a.negative === 0, "red works only with positives");
        assert(a.red, "red works only with red numbers");
      };
      Red.prototype._verify2 = function _verify2(a, b) {
        assert((a.negative | b.negative) === 0, "red works only with positives");
        assert(
          a.red && a.red === b.red,
          "red works only with red numbers"
        );
      };
      Red.prototype.imod = function imod(a) {
        if (this.prime)
          return this.prime.ireduce(a)._forceRed(this);
        return a.umod(this.m)._forceRed(this);
      };
      Red.prototype.neg = function neg(a) {
        if (a.isZero()) {
          return a.clone();
        }
        return this.m.sub(a)._forceRed(this);
      };
      Red.prototype.add = function add(a, b) {
        this._verify2(a, b);
        var res = a.add(b);
        if (res.cmp(this.m) >= 0) {
          res.isub(this.m);
        }
        return res._forceRed(this);
      };
      Red.prototype.iadd = function iadd(a, b) {
        this._verify2(a, b);
        var res = a.iadd(b);
        if (res.cmp(this.m) >= 0) {
          res.isub(this.m);
        }
        return res;
      };
      Red.prototype.sub = function sub(a, b) {
        this._verify2(a, b);
        var res = a.sub(b);
        if (res.cmpn(0) < 0) {
          res.iadd(this.m);
        }
        return res._forceRed(this);
      };
      Red.prototype.isub = function isub(a, b) {
        this._verify2(a, b);
        var res = a.isub(b);
        if (res.cmpn(0) < 0) {
          res.iadd(this.m);
        }
        return res;
      };
      Red.prototype.shl = function shl(a, num) {
        this._verify1(a);
        return this.imod(a.ushln(num));
      };
      Red.prototype.imul = function imul(a, b) {
        this._verify2(a, b);
        return this.imod(a.imul(b));
      };
      Red.prototype.mul = function mul(a, b) {
        this._verify2(a, b);
        return this.imod(a.mul(b));
      };
      Red.prototype.isqr = function isqr(a) {
        return this.imul(a, a.clone());
      };
      Red.prototype.sqr = function sqr(a) {
        return this.mul(a, a);
      };
      Red.prototype.sqrt = function sqrt(a) {
        if (a.isZero())
          return a.clone();
        var mod3 = this.m.andln(3);
        assert(mod3 % 2 === 1);
        if (mod3 === 3) {
          var pow = this.m.add(new BN(1)).iushrn(2);
          return this.pow(a, pow);
        }
        var q2 = this.m.subn(1);
        var s = 0;
        while (!q2.isZero() && q2.andln(1) === 0) {
          s++;
          q2.iushrn(1);
        }
        assert(!q2.isZero());
        var one = new BN(1).toRed(this);
        var nOne = one.redNeg();
        var lpow = this.m.subn(1).iushrn(1);
        var z2 = this.m.bitLength();
        z2 = new BN(2 * z2 * z2).toRed(this);
        while (this.pow(z2, lpow).cmp(nOne) !== 0) {
          z2.redIAdd(nOne);
        }
        var c = this.pow(z2, q2);
        var r = this.pow(a, q2.addn(1).iushrn(1));
        var t = this.pow(a, q2);
        var m = s;
        while (t.cmp(one) !== 0) {
          var tmp = t;
          for (var i = 0; tmp.cmp(one) !== 0; i++) {
            tmp = tmp.redSqr();
          }
          assert(i < m);
          var b = this.pow(c, new BN(1).iushln(m - i - 1));
          r = r.redMul(b);
          c = b.redSqr();
          t = t.redMul(c);
          m = i;
        }
        return r;
      };
      Red.prototype.invm = function invm(a) {
        var inv = a._invmp(this.m);
        if (inv.negative !== 0) {
          inv.negative = 0;
          return this.imod(inv).redNeg();
        } else {
          return this.imod(inv);
        }
      };
      Red.prototype.pow = function pow(a, num) {
        if (num.isZero())
          return new BN(1);
        if (num.cmpn(1) === 0)
          return a.clone();
        var windowSize = 4;
        var wnd = new Array(1 << windowSize);
        wnd[0] = new BN(1).toRed(this);
        wnd[1] = a;
        for (var i = 2; i < wnd.length; i++) {
          wnd[i] = this.mul(wnd[i - 1], a);
        }
        var res = wnd[0];
        var current = 0;
        var currentLen = 0;
        var start = num.bitLength() % 26;
        if (start === 0) {
          start = 26;
        }
        for (i = num.length - 1; i >= 0; i--) {
          var word = num.words[i];
          for (var j2 = start - 1; j2 >= 0; j2--) {
            var bit = word >> j2 & 1;
            if (res !== wnd[0]) {
              res = this.sqr(res);
            }
            if (bit === 0 && current === 0) {
              currentLen = 0;
              continue;
            }
            current <<= 1;
            current |= bit;
            currentLen++;
            if (currentLen !== windowSize && (i !== 0 || j2 !== 0))
              continue;
            res = this.mul(res, wnd[current]);
            currentLen = 0;
            current = 0;
          }
          start = 26;
        }
        return res;
      };
      Red.prototype.convertTo = function convertTo(num) {
        var r = num.umod(this.m);
        return r === num ? r.clone() : r;
      };
      Red.prototype.convertFrom = function convertFrom(num) {
        var res = num.clone();
        res.red = null;
        return res;
      };
      BN.mont = function mont(num) {
        return new Mont(num);
      };
      function Mont(m) {
        Red.call(this, m);
        this.shift = this.m.bitLength();
        if (this.shift % 26 !== 0) {
          this.shift += 26 - this.shift % 26;
        }
        this.r = new BN(1).iushln(this.shift);
        this.r2 = this.imod(this.r.sqr());
        this.rinv = this.r._invmp(this.m);
        this.minv = this.rinv.mul(this.r).isubn(1).div(this.m);
        this.minv = this.minv.umod(this.r);
        this.minv = this.r.sub(this.minv);
      }
      inherits(Mont, Red);
      Mont.prototype.convertTo = function convertTo(num) {
        return this.imod(num.ushln(this.shift));
      };
      Mont.prototype.convertFrom = function convertFrom(num) {
        var r = this.imod(num.mul(this.rinv));
        r.red = null;
        return r;
      };
      Mont.prototype.imul = function imul(a, b) {
        if (a.isZero() || b.isZero()) {
          a.words[0] = 0;
          a.length = 1;
          return a;
        }
        var t = a.imul(b);
        var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);
        var u = t.isub(c).iushrn(this.shift);
        var res = u;
        if (u.cmp(this.m) >= 0) {
          res = u.isub(this.m);
        } else if (u.cmpn(0) < 0) {
          res = u.iadd(this.m);
        }
        return res._forceRed(this);
      };
      Mont.prototype.mul = function mul(a, b) {
        if (a.isZero() || b.isZero())
          return new BN(0)._forceRed(this);
        var t = a.mul(b);
        var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);
        var u = t.isub(c).iushrn(this.shift);
        var res = u;
        if (u.cmp(this.m) >= 0) {
          res = u.isub(this.m);
        } else if (u.cmpn(0) < 0) {
          res = u.iadd(this.m);
        }
        return res._forceRed(this);
      };
      Mont.prototype.invm = function invm(a) {
        var res = this.imod(a._invmp(this.m).mul(this.r2));
        return res._forceRed(this);
      };
    })(typeof module === "undefined" || module, exports);
  }
});

// node_modules/number-to-bn/node_modules/bn.js/lib/bn.js
var require_bn3 = __commonJS({
  "node_modules/number-to-bn/node_modules/bn.js/lib/bn.js"(exports, module) {
    (function(module2, exports2) {
      "use strict";
      function assert(val, msg) {
        if (!val)
          throw new Error(msg || "Assertion failed");
      }
      function inherits(ctor, superCtor) {
        ctor.super_ = superCtor;
        var TempCtor = function() {
        };
        TempCtor.prototype = superCtor.prototype;
        ctor.prototype = new TempCtor();
        ctor.prototype.constructor = ctor;
      }
      function BN(number, base, endian) {
        if (BN.isBN(number)) {
          return number;
        }
        this.negative = 0;
        this.words = null;
        this.length = 0;
        this.red = null;
        if (number !== null) {
          if (base === "le" || base === "be") {
            endian = base;
            base = 10;
          }
          this._init(number || 0, base || 10, endian || "be");
        }
      }
      if (typeof module2 === "object") {
        module2.exports = BN;
      } else {
        exports2.BN = BN;
      }
      BN.BN = BN;
      BN.wordSize = 26;
      var Buffer2;
      try {
        Buffer2 = require_buffer().Buffer;
      } catch (e) {
      }
      BN.isBN = function isBN(num) {
        if (num instanceof BN) {
          return true;
        }
        return num !== null && typeof num === "object" && num.constructor.wordSize === BN.wordSize && Array.isArray(num.words);
      };
      BN.max = function max(left, right) {
        if (left.cmp(right) > 0)
          return left;
        return right;
      };
      BN.min = function min(left, right) {
        if (left.cmp(right) < 0)
          return left;
        return right;
      };
      BN.prototype._init = function init(number, base, endian) {
        if (typeof number === "number") {
          return this._initNumber(number, base, endian);
        }
        if (typeof number === "object") {
          return this._initArray(number, base, endian);
        }
        if (base === "hex") {
          base = 16;
        }
        assert(base === (base | 0) && base >= 2 && base <= 36);
        number = number.toString().replace(/\s+/g, "");
        var start = 0;
        if (number[0] === "-") {
          start++;
        }
        if (base === 16) {
          this._parseHex(number, start);
        } else {
          this._parseBase(number, base, start);
        }
        if (number[0] === "-") {
          this.negative = 1;
        }
        this.strip();
        if (endian !== "le")
          return;
        this._initArray(this.toArray(), base, endian);
      };
      BN.prototype._initNumber = function _initNumber(number, base, endian) {
        if (number < 0) {
          this.negative = 1;
          number = -number;
        }
        if (number < 67108864) {
          this.words = [number & 67108863];
          this.length = 1;
        } else if (number < 4503599627370496) {
          this.words = [
            number & 67108863,
            number / 67108864 & 67108863
          ];
          this.length = 2;
        } else {
          assert(number < 9007199254740992);
          this.words = [
            number & 67108863,
            number / 67108864 & 67108863,
            1
          ];
          this.length = 3;
        }
        if (endian !== "le")
          return;
        this._initArray(this.toArray(), base, endian);
      };
      BN.prototype._initArray = function _initArray(number, base, endian) {
        assert(typeof number.length === "number");
        if (number.length <= 0) {
          this.words = [0];
          this.length = 1;
          return this;
        }
        this.length = Math.ceil(number.length / 3);
        this.words = new Array(this.length);
        for (var i = 0; i < this.length; i++) {
          this.words[i] = 0;
        }
        var j2, w;
        var off = 0;
        if (endian === "be") {
          for (i = number.length - 1, j2 = 0; i >= 0; i -= 3) {
            w = number[i] | number[i - 1] << 8 | number[i - 2] << 16;
            this.words[j2] |= w << off & 67108863;
            this.words[j2 + 1] = w >>> 26 - off & 67108863;
            off += 24;
            if (off >= 26) {
              off -= 26;
              j2++;
            }
          }
        } else if (endian === "le") {
          for (i = 0, j2 = 0; i < number.length; i += 3) {
            w = number[i] | number[i + 1] << 8 | number[i + 2] << 16;
            this.words[j2] |= w << off & 67108863;
            this.words[j2 + 1] = w >>> 26 - off & 67108863;
            off += 24;
            if (off >= 26) {
              off -= 26;
              j2++;
            }
          }
        }
        return this.strip();
      };
      function parseHex(str, start, end) {
        var r = 0;
        var len = Math.min(str.length, end);
        for (var i = start; i < len; i++) {
          var c = str.charCodeAt(i) - 48;
          r <<= 4;
          if (c >= 49 && c <= 54) {
            r |= c - 49 + 10;
          } else if (c >= 17 && c <= 22) {
            r |= c - 17 + 10;
          } else {
            r |= c & 15;
          }
        }
        return r;
      }
      BN.prototype._parseHex = function _parseHex(number, start) {
        this.length = Math.ceil((number.length - start) / 6);
        this.words = new Array(this.length);
        for (var i = 0; i < this.length; i++) {
          this.words[i] = 0;
        }
        var j2, w;
        var off = 0;
        for (i = number.length - 6, j2 = 0; i >= start; i -= 6) {
          w = parseHex(number, i, i + 6);
          this.words[j2] |= w << off & 67108863;
          this.words[j2 + 1] |= w >>> 26 - off & 4194303;
          off += 24;
          if (off >= 26) {
            off -= 26;
            j2++;
          }
        }
        if (i + 6 !== start) {
          w = parseHex(number, start, i + 6);
          this.words[j2] |= w << off & 67108863;
          this.words[j2 + 1] |= w >>> 26 - off & 4194303;
        }
        this.strip();
      };
      function parseBase(str, start, end, mul) {
        var r = 0;
        var len = Math.min(str.length, end);
        for (var i = start; i < len; i++) {
          var c = str.charCodeAt(i) - 48;
          r *= mul;
          if (c >= 49) {
            r += c - 49 + 10;
          } else if (c >= 17) {
            r += c - 17 + 10;
          } else {
            r += c;
          }
        }
        return r;
      }
      BN.prototype._parseBase = function _parseBase(number, base, start) {
        this.words = [0];
        this.length = 1;
        for (var limbLen = 0, limbPow = 1; limbPow <= 67108863; limbPow *= base) {
          limbLen++;
        }
        limbLen--;
        limbPow = limbPow / base | 0;
        var total = number.length - start;
        var mod = total % limbLen;
        var end = Math.min(total, total - mod) + start;
        var word = 0;
        for (var i = start; i < end; i += limbLen) {
          word = parseBase(number, i, i + limbLen, base);
          this.imuln(limbPow);
          if (this.words[0] + word < 67108864) {
            this.words[0] += word;
          } else {
            this._iaddn(word);
          }
        }
        if (mod !== 0) {
          var pow = 1;
          word = parseBase(number, i, number.length, base);
          for (i = 0; i < mod; i++) {
            pow *= base;
          }
          this.imuln(pow);
          if (this.words[0] + word < 67108864) {
            this.words[0] += word;
          } else {
            this._iaddn(word);
          }
        }
      };
      BN.prototype.copy = function copy(dest) {
        dest.words = new Array(this.length);
        for (var i = 0; i < this.length; i++) {
          dest.words[i] = this.words[i];
        }
        dest.length = this.length;
        dest.negative = this.negative;
        dest.red = this.red;
      };
      BN.prototype.clone = function clone() {
        var r = new BN(null);
        this.copy(r);
        return r;
      };
      BN.prototype._expand = function _expand(size) {
        while (this.length < size) {
          this.words[this.length++] = 0;
        }
        return this;
      };
      BN.prototype.strip = function strip() {
        while (this.length > 1 && this.words[this.length - 1] === 0) {
          this.length--;
        }
        return this._normSign();
      };
      BN.prototype._normSign = function _normSign() {
        if (this.length === 1 && this.words[0] === 0) {
          this.negative = 0;
        }
        return this;
      };
      BN.prototype.inspect = function inspect() {
        return (this.red ? "<BN-R: " : "<BN: ") + this.toString(16) + ">";
      };
      var zeros = [
        "",
        "0",
        "00",
        "000",
        "0000",
        "00000",
        "000000",
        "0000000",
        "00000000",
        "000000000",
        "0000000000",
        "00000000000",
        "000000000000",
        "0000000000000",
        "00000000000000",
        "000000000000000",
        "0000000000000000",
        "00000000000000000",
        "000000000000000000",
        "0000000000000000000",
        "00000000000000000000",
        "000000000000000000000",
        "0000000000000000000000",
        "00000000000000000000000",
        "000000000000000000000000",
        "0000000000000000000000000"
      ];
      var groupSizes = [
        0,
        0,
        25,
        16,
        12,
        11,
        10,
        9,
        8,
        8,
        7,
        7,
        7,
        7,
        6,
        6,
        6,
        6,
        6,
        6,
        6,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5
      ];
      var groupBases = [
        0,
        0,
        33554432,
        43046721,
        16777216,
        48828125,
        60466176,
        40353607,
        16777216,
        43046721,
        1e7,
        19487171,
        35831808,
        62748517,
        7529536,
        11390625,
        16777216,
        24137569,
        34012224,
        47045881,
        64e6,
        4084101,
        5153632,
        6436343,
        7962624,
        9765625,
        11881376,
        14348907,
        17210368,
        20511149,
        243e5,
        28629151,
        33554432,
        39135393,
        45435424,
        52521875,
        60466176
      ];
      BN.prototype.toString = function toString(base, padding) {
        base = base || 10;
        padding = padding | 0 || 1;
        var out;
        if (base === 16 || base === "hex") {
          out = "";
          var off = 0;
          var carry = 0;
          for (var i = 0; i < this.length; i++) {
            var w = this.words[i];
            var word = ((w << off | carry) & 16777215).toString(16);
            carry = w >>> 24 - off & 16777215;
            if (carry !== 0 || i !== this.length - 1) {
              out = zeros[6 - word.length] + word + out;
            } else {
              out = word + out;
            }
            off += 2;
            if (off >= 26) {
              off -= 26;
              i--;
            }
          }
          if (carry !== 0) {
            out = carry.toString(16) + out;
          }
          while (out.length % padding !== 0) {
            out = "0" + out;
          }
          if (this.negative !== 0) {
            out = "-" + out;
          }
          return out;
        }
        if (base === (base | 0) && base >= 2 && base <= 36) {
          var groupSize = groupSizes[base];
          var groupBase = groupBases[base];
          out = "";
          var c = this.clone();
          c.negative = 0;
          while (!c.isZero()) {
            var r = c.modn(groupBase).toString(base);
            c = c.idivn(groupBase);
            if (!c.isZero()) {
              out = zeros[groupSize - r.length] + r + out;
            } else {
              out = r + out;
            }
          }
          if (this.isZero()) {
            out = "0" + out;
          }
          while (out.length % padding !== 0) {
            out = "0" + out;
          }
          if (this.negative !== 0) {
            out = "-" + out;
          }
          return out;
        }
        assert(false, "Base should be between 2 and 36");
      };
      BN.prototype.toNumber = function toNumber() {
        var ret = this.words[0];
        if (this.length === 2) {
          ret += this.words[1] * 67108864;
        } else if (this.length === 3 && this.words[2] === 1) {
          ret += 4503599627370496 + this.words[1] * 67108864;
        } else if (this.length > 2) {
          assert(false, "Number can only safely store up to 53 bits");
        }
        return this.negative !== 0 ? -ret : ret;
      };
      BN.prototype.toJSON = function toJSON() {
        return this.toString(16);
      };
      BN.prototype.toBuffer = function toBuffer(endian, length) {
        assert(typeof Buffer2 !== "undefined");
        return this.toArrayLike(Buffer2, endian, length);
      };
      BN.prototype.toArray = function toArray(endian, length) {
        return this.toArrayLike(Array, endian, length);
      };
      BN.prototype.toArrayLike = function toArrayLike(ArrayType, endian, length) {
        var byteLength = this.byteLength();
        var reqLength = length || Math.max(1, byteLength);
        assert(byteLength <= reqLength, "byte array longer than desired length");
        assert(reqLength > 0, "Requested array length <= 0");
        this.strip();
        var littleEndian = endian === "le";
        var res = new ArrayType(reqLength);
        var b, i;
        var q2 = this.clone();
        if (!littleEndian) {
          for (i = 0; i < reqLength - byteLength; i++) {
            res[i] = 0;
          }
          for (i = 0; !q2.isZero(); i++) {
            b = q2.andln(255);
            q2.iushrn(8);
            res[reqLength - i - 1] = b;
          }
        } else {
          for (i = 0; !q2.isZero(); i++) {
            b = q2.andln(255);
            q2.iushrn(8);
            res[i] = b;
          }
          for (; i < reqLength; i++) {
            res[i] = 0;
          }
        }
        return res;
      };
      if (Math.clz32) {
        BN.prototype._countBits = function _countBits(w) {
          return 32 - Math.clz32(w);
        };
      } else {
        BN.prototype._countBits = function _countBits(w) {
          var t = w;
          var r = 0;
          if (t >= 4096) {
            r += 13;
            t >>>= 13;
          }
          if (t >= 64) {
            r += 7;
            t >>>= 7;
          }
          if (t >= 8) {
            r += 4;
            t >>>= 4;
          }
          if (t >= 2) {
            r += 2;
            t >>>= 2;
          }
          return r + t;
        };
      }
      BN.prototype._zeroBits = function _zeroBits(w) {
        if (w === 0)
          return 26;
        var t = w;
        var r = 0;
        if ((t & 8191) === 0) {
          r += 13;
          t >>>= 13;
        }
        if ((t & 127) === 0) {
          r += 7;
          t >>>= 7;
        }
        if ((t & 15) === 0) {
          r += 4;
          t >>>= 4;
        }
        if ((t & 3) === 0) {
          r += 2;
          t >>>= 2;
        }
        if ((t & 1) === 0) {
          r++;
        }
        return r;
      };
      BN.prototype.bitLength = function bitLength() {
        var w = this.words[this.length - 1];
        var hi = this._countBits(w);
        return (this.length - 1) * 26 + hi;
      };
      function toBitArray(num) {
        var w = new Array(num.bitLength());
        for (var bit = 0; bit < w.length; bit++) {
          var off = bit / 26 | 0;
          var wbit = bit % 26;
          w[bit] = (num.words[off] & 1 << wbit) >>> wbit;
        }
        return w;
      }
      BN.prototype.zeroBits = function zeroBits() {
        if (this.isZero())
          return 0;
        var r = 0;
        for (var i = 0; i < this.length; i++) {
          var b = this._zeroBits(this.words[i]);
          r += b;
          if (b !== 26)
            break;
        }
        return r;
      };
      BN.prototype.byteLength = function byteLength() {
        return Math.ceil(this.bitLength() / 8);
      };
      BN.prototype.toTwos = function toTwos(width) {
        if (this.negative !== 0) {
          return this.abs().inotn(width).iaddn(1);
        }
        return this.clone();
      };
      BN.prototype.fromTwos = function fromTwos(width) {
        if (this.testn(width - 1)) {
          return this.notn(width).iaddn(1).ineg();
        }
        return this.clone();
      };
      BN.prototype.isNeg = function isNeg() {
        return this.negative !== 0;
      };
      BN.prototype.neg = function neg() {
        return this.clone().ineg();
      };
      BN.prototype.ineg = function ineg() {
        if (!this.isZero()) {
          this.negative ^= 1;
        }
        return this;
      };
      BN.prototype.iuor = function iuor(num) {
        while (this.length < num.length) {
          this.words[this.length++] = 0;
        }
        for (var i = 0; i < num.length; i++) {
          this.words[i] = this.words[i] | num.words[i];
        }
        return this.strip();
      };
      BN.prototype.ior = function ior(num) {
        assert((this.negative | num.negative) === 0);
        return this.iuor(num);
      };
      BN.prototype.or = function or2(num) {
        if (this.length > num.length)
          return this.clone().ior(num);
        return num.clone().ior(this);
      };
      BN.prototype.uor = function uor(num) {
        if (this.length > num.length)
          return this.clone().iuor(num);
        return num.clone().iuor(this);
      };
      BN.prototype.iuand = function iuand(num) {
        var b;
        if (this.length > num.length) {
          b = num;
        } else {
          b = this;
        }
        for (var i = 0; i < b.length; i++) {
          this.words[i] = this.words[i] & num.words[i];
        }
        this.length = b.length;
        return this.strip();
      };
      BN.prototype.iand = function iand(num) {
        assert((this.negative | num.negative) === 0);
        return this.iuand(num);
      };
      BN.prototype.and = function and(num) {
        if (this.length > num.length)
          return this.clone().iand(num);
        return num.clone().iand(this);
      };
      BN.prototype.uand = function uand(num) {
        if (this.length > num.length)
          return this.clone().iuand(num);
        return num.clone().iuand(this);
      };
      BN.prototype.iuxor = function iuxor(num) {
        var a;
        var b;
        if (this.length > num.length) {
          a = this;
          b = num;
        } else {
          a = num;
          b = this;
        }
        for (var i = 0; i < b.length; i++) {
          this.words[i] = a.words[i] ^ b.words[i];
        }
        if (this !== a) {
          for (; i < a.length; i++) {
            this.words[i] = a.words[i];
          }
        }
        this.length = a.length;
        return this.strip();
      };
      BN.prototype.ixor = function ixor(num) {
        assert((this.negative | num.negative) === 0);
        return this.iuxor(num);
      };
      BN.prototype.xor = function xor(num) {
        if (this.length > num.length)
          return this.clone().ixor(num);
        return num.clone().ixor(this);
      };
      BN.prototype.uxor = function uxor(num) {
        if (this.length > num.length)
          return this.clone().iuxor(num);
        return num.clone().iuxor(this);
      };
      BN.prototype.inotn = function inotn(width) {
        assert(typeof width === "number" && width >= 0);
        var bytesNeeded = Math.ceil(width / 26) | 0;
        var bitsLeft = width % 26;
        this._expand(bytesNeeded);
        if (bitsLeft > 0) {
          bytesNeeded--;
        }
        for (var i = 0; i < bytesNeeded; i++) {
          this.words[i] = ~this.words[i] & 67108863;
        }
        if (bitsLeft > 0) {
          this.words[i] = ~this.words[i] & 67108863 >> 26 - bitsLeft;
        }
        return this.strip();
      };
      BN.prototype.notn = function notn(width) {
        return this.clone().inotn(width);
      };
      BN.prototype.setn = function setn(bit, val) {
        assert(typeof bit === "number" && bit >= 0);
        var off = bit / 26 | 0;
        var wbit = bit % 26;
        this._expand(off + 1);
        if (val) {
          this.words[off] = this.words[off] | 1 << wbit;
        } else {
          this.words[off] = this.words[off] & ~(1 << wbit);
        }
        return this.strip();
      };
      BN.prototype.iadd = function iadd(num) {
        var r;
        if (this.negative !== 0 && num.negative === 0) {
          this.negative = 0;
          r = this.isub(num);
          this.negative ^= 1;
          return this._normSign();
        } else if (this.negative === 0 && num.negative !== 0) {
          num.negative = 0;
          r = this.isub(num);
          num.negative = 1;
          return r._normSign();
        }
        var a, b;
        if (this.length > num.length) {
          a = this;
          b = num;
        } else {
          a = num;
          b = this;
        }
        var carry = 0;
        for (var i = 0; i < b.length; i++) {
          r = (a.words[i] | 0) + (b.words[i] | 0) + carry;
          this.words[i] = r & 67108863;
          carry = r >>> 26;
        }
        for (; carry !== 0 && i < a.length; i++) {
          r = (a.words[i] | 0) + carry;
          this.words[i] = r & 67108863;
          carry = r >>> 26;
        }
        this.length = a.length;
        if (carry !== 0) {
          this.words[this.length] = carry;
          this.length++;
        } else if (a !== this) {
          for (; i < a.length; i++) {
            this.words[i] = a.words[i];
          }
        }
        return this;
      };
      BN.prototype.add = function add(num) {
        var res;
        if (num.negative !== 0 && this.negative === 0) {
          num.negative = 0;
          res = this.sub(num);
          num.negative ^= 1;
          return res;
        } else if (num.negative === 0 && this.negative !== 0) {
          this.negative = 0;
          res = num.sub(this);
          this.negative = 1;
          return res;
        }
        if (this.length > num.length)
          return this.clone().iadd(num);
        return num.clone().iadd(this);
      };
      BN.prototype.isub = function isub(num) {
        if (num.negative !== 0) {
          num.negative = 0;
          var r = this.iadd(num);
          num.negative = 1;
          return r._normSign();
        } else if (this.negative !== 0) {
          this.negative = 0;
          this.iadd(num);
          this.negative = 1;
          return this._normSign();
        }
        var cmp = this.cmp(num);
        if (cmp === 0) {
          this.negative = 0;
          this.length = 1;
          this.words[0] = 0;
          return this;
        }
        var a, b;
        if (cmp > 0) {
          a = this;
          b = num;
        } else {
          a = num;
          b = this;
        }
        var carry = 0;
        for (var i = 0; i < b.length; i++) {
          r = (a.words[i] | 0) - (b.words[i] | 0) + carry;
          carry = r >> 26;
          this.words[i] = r & 67108863;
        }
        for (; carry !== 0 && i < a.length; i++) {
          r = (a.words[i] | 0) + carry;
          carry = r >> 26;
          this.words[i] = r & 67108863;
        }
        if (carry === 0 && i < a.length && a !== this) {
          for (; i < a.length; i++) {
            this.words[i] = a.words[i];
          }
        }
        this.length = Math.max(this.length, i);
        if (a !== this) {
          this.negative = 1;
        }
        return this.strip();
      };
      BN.prototype.sub = function sub(num) {
        return this.clone().isub(num);
      };
      function smallMulTo(self2, num, out) {
        out.negative = num.negative ^ self2.negative;
        var len = self2.length + num.length | 0;
        out.length = len;
        len = len - 1 | 0;
        var a = self2.words[0] | 0;
        var b = num.words[0] | 0;
        var r = a * b;
        var lo = r & 67108863;
        var carry = r / 67108864 | 0;
        out.words[0] = lo;
        for (var k = 1; k < len; k++) {
          var ncarry = carry >>> 26;
          var rword = carry & 67108863;
          var maxJ = Math.min(k, num.length - 1);
          for (var j2 = Math.max(0, k - self2.length + 1); j2 <= maxJ; j2++) {
            var i = k - j2 | 0;
            a = self2.words[i] | 0;
            b = num.words[j2] | 0;
            r = a * b + rword;
            ncarry += r / 67108864 | 0;
            rword = r & 67108863;
          }
          out.words[k] = rword | 0;
          carry = ncarry | 0;
        }
        if (carry !== 0) {
          out.words[k] = carry | 0;
        } else {
          out.length--;
        }
        return out.strip();
      }
      var comb10MulTo = function comb10MulTo2(self2, num, out) {
        var a = self2.words;
        var b = num.words;
        var o2 = out.words;
        var c = 0;
        var lo;
        var mid;
        var hi;
        var a0 = a[0] | 0;
        var al0 = a0 & 8191;
        var ah0 = a0 >>> 13;
        var a1 = a[1] | 0;
        var al1 = a1 & 8191;
        var ah1 = a1 >>> 13;
        var a2 = a[2] | 0;
        var al2 = a2 & 8191;
        var ah2 = a2 >>> 13;
        var a3 = a[3] | 0;
        var al3 = a3 & 8191;
        var ah3 = a3 >>> 13;
        var a4 = a[4] | 0;
        var al4 = a4 & 8191;
        var ah4 = a4 >>> 13;
        var a5 = a[5] | 0;
        var al5 = a5 & 8191;
        var ah5 = a5 >>> 13;
        var a6 = a[6] | 0;
        var al6 = a6 & 8191;
        var ah6 = a6 >>> 13;
        var a7 = a[7] | 0;
        var al7 = a7 & 8191;
        var ah7 = a7 >>> 13;
        var a8 = a[8] | 0;
        var al8 = a8 & 8191;
        var ah8 = a8 >>> 13;
        var a9 = a[9] | 0;
        var al9 = a9 & 8191;
        var ah9 = a9 >>> 13;
        var b0 = b[0] | 0;
        var bl0 = b0 & 8191;
        var bh0 = b0 >>> 13;
        var b1 = b[1] | 0;
        var bl1 = b1 & 8191;
        var bh1 = b1 >>> 13;
        var b2 = b[2] | 0;
        var bl2 = b2 & 8191;
        var bh2 = b2 >>> 13;
        var b3 = b[3] | 0;
        var bl3 = b3 & 8191;
        var bh3 = b3 >>> 13;
        var b4 = b[4] | 0;
        var bl4 = b4 & 8191;
        var bh4 = b4 >>> 13;
        var b5 = b[5] | 0;
        var bl5 = b5 & 8191;
        var bh5 = b5 >>> 13;
        var b6 = b[6] | 0;
        var bl6 = b6 & 8191;
        var bh6 = b6 >>> 13;
        var b7 = b[7] | 0;
        var bl7 = b7 & 8191;
        var bh7 = b7 >>> 13;
        var b8 = b[8] | 0;
        var bl8 = b8 & 8191;
        var bh8 = b8 >>> 13;
        var b9 = b[9] | 0;
        var bl9 = b9 & 8191;
        var bh9 = b9 >>> 13;
        out.negative = self2.negative ^ num.negative;
        out.length = 19;
        lo = Math.imul(al0, bl0);
        mid = Math.imul(al0, bh0);
        mid = mid + Math.imul(ah0, bl0) | 0;
        hi = Math.imul(ah0, bh0);
        var w0 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w0 >>> 26) | 0;
        w0 &= 67108863;
        lo = Math.imul(al1, bl0);
        mid = Math.imul(al1, bh0);
        mid = mid + Math.imul(ah1, bl0) | 0;
        hi = Math.imul(ah1, bh0);
        lo = lo + Math.imul(al0, bl1) | 0;
        mid = mid + Math.imul(al0, bh1) | 0;
        mid = mid + Math.imul(ah0, bl1) | 0;
        hi = hi + Math.imul(ah0, bh1) | 0;
        var w1 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w1 >>> 26) | 0;
        w1 &= 67108863;
        lo = Math.imul(al2, bl0);
        mid = Math.imul(al2, bh0);
        mid = mid + Math.imul(ah2, bl0) | 0;
        hi = Math.imul(ah2, bh0);
        lo = lo + Math.imul(al1, bl1) | 0;
        mid = mid + Math.imul(al1, bh1) | 0;
        mid = mid + Math.imul(ah1, bl1) | 0;
        hi = hi + Math.imul(ah1, bh1) | 0;
        lo = lo + Math.imul(al0, bl2) | 0;
        mid = mid + Math.imul(al0, bh2) | 0;
        mid = mid + Math.imul(ah0, bl2) | 0;
        hi = hi + Math.imul(ah0, bh2) | 0;
        var w2 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w2 >>> 26) | 0;
        w2 &= 67108863;
        lo = Math.imul(al3, bl0);
        mid = Math.imul(al3, bh0);
        mid = mid + Math.imul(ah3, bl0) | 0;
        hi = Math.imul(ah3, bh0);
        lo = lo + Math.imul(al2, bl1) | 0;
        mid = mid + Math.imul(al2, bh1) | 0;
        mid = mid + Math.imul(ah2, bl1) | 0;
        hi = hi + Math.imul(ah2, bh1) | 0;
        lo = lo + Math.imul(al1, bl2) | 0;
        mid = mid + Math.imul(al1, bh2) | 0;
        mid = mid + Math.imul(ah1, bl2) | 0;
        hi = hi + Math.imul(ah1, bh2) | 0;
        lo = lo + Math.imul(al0, bl3) | 0;
        mid = mid + Math.imul(al0, bh3) | 0;
        mid = mid + Math.imul(ah0, bl3) | 0;
        hi = hi + Math.imul(ah0, bh3) | 0;
        var w3 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w3 >>> 26) | 0;
        w3 &= 67108863;
        lo = Math.imul(al4, bl0);
        mid = Math.imul(al4, bh0);
        mid = mid + Math.imul(ah4, bl0) | 0;
        hi = Math.imul(ah4, bh0);
        lo = lo + Math.imul(al3, bl1) | 0;
        mid = mid + Math.imul(al3, bh1) | 0;
        mid = mid + Math.imul(ah3, bl1) | 0;
        hi = hi + Math.imul(ah3, bh1) | 0;
        lo = lo + Math.imul(al2, bl2) | 0;
        mid = mid + Math.imul(al2, bh2) | 0;
        mid = mid + Math.imul(ah2, bl2) | 0;
        hi = hi + Math.imul(ah2, bh2) | 0;
        lo = lo + Math.imul(al1, bl3) | 0;
        mid = mid + Math.imul(al1, bh3) | 0;
        mid = mid + Math.imul(ah1, bl3) | 0;
        hi = hi + Math.imul(ah1, bh3) | 0;
        lo = lo + Math.imul(al0, bl4) | 0;
        mid = mid + Math.imul(al0, bh4) | 0;
        mid = mid + Math.imul(ah0, bl4) | 0;
        hi = hi + Math.imul(ah0, bh4) | 0;
        var w4 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w4 >>> 26) | 0;
        w4 &= 67108863;
        lo = Math.imul(al5, bl0);
        mid = Math.imul(al5, bh0);
        mid = mid + Math.imul(ah5, bl0) | 0;
        hi = Math.imul(ah5, bh0);
        lo = lo + Math.imul(al4, bl1) | 0;
        mid = mid + Math.imul(al4, bh1) | 0;
        mid = mid + Math.imul(ah4, bl1) | 0;
        hi = hi + Math.imul(ah4, bh1) | 0;
        lo = lo + Math.imul(al3, bl2) | 0;
        mid = mid + Math.imul(al3, bh2) | 0;
        mid = mid + Math.imul(ah3, bl2) | 0;
        hi = hi + Math.imul(ah3, bh2) | 0;
        lo = lo + Math.imul(al2, bl3) | 0;
        mid = mid + Math.imul(al2, bh3) | 0;
        mid = mid + Math.imul(ah2, bl3) | 0;
        hi = hi + Math.imul(ah2, bh3) | 0;
        lo = lo + Math.imul(al1, bl4) | 0;
        mid = mid + Math.imul(al1, bh4) | 0;
        mid = mid + Math.imul(ah1, bl4) | 0;
        hi = hi + Math.imul(ah1, bh4) | 0;
        lo = lo + Math.imul(al0, bl5) | 0;
        mid = mid + Math.imul(al0, bh5) | 0;
        mid = mid + Math.imul(ah0, bl5) | 0;
        hi = hi + Math.imul(ah0, bh5) | 0;
        var w5 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w5 >>> 26) | 0;
        w5 &= 67108863;
        lo = Math.imul(al6, bl0);
        mid = Math.imul(al6, bh0);
        mid = mid + Math.imul(ah6, bl0) | 0;
        hi = Math.imul(ah6, bh0);
        lo = lo + Math.imul(al5, bl1) | 0;
        mid = mid + Math.imul(al5, bh1) | 0;
        mid = mid + Math.imul(ah5, bl1) | 0;
        hi = hi + Math.imul(ah5, bh1) | 0;
        lo = lo + Math.imul(al4, bl2) | 0;
        mid = mid + Math.imul(al4, bh2) | 0;
        mid = mid + Math.imul(ah4, bl2) | 0;
        hi = hi + Math.imul(ah4, bh2) | 0;
        lo = lo + Math.imul(al3, bl3) | 0;
        mid = mid + Math.imul(al3, bh3) | 0;
        mid = mid + Math.imul(ah3, bl3) | 0;
        hi = hi + Math.imul(ah3, bh3) | 0;
        lo = lo + Math.imul(al2, bl4) | 0;
        mid = mid + Math.imul(al2, bh4) | 0;
        mid = mid + Math.imul(ah2, bl4) | 0;
        hi = hi + Math.imul(ah2, bh4) | 0;
        lo = lo + Math.imul(al1, bl5) | 0;
        mid = mid + Math.imul(al1, bh5) | 0;
        mid = mid + Math.imul(ah1, bl5) | 0;
        hi = hi + Math.imul(ah1, bh5) | 0;
        lo = lo + Math.imul(al0, bl6) | 0;
        mid = mid + Math.imul(al0, bh6) | 0;
        mid = mid + Math.imul(ah0, bl6) | 0;
        hi = hi + Math.imul(ah0, bh6) | 0;
        var w6 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w6 >>> 26) | 0;
        w6 &= 67108863;
        lo = Math.imul(al7, bl0);
        mid = Math.imul(al7, bh0);
        mid = mid + Math.imul(ah7, bl0) | 0;
        hi = Math.imul(ah7, bh0);
        lo = lo + Math.imul(al6, bl1) | 0;
        mid = mid + Math.imul(al6, bh1) | 0;
        mid = mid + Math.imul(ah6, bl1) | 0;
        hi = hi + Math.imul(ah6, bh1) | 0;
        lo = lo + Math.imul(al5, bl2) | 0;
        mid = mid + Math.imul(al5, bh2) | 0;
        mid = mid + Math.imul(ah5, bl2) | 0;
        hi = hi + Math.imul(ah5, bh2) | 0;
        lo = lo + Math.imul(al4, bl3) | 0;
        mid = mid + Math.imul(al4, bh3) | 0;
        mid = mid + Math.imul(ah4, bl3) | 0;
        hi = hi + Math.imul(ah4, bh3) | 0;
        lo = lo + Math.imul(al3, bl4) | 0;
        mid = mid + Math.imul(al3, bh4) | 0;
        mid = mid + Math.imul(ah3, bl4) | 0;
        hi = hi + Math.imul(ah3, bh4) | 0;
        lo = lo + Math.imul(al2, bl5) | 0;
        mid = mid + Math.imul(al2, bh5) | 0;
        mid = mid + Math.imul(ah2, bl5) | 0;
        hi = hi + Math.imul(ah2, bh5) | 0;
        lo = lo + Math.imul(al1, bl6) | 0;
        mid = mid + Math.imul(al1, bh6) | 0;
        mid = mid + Math.imul(ah1, bl6) | 0;
        hi = hi + Math.imul(ah1, bh6) | 0;
        lo = lo + Math.imul(al0, bl7) | 0;
        mid = mid + Math.imul(al0, bh7) | 0;
        mid = mid + Math.imul(ah0, bl7) | 0;
        hi = hi + Math.imul(ah0, bh7) | 0;
        var w7 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w7 >>> 26) | 0;
        w7 &= 67108863;
        lo = Math.imul(al8, bl0);
        mid = Math.imul(al8, bh0);
        mid = mid + Math.imul(ah8, bl0) | 0;
        hi = Math.imul(ah8, bh0);
        lo = lo + Math.imul(al7, bl1) | 0;
        mid = mid + Math.imul(al7, bh1) | 0;
        mid = mid + Math.imul(ah7, bl1) | 0;
        hi = hi + Math.imul(ah7, bh1) | 0;
        lo = lo + Math.imul(al6, bl2) | 0;
        mid = mid + Math.imul(al6, bh2) | 0;
        mid = mid + Math.imul(ah6, bl2) | 0;
        hi = hi + Math.imul(ah6, bh2) | 0;
        lo = lo + Math.imul(al5, bl3) | 0;
        mid = mid + Math.imul(al5, bh3) | 0;
        mid = mid + Math.imul(ah5, bl3) | 0;
        hi = hi + Math.imul(ah5, bh3) | 0;
        lo = lo + Math.imul(al4, bl4) | 0;
        mid = mid + Math.imul(al4, bh4) | 0;
        mid = mid + Math.imul(ah4, bl4) | 0;
        hi = hi + Math.imul(ah4, bh4) | 0;
        lo = lo + Math.imul(al3, bl5) | 0;
        mid = mid + Math.imul(al3, bh5) | 0;
        mid = mid + Math.imul(ah3, bl5) | 0;
        hi = hi + Math.imul(ah3, bh5) | 0;
        lo = lo + Math.imul(al2, bl6) | 0;
        mid = mid + Math.imul(al2, bh6) | 0;
        mid = mid + Math.imul(ah2, bl6) | 0;
        hi = hi + Math.imul(ah2, bh6) | 0;
        lo = lo + Math.imul(al1, bl7) | 0;
        mid = mid + Math.imul(al1, bh7) | 0;
        mid = mid + Math.imul(ah1, bl7) | 0;
        hi = hi + Math.imul(ah1, bh7) | 0;
        lo = lo + Math.imul(al0, bl8) | 0;
        mid = mid + Math.imul(al0, bh8) | 0;
        mid = mid + Math.imul(ah0, bl8) | 0;
        hi = hi + Math.imul(ah0, bh8) | 0;
        var w8 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w8 >>> 26) | 0;
        w8 &= 67108863;
        lo = Math.imul(al9, bl0);
        mid = Math.imul(al9, bh0);
        mid = mid + Math.imul(ah9, bl0) | 0;
        hi = Math.imul(ah9, bh0);
        lo = lo + Math.imul(al8, bl1) | 0;
        mid = mid + Math.imul(al8, bh1) | 0;
        mid = mid + Math.imul(ah8, bl1) | 0;
        hi = hi + Math.imul(ah8, bh1) | 0;
        lo = lo + Math.imul(al7, bl2) | 0;
        mid = mid + Math.imul(al7, bh2) | 0;
        mid = mid + Math.imul(ah7, bl2) | 0;
        hi = hi + Math.imul(ah7, bh2) | 0;
        lo = lo + Math.imul(al6, bl3) | 0;
        mid = mid + Math.imul(al6, bh3) | 0;
        mid = mid + Math.imul(ah6, bl3) | 0;
        hi = hi + Math.imul(ah6, bh3) | 0;
        lo = lo + Math.imul(al5, bl4) | 0;
        mid = mid + Math.imul(al5, bh4) | 0;
        mid = mid + Math.imul(ah5, bl4) | 0;
        hi = hi + Math.imul(ah5, bh4) | 0;
        lo = lo + Math.imul(al4, bl5) | 0;
        mid = mid + Math.imul(al4, bh5) | 0;
        mid = mid + Math.imul(ah4, bl5) | 0;
        hi = hi + Math.imul(ah4, bh5) | 0;
        lo = lo + Math.imul(al3, bl6) | 0;
        mid = mid + Math.imul(al3, bh6) | 0;
        mid = mid + Math.imul(ah3, bl6) | 0;
        hi = hi + Math.imul(ah3, bh6) | 0;
        lo = lo + Math.imul(al2, bl7) | 0;
        mid = mid + Math.imul(al2, bh7) | 0;
        mid = mid + Math.imul(ah2, bl7) | 0;
        hi = hi + Math.imul(ah2, bh7) | 0;
        lo = lo + Math.imul(al1, bl8) | 0;
        mid = mid + Math.imul(al1, bh8) | 0;
        mid = mid + Math.imul(ah1, bl8) | 0;
        hi = hi + Math.imul(ah1, bh8) | 0;
        lo = lo + Math.imul(al0, bl9) | 0;
        mid = mid + Math.imul(al0, bh9) | 0;
        mid = mid + Math.imul(ah0, bl9) | 0;
        hi = hi + Math.imul(ah0, bh9) | 0;
        var w9 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w9 >>> 26) | 0;
        w9 &= 67108863;
        lo = Math.imul(al9, bl1);
        mid = Math.imul(al9, bh1);
        mid = mid + Math.imul(ah9, bl1) | 0;
        hi = Math.imul(ah9, bh1);
        lo = lo + Math.imul(al8, bl2) | 0;
        mid = mid + Math.imul(al8, bh2) | 0;
        mid = mid + Math.imul(ah8, bl2) | 0;
        hi = hi + Math.imul(ah8, bh2) | 0;
        lo = lo + Math.imul(al7, bl3) | 0;
        mid = mid + Math.imul(al7, bh3) | 0;
        mid = mid + Math.imul(ah7, bl3) | 0;
        hi = hi + Math.imul(ah7, bh3) | 0;
        lo = lo + Math.imul(al6, bl4) | 0;
        mid = mid + Math.imul(al6, bh4) | 0;
        mid = mid + Math.imul(ah6, bl4) | 0;
        hi = hi + Math.imul(ah6, bh4) | 0;
        lo = lo + Math.imul(al5, bl5) | 0;
        mid = mid + Math.imul(al5, bh5) | 0;
        mid = mid + Math.imul(ah5, bl5) | 0;
        hi = hi + Math.imul(ah5, bh5) | 0;
        lo = lo + Math.imul(al4, bl6) | 0;
        mid = mid + Math.imul(al4, bh6) | 0;
        mid = mid + Math.imul(ah4, bl6) | 0;
        hi = hi + Math.imul(ah4, bh6) | 0;
        lo = lo + Math.imul(al3, bl7) | 0;
        mid = mid + Math.imul(al3, bh7) | 0;
        mid = mid + Math.imul(ah3, bl7) | 0;
        hi = hi + Math.imul(ah3, bh7) | 0;
        lo = lo + Math.imul(al2, bl8) | 0;
        mid = mid + Math.imul(al2, bh8) | 0;
        mid = mid + Math.imul(ah2, bl8) | 0;
        hi = hi + Math.imul(ah2, bh8) | 0;
        lo = lo + Math.imul(al1, bl9) | 0;
        mid = mid + Math.imul(al1, bh9) | 0;
        mid = mid + Math.imul(ah1, bl9) | 0;
        hi = hi + Math.imul(ah1, bh9) | 0;
        var w10 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w10 >>> 26) | 0;
        w10 &= 67108863;
        lo = Math.imul(al9, bl2);
        mid = Math.imul(al9, bh2);
        mid = mid + Math.imul(ah9, bl2) | 0;
        hi = Math.imul(ah9, bh2);
        lo = lo + Math.imul(al8, bl3) | 0;
        mid = mid + Math.imul(al8, bh3) | 0;
        mid = mid + Math.imul(ah8, bl3) | 0;
        hi = hi + Math.imul(ah8, bh3) | 0;
        lo = lo + Math.imul(al7, bl4) | 0;
        mid = mid + Math.imul(al7, bh4) | 0;
        mid = mid + Math.imul(ah7, bl4) | 0;
        hi = hi + Math.imul(ah7, bh4) | 0;
        lo = lo + Math.imul(al6, bl5) | 0;
        mid = mid + Math.imul(al6, bh5) | 0;
        mid = mid + Math.imul(ah6, bl5) | 0;
        hi = hi + Math.imul(ah6, bh5) | 0;
        lo = lo + Math.imul(al5, bl6) | 0;
        mid = mid + Math.imul(al5, bh6) | 0;
        mid = mid + Math.imul(ah5, bl6) | 0;
        hi = hi + Math.imul(ah5, bh6) | 0;
        lo = lo + Math.imul(al4, bl7) | 0;
        mid = mid + Math.imul(al4, bh7) | 0;
        mid = mid + Math.imul(ah4, bl7) | 0;
        hi = hi + Math.imul(ah4, bh7) | 0;
        lo = lo + Math.imul(al3, bl8) | 0;
        mid = mid + Math.imul(al3, bh8) | 0;
        mid = mid + Math.imul(ah3, bl8) | 0;
        hi = hi + Math.imul(ah3, bh8) | 0;
        lo = lo + Math.imul(al2, bl9) | 0;
        mid = mid + Math.imul(al2, bh9) | 0;
        mid = mid + Math.imul(ah2, bl9) | 0;
        hi = hi + Math.imul(ah2, bh9) | 0;
        var w11 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w11 >>> 26) | 0;
        w11 &= 67108863;
        lo = Math.imul(al9, bl3);
        mid = Math.imul(al9, bh3);
        mid = mid + Math.imul(ah9, bl3) | 0;
        hi = Math.imul(ah9, bh3);
        lo = lo + Math.imul(al8, bl4) | 0;
        mid = mid + Math.imul(al8, bh4) | 0;
        mid = mid + Math.imul(ah8, bl4) | 0;
        hi = hi + Math.imul(ah8, bh4) | 0;
        lo = lo + Math.imul(al7, bl5) | 0;
        mid = mid + Math.imul(al7, bh5) | 0;
        mid = mid + Math.imul(ah7, bl5) | 0;
        hi = hi + Math.imul(ah7, bh5) | 0;
        lo = lo + Math.imul(al6, bl6) | 0;
        mid = mid + Math.imul(al6, bh6) | 0;
        mid = mid + Math.imul(ah6, bl6) | 0;
        hi = hi + Math.imul(ah6, bh6) | 0;
        lo = lo + Math.imul(al5, bl7) | 0;
        mid = mid + Math.imul(al5, bh7) | 0;
        mid = mid + Math.imul(ah5, bl7) | 0;
        hi = hi + Math.imul(ah5, bh7) | 0;
        lo = lo + Math.imul(al4, bl8) | 0;
        mid = mid + Math.imul(al4, bh8) | 0;
        mid = mid + Math.imul(ah4, bl8) | 0;
        hi = hi + Math.imul(ah4, bh8) | 0;
        lo = lo + Math.imul(al3, bl9) | 0;
        mid = mid + Math.imul(al3, bh9) | 0;
        mid = mid + Math.imul(ah3, bl9) | 0;
        hi = hi + Math.imul(ah3, bh9) | 0;
        var w12 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w12 >>> 26) | 0;
        w12 &= 67108863;
        lo = Math.imul(al9, bl4);
        mid = Math.imul(al9, bh4);
        mid = mid + Math.imul(ah9, bl4) | 0;
        hi = Math.imul(ah9, bh4);
        lo = lo + Math.imul(al8, bl5) | 0;
        mid = mid + Math.imul(al8, bh5) | 0;
        mid = mid + Math.imul(ah8, bl5) | 0;
        hi = hi + Math.imul(ah8, bh5) | 0;
        lo = lo + Math.imul(al7, bl6) | 0;
        mid = mid + Math.imul(al7, bh6) | 0;
        mid = mid + Math.imul(ah7, bl6) | 0;
        hi = hi + Math.imul(ah7, bh6) | 0;
        lo = lo + Math.imul(al6, bl7) | 0;
        mid = mid + Math.imul(al6, bh7) | 0;
        mid = mid + Math.imul(ah6, bl7) | 0;
        hi = hi + Math.imul(ah6, bh7) | 0;
        lo = lo + Math.imul(al5, bl8) | 0;
        mid = mid + Math.imul(al5, bh8) | 0;
        mid = mid + Math.imul(ah5, bl8) | 0;
        hi = hi + Math.imul(ah5, bh8) | 0;
        lo = lo + Math.imul(al4, bl9) | 0;
        mid = mid + Math.imul(al4, bh9) | 0;
        mid = mid + Math.imul(ah4, bl9) | 0;
        hi = hi + Math.imul(ah4, bh9) | 0;
        var w13 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w13 >>> 26) | 0;
        w13 &= 67108863;
        lo = Math.imul(al9, bl5);
        mid = Math.imul(al9, bh5);
        mid = mid + Math.imul(ah9, bl5) | 0;
        hi = Math.imul(ah9, bh5);
        lo = lo + Math.imul(al8, bl6) | 0;
        mid = mid + Math.imul(al8, bh6) | 0;
        mid = mid + Math.imul(ah8, bl6) | 0;
        hi = hi + Math.imul(ah8, bh6) | 0;
        lo = lo + Math.imul(al7, bl7) | 0;
        mid = mid + Math.imul(al7, bh7) | 0;
        mid = mid + Math.imul(ah7, bl7) | 0;
        hi = hi + Math.imul(ah7, bh7) | 0;
        lo = lo + Math.imul(al6, bl8) | 0;
        mid = mid + Math.imul(al6, bh8) | 0;
        mid = mid + Math.imul(ah6, bl8) | 0;
        hi = hi + Math.imul(ah6, bh8) | 0;
        lo = lo + Math.imul(al5, bl9) | 0;
        mid = mid + Math.imul(al5, bh9) | 0;
        mid = mid + Math.imul(ah5, bl9) | 0;
        hi = hi + Math.imul(ah5, bh9) | 0;
        var w14 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w14 >>> 26) | 0;
        w14 &= 67108863;
        lo = Math.imul(al9, bl6);
        mid = Math.imul(al9, bh6);
        mid = mid + Math.imul(ah9, bl6) | 0;
        hi = Math.imul(ah9, bh6);
        lo = lo + Math.imul(al8, bl7) | 0;
        mid = mid + Math.imul(al8, bh7) | 0;
        mid = mid + Math.imul(ah8, bl7) | 0;
        hi = hi + Math.imul(ah8, bh7) | 0;
        lo = lo + Math.imul(al7, bl8) | 0;
        mid = mid + Math.imul(al7, bh8) | 0;
        mid = mid + Math.imul(ah7, bl8) | 0;
        hi = hi + Math.imul(ah7, bh8) | 0;
        lo = lo + Math.imul(al6, bl9) | 0;
        mid = mid + Math.imul(al6, bh9) | 0;
        mid = mid + Math.imul(ah6, bl9) | 0;
        hi = hi + Math.imul(ah6, bh9) | 0;
        var w15 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w15 >>> 26) | 0;
        w15 &= 67108863;
        lo = Math.imul(al9, bl7);
        mid = Math.imul(al9, bh7);
        mid = mid + Math.imul(ah9, bl7) | 0;
        hi = Math.imul(ah9, bh7);
        lo = lo + Math.imul(al8, bl8) | 0;
        mid = mid + Math.imul(al8, bh8) | 0;
        mid = mid + Math.imul(ah8, bl8) | 0;
        hi = hi + Math.imul(ah8, bh8) | 0;
        lo = lo + Math.imul(al7, bl9) | 0;
        mid = mid + Math.imul(al7, bh9) | 0;
        mid = mid + Math.imul(ah7, bl9) | 0;
        hi = hi + Math.imul(ah7, bh9) | 0;
        var w16 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w16 >>> 26) | 0;
        w16 &= 67108863;
        lo = Math.imul(al9, bl8);
        mid = Math.imul(al9, bh8);
        mid = mid + Math.imul(ah9, bl8) | 0;
        hi = Math.imul(ah9, bh8);
        lo = lo + Math.imul(al8, bl9) | 0;
        mid = mid + Math.imul(al8, bh9) | 0;
        mid = mid + Math.imul(ah8, bl9) | 0;
        hi = hi + Math.imul(ah8, bh9) | 0;
        var w17 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w17 >>> 26) | 0;
        w17 &= 67108863;
        lo = Math.imul(al9, bl9);
        mid = Math.imul(al9, bh9);
        mid = mid + Math.imul(ah9, bl9) | 0;
        hi = Math.imul(ah9, bh9);
        var w18 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w18 >>> 26) | 0;
        w18 &= 67108863;
        o2[0] = w0;
        o2[1] = w1;
        o2[2] = w2;
        o2[3] = w3;
        o2[4] = w4;
        o2[5] = w5;
        o2[6] = w6;
        o2[7] = w7;
        o2[8] = w8;
        o2[9] = w9;
        o2[10] = w10;
        o2[11] = w11;
        o2[12] = w12;
        o2[13] = w13;
        o2[14] = w14;
        o2[15] = w15;
        o2[16] = w16;
        o2[17] = w17;
        o2[18] = w18;
        if (c !== 0) {
          o2[19] = c;
          out.length++;
        }
        return out;
      };
      if (!Math.imul) {
        comb10MulTo = smallMulTo;
      }
      function bigMulTo(self2, num, out) {
        out.negative = num.negative ^ self2.negative;
        out.length = self2.length + num.length;
        var carry = 0;
        var hncarry = 0;
        for (var k = 0; k < out.length - 1; k++) {
          var ncarry = hncarry;
          hncarry = 0;
          var rword = carry & 67108863;
          var maxJ = Math.min(k, num.length - 1);
          for (var j2 = Math.max(0, k - self2.length + 1); j2 <= maxJ; j2++) {
            var i = k - j2;
            var a = self2.words[i] | 0;
            var b = num.words[j2] | 0;
            var r = a * b;
            var lo = r & 67108863;
            ncarry = ncarry + (r / 67108864 | 0) | 0;
            lo = lo + rword | 0;
            rword = lo & 67108863;
            ncarry = ncarry + (lo >>> 26) | 0;
            hncarry += ncarry >>> 26;
            ncarry &= 67108863;
          }
          out.words[k] = rword;
          carry = ncarry;
          ncarry = hncarry;
        }
        if (carry !== 0) {
          out.words[k] = carry;
        } else {
          out.length--;
        }
        return out.strip();
      }
      function jumboMulTo(self2, num, out) {
        var fftm = new FFTM();
        return fftm.mulp(self2, num, out);
      }
      BN.prototype.mulTo = function mulTo(num, out) {
        var res;
        var len = this.length + num.length;
        if (this.length === 10 && num.length === 10) {
          res = comb10MulTo(this, num, out);
        } else if (len < 63) {
          res = smallMulTo(this, num, out);
        } else if (len < 1024) {
          res = bigMulTo(this, num, out);
        } else {
          res = jumboMulTo(this, num, out);
        }
        return res;
      };
      function FFTM(x, y) {
        this.x = x;
        this.y = y;
      }
      FFTM.prototype.makeRBT = function makeRBT(N) {
        var t = new Array(N);
        var l = BN.prototype._countBits(N) - 1;
        for (var i = 0; i < N; i++) {
          t[i] = this.revBin(i, l, N);
        }
        return t;
      };
      FFTM.prototype.revBin = function revBin(x, l, N) {
        if (x === 0 || x === N - 1)
          return x;
        var rb = 0;
        for (var i = 0; i < l; i++) {
          rb |= (x & 1) << l - i - 1;
          x >>= 1;
        }
        return rb;
      };
      FFTM.prototype.permute = function permute(rbt, rws, iws, rtws, itws, N) {
        for (var i = 0; i < N; i++) {
          rtws[i] = rws[rbt[i]];
          itws[i] = iws[rbt[i]];
        }
      };
      FFTM.prototype.transform = function transform(rws, iws, rtws, itws, N, rbt) {
        this.permute(rbt, rws, iws, rtws, itws, N);
        for (var s = 1; s < N; s <<= 1) {
          var l = s << 1;
          var rtwdf = Math.cos(2 * Math.PI / l);
          var itwdf = Math.sin(2 * Math.PI / l);
          for (var p2 = 0; p2 < N; p2 += l) {
            var rtwdf_ = rtwdf;
            var itwdf_ = itwdf;
            for (var j2 = 0; j2 < s; j2++) {
              var re2 = rtws[p2 + j2];
              var ie2 = itws[p2 + j2];
              var ro = rtws[p2 + j2 + s];
              var io = itws[p2 + j2 + s];
              var rx = rtwdf_ * ro - itwdf_ * io;
              io = rtwdf_ * io + itwdf_ * ro;
              ro = rx;
              rtws[p2 + j2] = re2 + ro;
              itws[p2 + j2] = ie2 + io;
              rtws[p2 + j2 + s] = re2 - ro;
              itws[p2 + j2 + s] = ie2 - io;
              if (j2 !== l) {
                rx = rtwdf * rtwdf_ - itwdf * itwdf_;
                itwdf_ = rtwdf * itwdf_ + itwdf * rtwdf_;
                rtwdf_ = rx;
              }
            }
          }
        }
      };
      FFTM.prototype.guessLen13b = function guessLen13b(n, m) {
        var N = Math.max(m, n) | 1;
        var odd = N & 1;
        var i = 0;
        for (N = N / 2 | 0; N; N = N >>> 1) {
          i++;
        }
        return 1 << i + 1 + odd;
      };
      FFTM.prototype.conjugate = function conjugate(rws, iws, N) {
        if (N <= 1)
          return;
        for (var i = 0; i < N / 2; i++) {
          var t = rws[i];
          rws[i] = rws[N - i - 1];
          rws[N - i - 1] = t;
          t = iws[i];
          iws[i] = -iws[N - i - 1];
          iws[N - i - 1] = -t;
        }
      };
      FFTM.prototype.normalize13b = function normalize13b(ws, N) {
        var carry = 0;
        for (var i = 0; i < N / 2; i++) {
          var w = Math.round(ws[2 * i + 1] / N) * 8192 + Math.round(ws[2 * i] / N) + carry;
          ws[i] = w & 67108863;
          if (w < 67108864) {
            carry = 0;
          } else {
            carry = w / 67108864 | 0;
          }
        }
        return ws;
      };
      FFTM.prototype.convert13b = function convert13b(ws, len, rws, N) {
        var carry = 0;
        for (var i = 0; i < len; i++) {
          carry = carry + (ws[i] | 0);
          rws[2 * i] = carry & 8191;
          carry = carry >>> 13;
          rws[2 * i + 1] = carry & 8191;
          carry = carry >>> 13;
        }
        for (i = 2 * len; i < N; ++i) {
          rws[i] = 0;
        }
        assert(carry === 0);
        assert((carry & ~8191) === 0);
      };
      FFTM.prototype.stub = function stub(N) {
        var ph = new Array(N);
        for (var i = 0; i < N; i++) {
          ph[i] = 0;
        }
        return ph;
      };
      FFTM.prototype.mulp = function mulp(x, y, out) {
        var N = 2 * this.guessLen13b(x.length, y.length);
        var rbt = this.makeRBT(N);
        var _ = this.stub(N);
        var rws = new Array(N);
        var rwst = new Array(N);
        var iwst = new Array(N);
        var nrws = new Array(N);
        var nrwst = new Array(N);
        var niwst = new Array(N);
        var rmws = out.words;
        rmws.length = N;
        this.convert13b(x.words, x.length, rws, N);
        this.convert13b(y.words, y.length, nrws, N);
        this.transform(rws, _, rwst, iwst, N, rbt);
        this.transform(nrws, _, nrwst, niwst, N, rbt);
        for (var i = 0; i < N; i++) {
          var rx = rwst[i] * nrwst[i] - iwst[i] * niwst[i];
          iwst[i] = rwst[i] * niwst[i] + iwst[i] * nrwst[i];
          rwst[i] = rx;
        }
        this.conjugate(rwst, iwst, N);
        this.transform(rwst, iwst, rmws, _, N, rbt);
        this.conjugate(rmws, _, N);
        this.normalize13b(rmws, N);
        out.negative = x.negative ^ y.negative;
        out.length = x.length + y.length;
        return out.strip();
      };
      BN.prototype.mul = function mul(num) {
        var out = new BN(null);
        out.words = new Array(this.length + num.length);
        return this.mulTo(num, out);
      };
      BN.prototype.mulf = function mulf(num) {
        var out = new BN(null);
        out.words = new Array(this.length + num.length);
        return jumboMulTo(this, num, out);
      };
      BN.prototype.imul = function imul(num) {
        return this.clone().mulTo(num, this);
      };
      BN.prototype.imuln = function imuln(num) {
        assert(typeof num === "number");
        assert(num < 67108864);
        var carry = 0;
        for (var i = 0; i < this.length; i++) {
          var w = (this.words[i] | 0) * num;
          var lo = (w & 67108863) + (carry & 67108863);
          carry >>= 26;
          carry += w / 67108864 | 0;
          carry += lo >>> 26;
          this.words[i] = lo & 67108863;
        }
        if (carry !== 0) {
          this.words[i] = carry;
          this.length++;
        }
        return this;
      };
      BN.prototype.muln = function muln(num) {
        return this.clone().imuln(num);
      };
      BN.prototype.sqr = function sqr() {
        return this.mul(this);
      };
      BN.prototype.isqr = function isqr() {
        return this.imul(this.clone());
      };
      BN.prototype.pow = function pow(num) {
        var w = toBitArray(num);
        if (w.length === 0)
          return new BN(1);
        var res = this;
        for (var i = 0; i < w.length; i++, res = res.sqr()) {
          if (w[i] !== 0)
            break;
        }
        if (++i < w.length) {
          for (var q2 = res.sqr(); i < w.length; i++, q2 = q2.sqr()) {
            if (w[i] === 0)
              continue;
            res = res.mul(q2);
          }
        }
        return res;
      };
      BN.prototype.iushln = function iushln(bits) {
        assert(typeof bits === "number" && bits >= 0);
        var r = bits % 26;
        var s = (bits - r) / 26;
        var carryMask = 67108863 >>> 26 - r << 26 - r;
        var i;
        if (r !== 0) {
          var carry = 0;
          for (i = 0; i < this.length; i++) {
            var newCarry = this.words[i] & carryMask;
            var c = (this.words[i] | 0) - newCarry << r;
            this.words[i] = c | carry;
            carry = newCarry >>> 26 - r;
          }
          if (carry) {
            this.words[i] = carry;
            this.length++;
          }
        }
        if (s !== 0) {
          for (i = this.length - 1; i >= 0; i--) {
            this.words[i + s] = this.words[i];
          }
          for (i = 0; i < s; i++) {
            this.words[i] = 0;
          }
          this.length += s;
        }
        return this.strip();
      };
      BN.prototype.ishln = function ishln(bits) {
        assert(this.negative === 0);
        return this.iushln(bits);
      };
      BN.prototype.iushrn = function iushrn(bits, hint, extended) {
        assert(typeof bits === "number" && bits >= 0);
        var h;
        if (hint) {
          h = (hint - hint % 26) / 26;
        } else {
          h = 0;
        }
        var r = bits % 26;
        var s = Math.min((bits - r) / 26, this.length);
        var mask = 67108863 ^ 67108863 >>> r << r;
        var maskedWords = extended;
        h -= s;
        h = Math.max(0, h);
        if (maskedWords) {
          for (var i = 0; i < s; i++) {
            maskedWords.words[i] = this.words[i];
          }
          maskedWords.length = s;
        }
        if (s === 0) {
        } else if (this.length > s) {
          this.length -= s;
          for (i = 0; i < this.length; i++) {
            this.words[i] = this.words[i + s];
          }
        } else {
          this.words[0] = 0;
          this.length = 1;
        }
        var carry = 0;
        for (i = this.length - 1; i >= 0 && (carry !== 0 || i >= h); i--) {
          var word = this.words[i] | 0;
          this.words[i] = carry << 26 - r | word >>> r;
          carry = word & mask;
        }
        if (maskedWords && carry !== 0) {
          maskedWords.words[maskedWords.length++] = carry;
        }
        if (this.length === 0) {
          this.words[0] = 0;
          this.length = 1;
        }
        return this.strip();
      };
      BN.prototype.ishrn = function ishrn(bits, hint, extended) {
        assert(this.negative === 0);
        return this.iushrn(bits, hint, extended);
      };
      BN.prototype.shln = function shln(bits) {
        return this.clone().ishln(bits);
      };
      BN.prototype.ushln = function ushln(bits) {
        return this.clone().iushln(bits);
      };
      BN.prototype.shrn = function shrn(bits) {
        return this.clone().ishrn(bits);
      };
      BN.prototype.ushrn = function ushrn(bits) {
        return this.clone().iushrn(bits);
      };
      BN.prototype.testn = function testn(bit) {
        assert(typeof bit === "number" && bit >= 0);
        var r = bit % 26;
        var s = (bit - r) / 26;
        var q2 = 1 << r;
        if (this.length <= s)
          return false;
        var w = this.words[s];
        return !!(w & q2);
      };
      BN.prototype.imaskn = function imaskn(bits) {
        assert(typeof bits === "number" && bits >= 0);
        var r = bits % 26;
        var s = (bits - r) / 26;
        assert(this.negative === 0, "imaskn works only with positive numbers");
        if (this.length <= s) {
          return this;
        }
        if (r !== 0) {
          s++;
        }
        this.length = Math.min(s, this.length);
        if (r !== 0) {
          var mask = 67108863 ^ 67108863 >>> r << r;
          this.words[this.length - 1] &= mask;
        }
        return this.strip();
      };
      BN.prototype.maskn = function maskn(bits) {
        return this.clone().imaskn(bits);
      };
      BN.prototype.iaddn = function iaddn(num) {
        assert(typeof num === "number");
        assert(num < 67108864);
        if (num < 0)
          return this.isubn(-num);
        if (this.negative !== 0) {
          if (this.length === 1 && (this.words[0] | 0) < num) {
            this.words[0] = num - (this.words[0] | 0);
            this.negative = 0;
            return this;
          }
          this.negative = 0;
          this.isubn(num);
          this.negative = 1;
          return this;
        }
        return this._iaddn(num);
      };
      BN.prototype._iaddn = function _iaddn(num) {
        this.words[0] += num;
        for (var i = 0; i < this.length && this.words[i] >= 67108864; i++) {
          this.words[i] -= 67108864;
          if (i === this.length - 1) {
            this.words[i + 1] = 1;
          } else {
            this.words[i + 1]++;
          }
        }
        this.length = Math.max(this.length, i + 1);
        return this;
      };
      BN.prototype.isubn = function isubn(num) {
        assert(typeof num === "number");
        assert(num < 67108864);
        if (num < 0)
          return this.iaddn(-num);
        if (this.negative !== 0) {
          this.negative = 0;
          this.iaddn(num);
          this.negative = 1;
          return this;
        }
        this.words[0] -= num;
        if (this.length === 1 && this.words[0] < 0) {
          this.words[0] = -this.words[0];
          this.negative = 1;
        } else {
          for (var i = 0; i < this.length && this.words[i] < 0; i++) {
            this.words[i] += 67108864;
            this.words[i + 1] -= 1;
          }
        }
        return this.strip();
      };
      BN.prototype.addn = function addn(num) {
        return this.clone().iaddn(num);
      };
      BN.prototype.subn = function subn(num) {
        return this.clone().isubn(num);
      };
      BN.prototype.iabs = function iabs() {
        this.negative = 0;
        return this;
      };
      BN.prototype.abs = function abs() {
        return this.clone().iabs();
      };
      BN.prototype._ishlnsubmul = function _ishlnsubmul(num, mul, shift) {
        var len = num.length + shift;
        var i;
        this._expand(len);
        var w;
        var carry = 0;
        for (i = 0; i < num.length; i++) {
          w = (this.words[i + shift] | 0) + carry;
          var right = (num.words[i] | 0) * mul;
          w -= right & 67108863;
          carry = (w >> 26) - (right / 67108864 | 0);
          this.words[i + shift] = w & 67108863;
        }
        for (; i < this.length - shift; i++) {
          w = (this.words[i + shift] | 0) + carry;
          carry = w >> 26;
          this.words[i + shift] = w & 67108863;
        }
        if (carry === 0)
          return this.strip();
        assert(carry === -1);
        carry = 0;
        for (i = 0; i < this.length; i++) {
          w = -(this.words[i] | 0) + carry;
          carry = w >> 26;
          this.words[i] = w & 67108863;
        }
        this.negative = 1;
        return this.strip();
      };
      BN.prototype._wordDiv = function _wordDiv(num, mode) {
        var shift = this.length - num.length;
        var a = this.clone();
        var b = num;
        var bhi = b.words[b.length - 1] | 0;
        var bhiBits = this._countBits(bhi);
        shift = 26 - bhiBits;
        if (shift !== 0) {
          b = b.ushln(shift);
          a.iushln(shift);
          bhi = b.words[b.length - 1] | 0;
        }
        var m = a.length - b.length;
        var q2;
        if (mode !== "mod") {
          q2 = new BN(null);
          q2.length = m + 1;
          q2.words = new Array(q2.length);
          for (var i = 0; i < q2.length; i++) {
            q2.words[i] = 0;
          }
        }
        var diff = a.clone()._ishlnsubmul(b, 1, m);
        if (diff.negative === 0) {
          a = diff;
          if (q2) {
            q2.words[m] = 1;
          }
        }
        for (var j2 = m - 1; j2 >= 0; j2--) {
          var qj = (a.words[b.length + j2] | 0) * 67108864 + (a.words[b.length + j2 - 1] | 0);
          qj = Math.min(qj / bhi | 0, 67108863);
          a._ishlnsubmul(b, qj, j2);
          while (a.negative !== 0) {
            qj--;
            a.negative = 0;
            a._ishlnsubmul(b, 1, j2);
            if (!a.isZero()) {
              a.negative ^= 1;
            }
          }
          if (q2) {
            q2.words[j2] = qj;
          }
        }
        if (q2) {
          q2.strip();
        }
        a.strip();
        if (mode !== "div" && shift !== 0) {
          a.iushrn(shift);
        }
        return {
          div: q2 || null,
          mod: a
        };
      };
      BN.prototype.divmod = function divmod(num, mode, positive) {
        assert(!num.isZero());
        if (this.isZero()) {
          return {
            div: new BN(0),
            mod: new BN(0)
          };
        }
        var div, mod, res;
        if (this.negative !== 0 && num.negative === 0) {
          res = this.neg().divmod(num, mode);
          if (mode !== "mod") {
            div = res.div.neg();
          }
          if (mode !== "div") {
            mod = res.mod.neg();
            if (positive && mod.negative !== 0) {
              mod.iadd(num);
            }
          }
          return {
            div,
            mod
          };
        }
        if (this.negative === 0 && num.negative !== 0) {
          res = this.divmod(num.neg(), mode);
          if (mode !== "mod") {
            div = res.div.neg();
          }
          return {
            div,
            mod: res.mod
          };
        }
        if ((this.negative & num.negative) !== 0) {
          res = this.neg().divmod(num.neg(), mode);
          if (mode !== "div") {
            mod = res.mod.neg();
            if (positive && mod.negative !== 0) {
              mod.isub(num);
            }
          }
          return {
            div: res.div,
            mod
          };
        }
        if (num.length > this.length || this.cmp(num) < 0) {
          return {
            div: new BN(0),
            mod: this
          };
        }
        if (num.length === 1) {
          if (mode === "div") {
            return {
              div: this.divn(num.words[0]),
              mod: null
            };
          }
          if (mode === "mod") {
            return {
              div: null,
              mod: new BN(this.modn(num.words[0]))
            };
          }
          return {
            div: this.divn(num.words[0]),
            mod: new BN(this.modn(num.words[0]))
          };
        }
        return this._wordDiv(num, mode);
      };
      BN.prototype.div = function div(num) {
        return this.divmod(num, "div", false).div;
      };
      BN.prototype.mod = function mod(num) {
        return this.divmod(num, "mod", false).mod;
      };
      BN.prototype.umod = function umod(num) {
        return this.divmod(num, "mod", true).mod;
      };
      BN.prototype.divRound = function divRound(num) {
        var dm = this.divmod(num);
        if (dm.mod.isZero())
          return dm.div;
        var mod = dm.div.negative !== 0 ? dm.mod.isub(num) : dm.mod;
        var half = num.ushrn(1);
        var r2 = num.andln(1);
        var cmp = mod.cmp(half);
        if (cmp < 0 || r2 === 1 && cmp === 0)
          return dm.div;
        return dm.div.negative !== 0 ? dm.div.isubn(1) : dm.div.iaddn(1);
      };
      BN.prototype.modn = function modn(num) {
        assert(num <= 67108863);
        var p2 = (1 << 26) % num;
        var acc = 0;
        for (var i = this.length - 1; i >= 0; i--) {
          acc = (p2 * acc + (this.words[i] | 0)) % num;
        }
        return acc;
      };
      BN.prototype.idivn = function idivn(num) {
        assert(num <= 67108863);
        var carry = 0;
        for (var i = this.length - 1; i >= 0; i--) {
          var w = (this.words[i] | 0) + carry * 67108864;
          this.words[i] = w / num | 0;
          carry = w % num;
        }
        return this.strip();
      };
      BN.prototype.divn = function divn(num) {
        return this.clone().idivn(num);
      };
      BN.prototype.egcd = function egcd(p2) {
        assert(p2.negative === 0);
        assert(!p2.isZero());
        var x = this;
        var y = p2.clone();
        if (x.negative !== 0) {
          x = x.umod(p2);
        } else {
          x = x.clone();
        }
        var A = new BN(1);
        var B = new BN(0);
        var C = new BN(0);
        var D2 = new BN(1);
        var g = 0;
        while (x.isEven() && y.isEven()) {
          x.iushrn(1);
          y.iushrn(1);
          ++g;
        }
        var yp = y.clone();
        var xp = x.clone();
        while (!x.isZero()) {
          for (var i = 0, im = 1; (x.words[0] & im) === 0 && i < 26; ++i, im <<= 1)
            ;
          if (i > 0) {
            x.iushrn(i);
            while (i-- > 0) {
              if (A.isOdd() || B.isOdd()) {
                A.iadd(yp);
                B.isub(xp);
              }
              A.iushrn(1);
              B.iushrn(1);
            }
          }
          for (var j2 = 0, jm = 1; (y.words[0] & jm) === 0 && j2 < 26; ++j2, jm <<= 1)
            ;
          if (j2 > 0) {
            y.iushrn(j2);
            while (j2-- > 0) {
              if (C.isOdd() || D2.isOdd()) {
                C.iadd(yp);
                D2.isub(xp);
              }
              C.iushrn(1);
              D2.iushrn(1);
            }
          }
          if (x.cmp(y) >= 0) {
            x.isub(y);
            A.isub(C);
            B.isub(D2);
          } else {
            y.isub(x);
            C.isub(A);
            D2.isub(B);
          }
        }
        return {
          a: C,
          b: D2,
          gcd: y.iushln(g)
        };
      };
      BN.prototype._invmp = function _invmp(p2) {
        assert(p2.negative === 0);
        assert(!p2.isZero());
        var a = this;
        var b = p2.clone();
        if (a.negative !== 0) {
          a = a.umod(p2);
        } else {
          a = a.clone();
        }
        var x1 = new BN(1);
        var x2 = new BN(0);
        var delta = b.clone();
        while (a.cmpn(1) > 0 && b.cmpn(1) > 0) {
          for (var i = 0, im = 1; (a.words[0] & im) === 0 && i < 26; ++i, im <<= 1)
            ;
          if (i > 0) {
            a.iushrn(i);
            while (i-- > 0) {
              if (x1.isOdd()) {
                x1.iadd(delta);
              }
              x1.iushrn(1);
            }
          }
          for (var j2 = 0, jm = 1; (b.words[0] & jm) === 0 && j2 < 26; ++j2, jm <<= 1)
            ;
          if (j2 > 0) {
            b.iushrn(j2);
            while (j2-- > 0) {
              if (x2.isOdd()) {
                x2.iadd(delta);
              }
              x2.iushrn(1);
            }
          }
          if (a.cmp(b) >= 0) {
            a.isub(b);
            x1.isub(x2);
          } else {
            b.isub(a);
            x2.isub(x1);
          }
        }
        var res;
        if (a.cmpn(1) === 0) {
          res = x1;
        } else {
          res = x2;
        }
        if (res.cmpn(0) < 0) {
          res.iadd(p2);
        }
        return res;
      };
      BN.prototype.gcd = function gcd(num) {
        if (this.isZero())
          return num.abs();
        if (num.isZero())
          return this.abs();
        var a = this.clone();
        var b = num.clone();
        a.negative = 0;
        b.negative = 0;
        for (var shift = 0; a.isEven() && b.isEven(); shift++) {
          a.iushrn(1);
          b.iushrn(1);
        }
        do {
          while (a.isEven()) {
            a.iushrn(1);
          }
          while (b.isEven()) {
            b.iushrn(1);
          }
          var r = a.cmp(b);
          if (r < 0) {
            var t = a;
            a = b;
            b = t;
          } else if (r === 0 || b.cmpn(1) === 0) {
            break;
          }
          a.isub(b);
        } while (true);
        return b.iushln(shift);
      };
      BN.prototype.invm = function invm(num) {
        return this.egcd(num).a.umod(num);
      };
      BN.prototype.isEven = function isEven() {
        return (this.words[0] & 1) === 0;
      };
      BN.prototype.isOdd = function isOdd() {
        return (this.words[0] & 1) === 1;
      };
      BN.prototype.andln = function andln(num) {
        return this.words[0] & num;
      };
      BN.prototype.bincn = function bincn(bit) {
        assert(typeof bit === "number");
        var r = bit % 26;
        var s = (bit - r) / 26;
        var q2 = 1 << r;
        if (this.length <= s) {
          this._expand(s + 1);
          this.words[s] |= q2;
          return this;
        }
        var carry = q2;
        for (var i = s; carry !== 0 && i < this.length; i++) {
          var w = this.words[i] | 0;
          w += carry;
          carry = w >>> 26;
          w &= 67108863;
          this.words[i] = w;
        }
        if (carry !== 0) {
          this.words[i] = carry;
          this.length++;
        }
        return this;
      };
      BN.prototype.isZero = function isZero() {
        return this.length === 1 && this.words[0] === 0;
      };
      BN.prototype.cmpn = function cmpn(num) {
        var negative = num < 0;
        if (this.negative !== 0 && !negative)
          return -1;
        if (this.negative === 0 && negative)
          return 1;
        this.strip();
        var res;
        if (this.length > 1) {
          res = 1;
        } else {
          if (negative) {
            num = -num;
          }
          assert(num <= 67108863, "Number is too big");
          var w = this.words[0] | 0;
          res = w === num ? 0 : w < num ? -1 : 1;
        }
        if (this.negative !== 0)
          return -res | 0;
        return res;
      };
      BN.prototype.cmp = function cmp(num) {
        if (this.negative !== 0 && num.negative === 0)
          return -1;
        if (this.negative === 0 && num.negative !== 0)
          return 1;
        var res = this.ucmp(num);
        if (this.negative !== 0)
          return -res | 0;
        return res;
      };
      BN.prototype.ucmp = function ucmp(num) {
        if (this.length > num.length)
          return 1;
        if (this.length < num.length)
          return -1;
        var res = 0;
        for (var i = this.length - 1; i >= 0; i--) {
          var a = this.words[i] | 0;
          var b = num.words[i] | 0;
          if (a === b)
            continue;
          if (a < b) {
            res = -1;
          } else if (a > b) {
            res = 1;
          }
          break;
        }
        return res;
      };
      BN.prototype.gtn = function gtn(num) {
        return this.cmpn(num) === 1;
      };
      BN.prototype.gt = function gt(num) {
        return this.cmp(num) === 1;
      };
      BN.prototype.gten = function gten(num) {
        return this.cmpn(num) >= 0;
      };
      BN.prototype.gte = function gte(num) {
        return this.cmp(num) >= 0;
      };
      BN.prototype.ltn = function ltn(num) {
        return this.cmpn(num) === -1;
      };
      BN.prototype.lt = function lt(num) {
        return this.cmp(num) === -1;
      };
      BN.prototype.lten = function lten(num) {
        return this.cmpn(num) <= 0;
      };
      BN.prototype.lte = function lte(num) {
        return this.cmp(num) <= 0;
      };
      BN.prototype.eqn = function eqn(num) {
        return this.cmpn(num) === 0;
      };
      BN.prototype.eq = function eq(num) {
        return this.cmp(num) === 0;
      };
      BN.red = function red(num) {
        return new Red(num);
      };
      BN.prototype.toRed = function toRed(ctx) {
        assert(!this.red, "Already a number in reduction context");
        assert(this.negative === 0, "red works only with positives");
        return ctx.convertTo(this)._forceRed(ctx);
      };
      BN.prototype.fromRed = function fromRed() {
        assert(this.red, "fromRed works only with numbers in reduction context");
        return this.red.convertFrom(this);
      };
      BN.prototype._forceRed = function _forceRed(ctx) {
        this.red = ctx;
        return this;
      };
      BN.prototype.forceRed = function forceRed(ctx) {
        assert(!this.red, "Already a number in reduction context");
        return this._forceRed(ctx);
      };
      BN.prototype.redAdd = function redAdd(num) {
        assert(this.red, "redAdd works only with red numbers");
        return this.red.add(this, num);
      };
      BN.prototype.redIAdd = function redIAdd(num) {
        assert(this.red, "redIAdd works only with red numbers");
        return this.red.iadd(this, num);
      };
      BN.prototype.redSub = function redSub(num) {
        assert(this.red, "redSub works only with red numbers");
        return this.red.sub(this, num);
      };
      BN.prototype.redISub = function redISub(num) {
        assert(this.red, "redISub works only with red numbers");
        return this.red.isub(this, num);
      };
      BN.prototype.redShl = function redShl(num) {
        assert(this.red, "redShl works only with red numbers");
        return this.red.shl(this, num);
      };
      BN.prototype.redMul = function redMul(num) {
        assert(this.red, "redMul works only with red numbers");
        this.red._verify2(this, num);
        return this.red.mul(this, num);
      };
      BN.prototype.redIMul = function redIMul(num) {
        assert(this.red, "redMul works only with red numbers");
        this.red._verify2(this, num);
        return this.red.imul(this, num);
      };
      BN.prototype.redSqr = function redSqr() {
        assert(this.red, "redSqr works only with red numbers");
        this.red._verify1(this);
        return this.red.sqr(this);
      };
      BN.prototype.redISqr = function redISqr() {
        assert(this.red, "redISqr works only with red numbers");
        this.red._verify1(this);
        return this.red.isqr(this);
      };
      BN.prototype.redSqrt = function redSqrt() {
        assert(this.red, "redSqrt works only with red numbers");
        this.red._verify1(this);
        return this.red.sqrt(this);
      };
      BN.prototype.redInvm = function redInvm() {
        assert(this.red, "redInvm works only with red numbers");
        this.red._verify1(this);
        return this.red.invm(this);
      };
      BN.prototype.redNeg = function redNeg() {
        assert(this.red, "redNeg works only with red numbers");
        this.red._verify1(this);
        return this.red.neg(this);
      };
      BN.prototype.redPow = function redPow(num) {
        assert(this.red && !num.red, "redPow(normalNum)");
        this.red._verify1(this);
        return this.red.pow(this, num);
      };
      var primes = {
        k256: null,
        p224: null,
        p192: null,
        p25519: null
      };
      function MPrime(name, p2) {
        this.name = name;
        this.p = new BN(p2, 16);
        this.n = this.p.bitLength();
        this.k = new BN(1).iushln(this.n).isub(this.p);
        this.tmp = this._tmp();
      }
      MPrime.prototype._tmp = function _tmp() {
        var tmp = new BN(null);
        tmp.words = new Array(Math.ceil(this.n / 13));
        return tmp;
      };
      MPrime.prototype.ireduce = function ireduce(num) {
        var r = num;
        var rlen;
        do {
          this.split(r, this.tmp);
          r = this.imulK(r);
          r = r.iadd(this.tmp);
          rlen = r.bitLength();
        } while (rlen > this.n);
        var cmp = rlen < this.n ? -1 : r.ucmp(this.p);
        if (cmp === 0) {
          r.words[0] = 0;
          r.length = 1;
        } else if (cmp > 0) {
          r.isub(this.p);
        } else {
          r.strip();
        }
        return r;
      };
      MPrime.prototype.split = function split(input, out) {
        input.iushrn(this.n, 0, out);
      };
      MPrime.prototype.imulK = function imulK(num) {
        return num.imul(this.k);
      };
      function K256() {
        MPrime.call(
          this,
          "k256",
          "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f"
        );
      }
      inherits(K256, MPrime);
      K256.prototype.split = function split(input, output) {
        var mask = 4194303;
        var outLen = Math.min(input.length, 9);
        for (var i = 0; i < outLen; i++) {
          output.words[i] = input.words[i];
        }
        output.length = outLen;
        if (input.length <= 9) {
          input.words[0] = 0;
          input.length = 1;
          return;
        }
        var prev = input.words[9];
        output.words[output.length++] = prev & mask;
        for (i = 10; i < input.length; i++) {
          var next = input.words[i] | 0;
          input.words[i - 10] = (next & mask) << 4 | prev >>> 22;
          prev = next;
        }
        prev >>>= 22;
        input.words[i - 10] = prev;
        if (prev === 0 && input.length > 10) {
          input.length -= 10;
        } else {
          input.length -= 9;
        }
      };
      K256.prototype.imulK = function imulK(num) {
        num.words[num.length] = 0;
        num.words[num.length + 1] = 0;
        num.length += 2;
        var lo = 0;
        for (var i = 0; i < num.length; i++) {
          var w = num.words[i] | 0;
          lo += w * 977;
          num.words[i] = lo & 67108863;
          lo = w * 64 + (lo / 67108864 | 0);
        }
        if (num.words[num.length - 1] === 0) {
          num.length--;
          if (num.words[num.length - 1] === 0) {
            num.length--;
          }
        }
        return num;
      };
      function P224() {
        MPrime.call(
          this,
          "p224",
          "ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001"
        );
      }
      inherits(P224, MPrime);
      function P192() {
        MPrime.call(
          this,
          "p192",
          "ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff"
        );
      }
      inherits(P192, MPrime);
      function P25519() {
        MPrime.call(
          this,
          "25519",
          "7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed"
        );
      }
      inherits(P25519, MPrime);
      P25519.prototype.imulK = function imulK(num) {
        var carry = 0;
        for (var i = 0; i < num.length; i++) {
          var hi = (num.words[i] | 0) * 19 + carry;
          var lo = hi & 67108863;
          hi >>>= 26;
          num.words[i] = lo;
          carry = hi;
        }
        if (carry !== 0) {
          num.words[num.length++] = carry;
        }
        return num;
      };
      BN._prime = function prime(name) {
        if (primes[name])
          return primes[name];
        var prime2;
        if (name === "k256") {
          prime2 = new K256();
        } else if (name === "p224") {
          prime2 = new P224();
        } else if (name === "p192") {
          prime2 = new P192();
        } else if (name === "p25519") {
          prime2 = new P25519();
        } else {
          throw new Error("Unknown prime " + name);
        }
        primes[name] = prime2;
        return prime2;
      };
      function Red(m) {
        if (typeof m === "string") {
          var prime = BN._prime(m);
          this.m = prime.p;
          this.prime = prime;
        } else {
          assert(m.gtn(1), "modulus must be greater than 1");
          this.m = m;
          this.prime = null;
        }
      }
      Red.prototype._verify1 = function _verify1(a) {
        assert(a.negative === 0, "red works only with positives");
        assert(a.red, "red works only with red numbers");
      };
      Red.prototype._verify2 = function _verify2(a, b) {
        assert((a.negative | b.negative) === 0, "red works only with positives");
        assert(
          a.red && a.red === b.red,
          "red works only with red numbers"
        );
      };
      Red.prototype.imod = function imod(a) {
        if (this.prime)
          return this.prime.ireduce(a)._forceRed(this);
        return a.umod(this.m)._forceRed(this);
      };
      Red.prototype.neg = function neg(a) {
        if (a.isZero()) {
          return a.clone();
        }
        return this.m.sub(a)._forceRed(this);
      };
      Red.prototype.add = function add(a, b) {
        this._verify2(a, b);
        var res = a.add(b);
        if (res.cmp(this.m) >= 0) {
          res.isub(this.m);
        }
        return res._forceRed(this);
      };
      Red.prototype.iadd = function iadd(a, b) {
        this._verify2(a, b);
        var res = a.iadd(b);
        if (res.cmp(this.m) >= 0) {
          res.isub(this.m);
        }
        return res;
      };
      Red.prototype.sub = function sub(a, b) {
        this._verify2(a, b);
        var res = a.sub(b);
        if (res.cmpn(0) < 0) {
          res.iadd(this.m);
        }
        return res._forceRed(this);
      };
      Red.prototype.isub = function isub(a, b) {
        this._verify2(a, b);
        var res = a.isub(b);
        if (res.cmpn(0) < 0) {
          res.iadd(this.m);
        }
        return res;
      };
      Red.prototype.shl = function shl(a, num) {
        this._verify1(a);
        return this.imod(a.ushln(num));
      };
      Red.prototype.imul = function imul(a, b) {
        this._verify2(a, b);
        return this.imod(a.imul(b));
      };
      Red.prototype.mul = function mul(a, b) {
        this._verify2(a, b);
        return this.imod(a.mul(b));
      };
      Red.prototype.isqr = function isqr(a) {
        return this.imul(a, a.clone());
      };
      Red.prototype.sqr = function sqr(a) {
        return this.mul(a, a);
      };
      Red.prototype.sqrt = function sqrt(a) {
        if (a.isZero())
          return a.clone();
        var mod3 = this.m.andln(3);
        assert(mod3 % 2 === 1);
        if (mod3 === 3) {
          var pow = this.m.add(new BN(1)).iushrn(2);
          return this.pow(a, pow);
        }
        var q2 = this.m.subn(1);
        var s = 0;
        while (!q2.isZero() && q2.andln(1) === 0) {
          s++;
          q2.iushrn(1);
        }
        assert(!q2.isZero());
        var one = new BN(1).toRed(this);
        var nOne = one.redNeg();
        var lpow = this.m.subn(1).iushrn(1);
        var z2 = this.m.bitLength();
        z2 = new BN(2 * z2 * z2).toRed(this);
        while (this.pow(z2, lpow).cmp(nOne) !== 0) {
          z2.redIAdd(nOne);
        }
        var c = this.pow(z2, q2);
        var r = this.pow(a, q2.addn(1).iushrn(1));
        var t = this.pow(a, q2);
        var m = s;
        while (t.cmp(one) !== 0) {
          var tmp = t;
          for (var i = 0; tmp.cmp(one) !== 0; i++) {
            tmp = tmp.redSqr();
          }
          assert(i < m);
          var b = this.pow(c, new BN(1).iushln(m - i - 1));
          r = r.redMul(b);
          c = b.redSqr();
          t = t.redMul(c);
          m = i;
        }
        return r;
      };
      Red.prototype.invm = function invm(a) {
        var inv = a._invmp(this.m);
        if (inv.negative !== 0) {
          inv.negative = 0;
          return this.imod(inv).redNeg();
        } else {
          return this.imod(inv);
        }
      };
      Red.prototype.pow = function pow(a, num) {
        if (num.isZero())
          return new BN(1);
        if (num.cmpn(1) === 0)
          return a.clone();
        var windowSize = 4;
        var wnd = new Array(1 << windowSize);
        wnd[0] = new BN(1).toRed(this);
        wnd[1] = a;
        for (var i = 2; i < wnd.length; i++) {
          wnd[i] = this.mul(wnd[i - 1], a);
        }
        var res = wnd[0];
        var current = 0;
        var currentLen = 0;
        var start = num.bitLength() % 26;
        if (start === 0) {
          start = 26;
        }
        for (i = num.length - 1; i >= 0; i--) {
          var word = num.words[i];
          for (var j2 = start - 1; j2 >= 0; j2--) {
            var bit = word >> j2 & 1;
            if (res !== wnd[0]) {
              res = this.sqr(res);
            }
            if (bit === 0 && current === 0) {
              currentLen = 0;
              continue;
            }
            current <<= 1;
            current |= bit;
            currentLen++;
            if (currentLen !== windowSize && (i !== 0 || j2 !== 0))
              continue;
            res = this.mul(res, wnd[current]);
            currentLen = 0;
            current = 0;
          }
          start = 26;
        }
        return res;
      };
      Red.prototype.convertTo = function convertTo(num) {
        var r = num.umod(this.m);
        return r === num ? r.clone() : r;
      };
      Red.prototype.convertFrom = function convertFrom(num) {
        var res = num.clone();
        res.red = null;
        return res;
      };
      BN.mont = function mont(num) {
        return new Mont(num);
      };
      function Mont(m) {
        Red.call(this, m);
        this.shift = this.m.bitLength();
        if (this.shift % 26 !== 0) {
          this.shift += 26 - this.shift % 26;
        }
        this.r = new BN(1).iushln(this.shift);
        this.r2 = this.imod(this.r.sqr());
        this.rinv = this.r._invmp(this.m);
        this.minv = this.rinv.mul(this.r).isubn(1).div(this.m);
        this.minv = this.minv.umod(this.r);
        this.minv = this.r.sub(this.minv);
      }
      inherits(Mont, Red);
      Mont.prototype.convertTo = function convertTo(num) {
        return this.imod(num.ushln(this.shift));
      };
      Mont.prototype.convertFrom = function convertFrom(num) {
        var r = this.imod(num.mul(this.rinv));
        r.red = null;
        return r;
      };
      Mont.prototype.imul = function imul(a, b) {
        if (a.isZero() || b.isZero()) {
          a.words[0] = 0;
          a.length = 1;
          return a;
        }
        var t = a.imul(b);
        var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);
        var u = t.isub(c).iushrn(this.shift);
        var res = u;
        if (u.cmp(this.m) >= 0) {
          res = u.isub(this.m);
        } else if (u.cmpn(0) < 0) {
          res = u.iadd(this.m);
        }
        return res._forceRed(this);
      };
      Mont.prototype.mul = function mul(a, b) {
        if (a.isZero() || b.isZero())
          return new BN(0)._forceRed(this);
        var t = a.mul(b);
        var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);
        var u = t.isub(c).iushrn(this.shift);
        var res = u;
        if (u.cmp(this.m) >= 0) {
          res = u.isub(this.m);
        } else if (u.cmpn(0) < 0) {
          res = u.iadd(this.m);
        }
        return res._forceRed(this);
      };
      Mont.prototype.invm = function invm(a) {
        var res = this.imod(a._invmp(this.m).mul(this.r2));
        return res._forceRed(this);
      };
    })(typeof module === "undefined" || module, exports);
  }
});

// node_modules/is-hex-prefixed/src/index.js
var require_src = __commonJS({
  "node_modules/is-hex-prefixed/src/index.js"(exports, module) {
    module.exports = function isHexPrefixed(str) {
      if (typeof str !== "string") {
        throw new Error("[is-hex-prefixed] value must be type 'string', is currently type " + typeof str + ", while checking isHexPrefixed.");
      }
      return str.slice(0, 2) === "0x";
    };
  }
});

// node_modules/strip-hex-prefix/src/index.js
var require_src2 = __commonJS({
  "node_modules/strip-hex-prefix/src/index.js"(exports, module) {
    var isHexPrefixed = require_src();
    module.exports = function stripHexPrefix(str) {
      if (typeof str !== "string") {
        return str;
      }
      return isHexPrefixed(str) ? str.slice(2) : str;
    };
  }
});

// node_modules/number-to-bn/src/index.js
var require_src3 = __commonJS({
  "node_modules/number-to-bn/src/index.js"(exports, module) {
    var BN = require_bn3();
    var stripHexPrefix = require_src2();
    module.exports = function numberToBN(arg) {
      if (typeof arg === "string" || typeof arg === "number") {
        var multiplier = new BN(1);
        var formattedString = String(arg).toLowerCase().trim();
        var isHexPrefixed = formattedString.substr(0, 2) === "0x" || formattedString.substr(0, 3) === "-0x";
        var stringArg = stripHexPrefix(formattedString);
        if (stringArg.substr(0, 1) === "-") {
          stringArg = stripHexPrefix(stringArg.slice(1));
          multiplier = new BN(-1, 10);
        }
        stringArg = stringArg === "" ? "0" : stringArg;
        if (!stringArg.match(/^-?[0-9]+$/) && stringArg.match(/^[0-9A-Fa-f]+$/) || stringArg.match(/^[a-fA-F]+$/) || isHexPrefixed === true && stringArg.match(/^[0-9A-Fa-f]+$/)) {
          return new BN(stringArg, 16).mul(multiplier);
        }
        if ((stringArg.match(/^-?[0-9]+$/) || stringArg === "") && isHexPrefixed === false) {
          return new BN(stringArg, 10).mul(multiplier);
        }
      } else if (typeof arg === "object" && arg.toString && (!arg.pop && !arg.push)) {
        if (arg.toString(10).match(/^-?[0-9]+$/) && (arg.mul || arg.dividedToIntegerBy)) {
          return new BN(arg.toString(10), 10);
        }
      }
      throw new Error("[number-to-bn] while converting number " + JSON.stringify(arg) + " to BN.js instance, error: invalid number value. Value must be an integer, hex string, BN or BigNumber instance. Note, decimals are not supported.");
    };
  }
});

// node_modules/ethjs-unit/lib/index.js
var require_lib = __commonJS({
  "node_modules/ethjs-unit/lib/index.js"(exports, module) {
    "use strict";
    var BN = require_bn2();
    var numberToBN = require_src3();
    var zero = new BN(0);
    var negative1 = new BN(-1);
    var unitMap = {
      "noether": "0",
      "wei": "1",
      "kwei": "1000",
      "Kwei": "1000",
      "babbage": "1000",
      "femtoether": "1000",
      "mwei": "1000000",
      "Mwei": "1000000",
      "lovelace": "1000000",
      "picoether": "1000000",
      "gwei": "1000000000",
      "Gwei": "1000000000",
      "shannon": "1000000000",
      "nanoether": "1000000000",
      "nano": "1000000000",
      "szabo": "1000000000000",
      "microether": "1000000000000",
      "micro": "1000000000000",
      "finney": "1000000000000000",
      "milliether": "1000000000000000",
      "milli": "1000000000000000",
      "ether": "1000000000000000000",
      "kether": "1000000000000000000000",
      "grand": "1000000000000000000000",
      "mether": "1000000000000000000000000",
      "gether": "1000000000000000000000000000",
      "tether": "1000000000000000000000000000000"
    };
    function getValueOfUnit(unitInput) {
      var unit = unitInput ? unitInput.toLowerCase() : "ether";
      var unitValue = unitMap[unit];
      if (typeof unitValue !== "string") {
        throw new Error("[ethjs-unit] the unit provided " + unitInput + " doesn't exists, please use the one of the following units " + JSON.stringify(unitMap, null, 2));
      }
      return new BN(unitValue, 10);
    }
    function numberToString(arg) {
      if (typeof arg === "string") {
        if (!arg.match(/^-?[0-9.]+$/)) {
          throw new Error("while converting number to string, invalid number value '" + arg + "', should be a number matching (^-?[0-9.]+).");
        }
        return arg;
      } else if (typeof arg === "number") {
        return String(arg);
      } else if (typeof arg === "object" && arg.toString && (arg.toTwos || arg.dividedToIntegerBy)) {
        if (arg.toPrecision) {
          return String(arg.toPrecision());
        } else {
          return arg.toString(10);
        }
      }
      throw new Error("while converting number to string, invalid number value '" + arg + "' type " + typeof arg + ".");
    }
    function fromWei(weiInput, unit, optionsInput) {
      var wei = numberToBN(weiInput);
      var negative = wei.lt(zero);
      var base = getValueOfUnit(unit);
      var baseLength = unitMap[unit].length - 1 || 1;
      var options = optionsInput || {};
      if (negative) {
        wei = wei.mul(negative1);
      }
      var fraction = wei.mod(base).toString(10);
      while (fraction.length < baseLength) {
        fraction = "0" + fraction;
      }
      if (!options.pad) {
        fraction = fraction.match(/^([0-9]*[1-9]|0)(0*)/)[1];
      }
      var whole = wei.div(base).toString(10);
      if (options.commify) {
        whole = whole.replace(/\B(?=(\d{3})+(?!\d))/g, ",");
      }
      var value = "" + whole + (fraction == "0" ? "" : "." + fraction);
      if (negative) {
        value = "-" + value;
      }
      return value;
    }
    function toWei(etherInput, unit) {
      var ether = numberToString(etherInput);
      var base = getValueOfUnit(unit);
      var baseLength = unitMap[unit].length - 1 || 1;
      var negative = ether.substring(0, 1) === "-";
      if (negative) {
        ether = ether.substring(1);
      }
      if (ether === ".") {
        throw new Error("[ethjs-unit] while converting number " + etherInput + " to wei, invalid value");
      }
      var comps = ether.split(".");
      if (comps.length > 2) {
        throw new Error("[ethjs-unit] while converting number " + etherInput + " to wei,  too many decimal points");
      }
      var whole = comps[0], fraction = comps[1];
      if (!whole) {
        whole = "0";
      }
      if (!fraction) {
        fraction = "0";
      }
      if (fraction.length > baseLength) {
        throw new Error("[ethjs-unit] while converting number " + etherInput + " to wei, too many decimal places");
      }
      while (fraction.length < baseLength) {
        fraction += "0";
      }
      whole = new BN(whole);
      fraction = new BN(fraction);
      var wei = whole.mul(base).add(fraction);
      if (negative) {
        wei = wei.mul(negative1);
      }
      return new BN(wei.toString(10), 10);
    }
    module.exports = {
      unitMap,
      numberToString,
      getValueOfUnit,
      fromWei,
      toWei
    };
  }
});

// node_modules/@particle-network/wallet/esm/index.js
var import_debounce = __toESM(require_debounce());
var import_sha256 = __toESM(require_sha256());
var import_fast_json_stable_stringify = __toESM(require_fast_json_stable_stringify());

// node_modules/@particle-network/wallet/node_modules/uuid/dist/esm-browser/rng.js
var getRandomValues;
var rnds8 = new Uint8Array(16);
function rng() {
  if (!getRandomValues) {
    getRandomValues = typeof crypto !== "undefined" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);
    if (!getRandomValues) {
      throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");
    }
  }
  return getRandomValues(rnds8);
}

// node_modules/@particle-network/wallet/node_modules/uuid/dist/esm-browser/regex.js
var regex_default = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;

// node_modules/@particle-network/wallet/node_modules/uuid/dist/esm-browser/validate.js
function validate(uuid) {
  return typeof uuid === "string" && regex_default.test(uuid);
}
var validate_default = validate;

// node_modules/@particle-network/wallet/node_modules/uuid/dist/esm-browser/stringify.js
var byteToHex = [];
for (let i = 0; i < 256; ++i) {
  byteToHex.push((i + 256).toString(16).slice(1));
}
function unsafeStringify(arr, offset = 0) {
  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + "-" + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + "-" + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + "-" + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + "-" + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];
}

// node_modules/@particle-network/wallet/node_modules/uuid/dist/esm-browser/parse.js
function parse(uuid) {
  if (!validate_default(uuid)) {
    throw TypeError("Invalid UUID");
  }
  let v;
  const arr = new Uint8Array(16);
  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;
  arr[1] = v >>> 16 & 255;
  arr[2] = v >>> 8 & 255;
  arr[3] = v & 255;
  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;
  arr[5] = v & 255;
  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;
  arr[7] = v & 255;
  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;
  arr[9] = v & 255;
  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 1099511627776 & 255;
  arr[11] = v / 4294967296 & 255;
  arr[12] = v >>> 24 & 255;
  arr[13] = v >>> 16 & 255;
  arr[14] = v >>> 8 & 255;
  arr[15] = v & 255;
  return arr;
}
var parse_default = parse;

// node_modules/@particle-network/wallet/node_modules/uuid/dist/esm-browser/v35.js
function stringToBytes(str) {
  str = unescape(encodeURIComponent(str));
  const bytes = [];
  for (let i = 0; i < str.length; ++i) {
    bytes.push(str.charCodeAt(i));
  }
  return bytes;
}
var DNS = "6ba7b810-9dad-11d1-80b4-00c04fd430c8";
var URL = "6ba7b811-9dad-11d1-80b4-00c04fd430c8";
function v35(name, version, hashfunc) {
  function generateUUID(value, namespace, buf, offset) {
    var _namespace;
    if (typeof value === "string") {
      value = stringToBytes(value);
    }
    if (typeof namespace === "string") {
      namespace = parse_default(namespace);
    }
    if (((_namespace = namespace) === null || _namespace === void 0 ? void 0 : _namespace.length) !== 16) {
      throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");
    }
    let bytes = new Uint8Array(16 + value.length);
    bytes.set(namespace);
    bytes.set(value, namespace.length);
    bytes = hashfunc(bytes);
    bytes[6] = bytes[6] & 15 | version;
    bytes[8] = bytes[8] & 63 | 128;
    if (buf) {
      offset = offset || 0;
      for (let i = 0; i < 16; ++i) {
        buf[offset + i] = bytes[i];
      }
      return buf;
    }
    return unsafeStringify(bytes);
  }
  try {
    generateUUID.name = name;
  } catch (err) {
  }
  generateUUID.DNS = DNS;
  generateUUID.URL = URL;
  return generateUUID;
}

// node_modules/@particle-network/wallet/node_modules/uuid/dist/esm-browser/md5.js
function md5(bytes) {
  if (typeof bytes === "string") {
    const msg = unescape(encodeURIComponent(bytes));
    bytes = new Uint8Array(msg.length);
    for (let i = 0; i < msg.length; ++i) {
      bytes[i] = msg.charCodeAt(i);
    }
  }
  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));
}
function md5ToHexEncodedArray(input) {
  const output = [];
  const length32 = input.length * 32;
  const hexTab = "0123456789abcdef";
  for (let i = 0; i < length32; i += 8) {
    const x = input[i >> 5] >>> i % 32 & 255;
    const hex = parseInt(hexTab.charAt(x >>> 4 & 15) + hexTab.charAt(x & 15), 16);
    output.push(hex);
  }
  return output;
}
function getOutputLength(inputLength8) {
  return (inputLength8 + 64 >>> 9 << 4) + 14 + 1;
}
function wordsToMd5(x, len) {
  x[len >> 5] |= 128 << len % 32;
  x[getOutputLength(len) - 1] = len;
  let a = 1732584193;
  let b = -271733879;
  let c = -1732584194;
  let d = 271733878;
  for (let i = 0; i < x.length; i += 16) {
    const olda = a;
    const oldb = b;
    const oldc = c;
    const oldd = d;
    a = md5ff(a, b, c, d, x[i], 7, -680876936);
    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);
    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);
    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);
    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);
    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);
    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);
    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);
    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);
    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);
    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);
    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);
    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);
    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);
    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);
    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);
    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);
    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);
    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);
    b = md5gg(b, c, d, a, x[i], 20, -373897302);
    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);
    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);
    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);
    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);
    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);
    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);
    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);
    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);
    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);
    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);
    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);
    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);
    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);
    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);
    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);
    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);
    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);
    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);
    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);
    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);
    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);
    d = md5hh(d, a, b, c, x[i], 11, -358537222);
    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);
    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);
    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);
    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);
    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);
    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);
    a = md5ii(a, b, c, d, x[i], 6, -198630844);
    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);
    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);
    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);
    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);
    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);
    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);
    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);
    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);
    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);
    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);
    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);
    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);
    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);
    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);
    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);
    a = safeAdd(a, olda);
    b = safeAdd(b, oldb);
    c = safeAdd(c, oldc);
    d = safeAdd(d, oldd);
  }
  return [a, b, c, d];
}
function bytesToWords(input) {
  if (input.length === 0) {
    return [];
  }
  const length8 = input.length * 8;
  const output = new Uint32Array(getOutputLength(length8));
  for (let i = 0; i < length8; i += 8) {
    output[i >> 5] |= (input[i / 8] & 255) << i % 32;
  }
  return output;
}
function safeAdd(x, y) {
  const lsw = (x & 65535) + (y & 65535);
  const msw = (x >> 16) + (y >> 16) + (lsw >> 16);
  return msw << 16 | lsw & 65535;
}
function bitRotateLeft(num, cnt) {
  return num << cnt | num >>> 32 - cnt;
}
function md5cmn(q2, a, b, x, s, t) {
  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q2), safeAdd(x, t)), s), b);
}
function md5ff(a, b, c, d, x, s, t) {
  return md5cmn(b & c | ~b & d, a, b, x, s, t);
}
function md5gg(a, b, c, d, x, s, t) {
  return md5cmn(b & d | c & ~d, a, b, x, s, t);
}
function md5hh(a, b, c, d, x, s, t) {
  return md5cmn(b ^ c ^ d, a, b, x, s, t);
}
function md5ii(a, b, c, d, x, s, t) {
  return md5cmn(c ^ (b | ~d), a, b, x, s, t);
}
var md5_default = md5;

// node_modules/@particle-network/wallet/node_modules/uuid/dist/esm-browser/v3.js
var v3 = v35("v3", 48, md5_default);

// node_modules/@particle-network/wallet/node_modules/uuid/dist/esm-browser/native.js
var randomUUID = typeof crypto !== "undefined" && crypto.randomUUID && crypto.randomUUID.bind(crypto);
var native_default = {
  randomUUID
};

// node_modules/@particle-network/wallet/node_modules/uuid/dist/esm-browser/v4.js
function v4(options, buf, offset) {
  if (native_default.randomUUID && !buf && !options) {
    return native_default.randomUUID();
  }
  options = options || {};
  const rnds = options.random || (options.rng || rng)();
  rnds[6] = rnds[6] & 15 | 64;
  rnds[8] = rnds[8] & 63 | 128;
  if (buf) {
    offset = offset || 0;
    for (let i = 0; i < 16; ++i) {
      buf[offset + i] = rnds[i];
    }
    return buf;
  }
  return unsafeStringify(rnds);
}
var v4_default = v4;

// node_modules/@particle-network/wallet/node_modules/uuid/dist/esm-browser/sha1.js
function f2(s, x, y, z2) {
  switch (s) {
    case 0:
      return x & y ^ ~x & z2;
    case 1:
      return x ^ y ^ z2;
    case 2:
      return x & y ^ x & z2 ^ y & z2;
    case 3:
      return x ^ y ^ z2;
  }
}
function ROTL(x, n) {
  return x << n | x >>> 32 - n;
}
function sha1(bytes) {
  const K2 = [1518500249, 1859775393, 2400959708, 3395469782];
  const H = [1732584193, 4023233417, 2562383102, 271733878, 3285377520];
  if (typeof bytes === "string") {
    const msg = unescape(encodeURIComponent(bytes));
    bytes = [];
    for (let i = 0; i < msg.length; ++i) {
      bytes.push(msg.charCodeAt(i));
    }
  } else if (!Array.isArray(bytes)) {
    bytes = Array.prototype.slice.call(bytes);
  }
  bytes.push(128);
  const l = bytes.length / 4 + 2;
  const N = Math.ceil(l / 16);
  const M = new Array(N);
  for (let i = 0; i < N; ++i) {
    const arr = new Uint32Array(16);
    for (let j2 = 0; j2 < 16; ++j2) {
      arr[j2] = bytes[i * 64 + j2 * 4] << 24 | bytes[i * 64 + j2 * 4 + 1] << 16 | bytes[i * 64 + j2 * 4 + 2] << 8 | bytes[i * 64 + j2 * 4 + 3];
    }
    M[i] = arr;
  }
  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);
  M[N - 1][14] = Math.floor(M[N - 1][14]);
  M[N - 1][15] = (bytes.length - 1) * 8 & 4294967295;
  for (let i = 0; i < N; ++i) {
    const W2 = new Uint32Array(80);
    for (let t = 0; t < 16; ++t) {
      W2[t] = M[i][t];
    }
    for (let t = 16; t < 80; ++t) {
      W2[t] = ROTL(W2[t - 3] ^ W2[t - 8] ^ W2[t - 14] ^ W2[t - 16], 1);
    }
    let a = H[0];
    let b = H[1];
    let c = H[2];
    let d = H[3];
    let e = H[4];
    for (let t = 0; t < 80; ++t) {
      const s = Math.floor(t / 20);
      const T = ROTL(a, 5) + f2(s, b, c, d) + e + K2[s] + W2[t] >>> 0;
      e = d;
      d = c;
      c = ROTL(b, 30) >>> 0;
      b = a;
      a = T;
    }
    H[0] = H[0] + a >>> 0;
    H[1] = H[1] + b >>> 0;
    H[2] = H[2] + c >>> 0;
    H[3] = H[3] + d >>> 0;
    H[4] = H[4] + e >>> 0;
  }
  return [H[0] >> 24 & 255, H[0] >> 16 & 255, H[0] >> 8 & 255, H[0] & 255, H[1] >> 24 & 255, H[1] >> 16 & 255, H[1] >> 8 & 255, H[1] & 255, H[2] >> 24 & 255, H[2] >> 16 & 255, H[2] >> 8 & 255, H[2] & 255, H[3] >> 24 & 255, H[3] >> 16 & 255, H[3] >> 8 & 255, H[3] & 255, H[4] >> 24 & 255, H[4] >> 16 & 255, H[4] >> 8 & 255, H[4] & 255];
}
var sha1_default = sha1;

// node_modules/@particle-network/wallet/node_modules/uuid/dist/esm-browser/v5.js
var v5 = v35("v5", 80, sha1_default);

// node_modules/@particle-network/wallet/esm/index.js
"use client";
var __accessCheck = (obj, member, msg) => {
  if (!member.has(obj))
    throw TypeError("Cannot " + msg);
};
var __privateGet = (obj, member, getter) => {
  __accessCheck(obj, member, "read from private field");
  return getter ? getter.call(obj) : member.get(obj);
};
var __privateAdd = (obj, member, value) => {
  if (member.has(obj))
    throw TypeError("Cannot add the same private member more than once");
  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);
};
var isServer = () => {
  return typeof window === "undefined";
};
function isNullish2(x) {
  return x === void 0 || x === null;
}
var _devEnv;
var _stagingEnv;
var _productionEnv;
var GlobalConfig = class {
  constructor() {
    __privateAdd(this, _devEnv, {
      walletUrl: "https://wallet-debug.particle.network"
    });
    __privateAdd(this, _stagingEnv, {
      walletUrl: "https://wallet-staging.particle.network"
    });
    __privateAdd(this, _productionEnv, {
      walletUrl: "https://wallet.particle.network"
    });
  }
  get env() {
    if (!isServer() && window.__PARTICLE_ENVIRONMENT__ === "development") {
      return __privateGet(this, _devEnv);
    } else if (!isServer() && window.__PARTICLE_ENVIRONMENT__ === "staging") {
      return __privateGet(this, _stagingEnv);
    } else {
      return __privateGet(this, _productionEnv);
    }
  }
};
_devEnv = /* @__PURE__ */ new WeakMap();
_stagingEnv = /* @__PURE__ */ new WeakMap();
_productionEnv = /* @__PURE__ */ new WeakMap();
var globalConfig = new GlobalConfig();
var config_default = globalConfig;
var html = `
  <button class="particle-pwe-btn">
    <img class="particle-pwe-img particle-pwe-wallet-icon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=" alt="" />
    <img class="particle-pwe-img particle-pwe-down-arrow particle-pwe-down-arrow-hide" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=" alt="" />
  </button>
  <div class="particle-pwe-iframe-content">
  </div>
`;
var walletEntryRender = () => {
  const className = "particle-wallet-entry-container";
  const el = document.querySelector("." + className);
  el && el.remove();
  const EL = document.createElement("div");
  EL.classList.add(className);
  EL.innerHTML = html;
  document.body.appendChild(EL);
};
var html_default = walletEntryRender;
var walletIconDarkBase64 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAAAXNSR0IArs4c6QAAIABJREFUeF7dfQlwXdWZ5neenvanXbKNWWRWIxkIiwgTQmwSSIPorsmiOEhqZEjiHjuTiUUcsqjLnqbHrjipqXhipqobd1HdiQWWXY4gSXfaIsGAFDLNopiwWLLxIj0veJFkWct72t67Z+o/9913t3OX9yQZ05dyCVt3Oef+5/+/71/Ofxn+kxxvPHz2E/EgX8bjWAaGag4s5GD5Cud5jLE8hSMfDEWKmC8bUcAjjLFoXFF/KmBnAXZAAT8AKAdq2xa++5/h1bCP4yTerj+9JM6U+znY5xSghoNdT/Pg4g9L/NT+rv4EGFThIvFTfp52feK8w5yx1xWOfZkBtu+h58pOftze18dCwPtXnq5AULkfjN2nKPgcY+xqRYiNhKb9VIXIxX+q8My/N5+nXWc8X71Ofl7i/MOcYR8Utm86Pt351T2XDVzqAr9kBfzKvTxYvvDUgzzAmhTgv3KwHFVougZqGqlqrn8NdtN0iwaL58nOBxBROJ5njLW+u7R035NPMm04l5TMLzkBv//w8Tt5IKOJc9SDsQpdw1w1yyAEfxpsvK9c490tgK7p4nkfgmNnnLNf1O8uff9SkvAlI+BDDR/eE4fyQw72l2aNdNIgdwy13kM1396abtRg7fwEMXO9XrMsnLN/Uxh+0thW+tqlIOiPXMCHHj5RywOBv1XA7zFiplEYMqy1YrBuRo2abjTnzhisEzArptuvtz/H4b4cf+CM/6ixrazjoxT0RyJg/iQPfHDw5BcAtICxO81Y6ovd2giVEwY7Y7aZkGnX29m2E7ZbCZ0DO2fsLYXjR0eXFv/mo8Dpiy7g3lUny4Iz+F8cfC3AAlYWrLNbHQN9sNt5x2Bntu1kGVSXTcyHMUVR+D/yrODfPbqjcOhiavRFEzAHZ331J1crDFs4UOZfU2blxyZxczYYLGfdZkvj5YcnsH0IjP2gaWfRPzMwzSmYV3lfFAH3P9J/ezyW8X/BcLeXf2rWFKNw/bNoWVDD2V92uq/VJVPP8xq/+TlG827iBv8vHlD+5uvPlfXMq3TFiOf56P/rE7Vc4c9ysFIn4pQeu5VjqDWS5Ry58sZg93FZgyIpRcjIfJ9XFPbIN3YX7Z1PEcybgPlKnnE8eHIz5/wHnDFmjhD5Ybdufqic3fph20ZC536++fmpWhYj27ZziOT4OQd+HIoVbfzqHhafD0HPi4D7VvYtyghm7OLACmd2a40Nm82ZXRNTiSXLXSU3jUz6sYZwpbcG6361GYP1YIvb/A337wzEgvVf2xM6M9dCnnMBH3/4+LUsgBcV8Gt1YuMZ4zUkALSX44aNur+aLrv1GyHTgxz+ImSyGLcvy8JxVOF4YM3u4qNzKeQ5FfCJhhMrGPgeDlTYo1F21uknQiTzT9PXLHOGScaOjQTNDzewn+/Xj5di9kCc46G1u4q750rIcybgk43hlYyzVgU826q58+nHyvxmeWTKbBGMsWTnSJbZUvi576z9eM6jPIDH1uws3jMXQp4TAX/YEH4cwFZy6Z3ysTJMtWu5ez7Xj0bNNpbsV4NT9ePtWSoXTVfRYP2atqKfzVbIsxbwmYa+Bs4ynlU4D8wmlmzEOj9+rD+sSz+WbA+f+sPgVNm2UeMtlo6G8OjatqJnZyPkWQn4dH3fvYwFfq8AQZ+RHDFWGXG5ZGPJjvlgo/lOJ0vlw4/niIHxB77ZVvxyukJOW8CnHz5+ZyCD71M4L5Bhk08/MFmRYT/f3Q/2Pn92fqy2CI2WIjXLMmd+/BhjuP+bO4veTEfIaQn4dEN4WYChk3OKKWsa6c+PNbJiZwy2+5GpxZL1sKKTZZBFvLRFYzabzvloc42Xv/k7R9Ycw5pk8YbiCr9rXRouVMoC5isPZA0GQ/sV8GVu/p1zbZR8ZRs1MtUIU6rs1ox1Tv62cZF89H4853h/IF5wx5N72HQqmpyygAcbwj9TwJudNdG/HyjzQ/3HktPRLLsfLDO7fti9e4zb/Tnp+vEK+LZvtxWRx+L7SEnAg/X9X+IMzxsn5yefa9fIuY0lG2uqciuDuKIuhNKabMSiHCM90/iwYwLDPVOmktqMPIbrmwqQUxEQOZfR8AyOd0whMhBLZo00TXeJJc+aQ6Tqx3Owr3y7raDdr4R9C/jcyr5FgSDr5UAxrUB3P1COof7rknWzmYqlKF+Ri2vXFEnn/sH2MZzunBDpvvzKIG7bWIJgnnn6tCDe3jqKoZ5pSX21NRLnZqnc5y+3XK4YbFh0GA7EAtXf8hm39iVgKrE5fzD8OzDcZ2WX6eVZ5z6WHMgL4NanKkCa6XS80TyEiYE47nmmwiZc7ZqZKEfXuvOYjtLMZPlfN3ZsxOrUY+lmSye/XiwOxl46f0PoAT8lQL4EPFzf95jC2L8YsSNVDJJFmFLB4Iy8DJTX5qOiNg8ZeQHEowqG35rE8dZxxKIKSHuvcdBeTXhHW8dBArxxTYGrhXtv+zhOdk4Kbc+tyMDly7OTGnSiawrjA2pmbz5j6XLvxIDtjDU07yzY5WWqPQU88PWDBcGJnGMKeLk7azbUICVXvizv67wynbCahHvNxlLkVmba5hMNz+DgpmEsqM0T2Ot2nOqIYiaiYInHeUfaozjcHsWS2lxUNeXbbvn29gj6OydNOyfkfrnz/P358fagkG4x2Ymp3MllP/jnijG3OXsKeLih72ccaJbHkmV5T+86ZvdIlr0Gq6KuAIvqnLVusGsC0XAMVzW5a2Z/e0S8iyV1dqEZX9KR9ggmBjluXuO8YF7bPIYBKVZ7z18mXCtz9/b7RX5823faClxZtauARx85tjQeZwcAluHElucSg50waNkzi4RZdjv+3DyAW7dVuJ7zzuYLQoNrtpS6nvfm5hEhXDLPTsdgzwz+sHlMyqIvoh8fnwG/6Ym2woNO43QV8IWGvpc58FkjVhqxwQ8GmV0qdRh+/EDjc27eudgLanBw83mEqrIczfTZrgkcfHpMPPvWjcUorsqS3vNc9zR6WyNYsa3E85kvNA75YNv+arWM3oJzhEziXzO27/GdBfenLOBhkUhgr8grH9yzNN67++RhPVr5WZVBEOZODcYwPaAIDbnFh4D/tPqc8HsX1+VjcW2+iU0T9oZ/GRG/p5dH7tHStYWoqCHypB/DvTPY/9MRzESBB3eW+xDweRcNpsuNOyWM3MN5/s5xBSfXixOt/ux3dhW8KhuwowaPNPR1cOABp1iuHSO8Y7FumptbnY3L1pQg02AWIz1TON06CsLgopocxxc+2juNg5voZesvtag6W2jreH8MMwaXx6gp5A+XVGcJl2isP4bRcCyhkRz3P1Pu6ErRU6KDCl5cdwG5FQFcdkcWMvMZpiMcfV3T4n5anCAVP96IzX4wWL83XvxOW8GDvgUceaT/9liMd/NkdbZ9H67b/txUMSi3OgdXbpBrDLlD4a0XULm+WIrD9Hti0ePhGanGeLNVM6vXLNa1dbm43oWM7d8eQV55ADfW5ZreK7lhf26dwNEky7Zqsvr3VGvCnCNeYvyc8/gn10tKfaQaPFrf9yvO8AWZxhmxMRU/1q1S4upti0yaa12Jw11RDOyNYvGqQoGz2jHWO43jO8YQEcJNFeu8/dib14ZwxXK75TjaMYGZCMeNdXmOVuW1rRGc6FbzAnKu4h1Ld+cqFm+D49frdxV80Togm4AjD/ffHg/wbiq/MQ7OSWOda5DURzlFvrTFQZhbuWWhK96Rlr6/+owwn5kVAWRVZCLSP4O4wFSXiI8pWa+d53a+OYlPgyqpzkRpVSbKqjMxEo7heOcURsJxPPRMKTJdombD4ThebBl1nb+3pTP7wdr5Mo7DOTjn/Mbv7i78wPgybQIeE34vZYvssVd7LNnZD/aHQRxknq9wMM/Ggb7TeFrCvo1lNGaGSUTtsto8FFZlYqR3BuQDaxpBfjCx6LHwDI61R0V0y+qHus2/tDoT92wo9CRhbY3DLhrstDvR27LQWO3CFtdte8LiF5sEzP9bd+b4aOkpbtpZL8cQ7x4Xck2xBjlYHsN1z7i7QdODcfSuO5tS741btpQi3xD5IiZ9dMc4rlkVwhUP6qaVYtNvtAxjOqqO1xsbgfLqLHx6g3tQhd7arsZhmwbbOYHTe9LGoxUi+qgJY+xcKJR/xZp/YipmWfcmjTb0fZEBL9hXs17tSBf58WMNDM8Tg67YWI68KrPLYlSPs+1jONM+Lu2eQ5p6RVMBsisyQGz6zN4J5C0JonqD3Y/94+oBfPoZezCkZ/sYzr41hatq81BSlSlY95H2CWGSZf4p/ZuXiY4MKvjNuhExDTlX8Rvxcr/ezm34l55oK/yVVMCRxr5fxTn/gkbR08Vg99olfWVqZiaQl4HKHy9AZrk9cjQRnsHhlkGTZhkxqGpLGfIMmnq+exJnOiakAu5qPIflOxfYTCsJuPyOLCww+MVktjvXncdUQrOtHGRpXa4nyTrZPT0vGCyvYFH1lXO++4ldBfU2AY+tPFzBghmnOJApW3HyygdvDHZmkWYMolBk+aoiFNbkgFJ/M4NxDHdGQdrrNJ786iws3WAPO77bMoSl3y1GtmHBXOidxjubLuBai4mm4Mdr64Zw7zN2N+2NzSOgkKSGeVbLdfvafFwlMk3m4/32CfR3TaOoMoj88gDO9M5gOKwuEf3P3GCwxDsZz41NXPatPQvGTSZ6vOHo40Dg//jBICP7+yj3BhVUZ+MGiYD3N6saf2VdSJjukR4iWTRfdQObIFnVmcLV+aB1HBMDCu7faTfd+7eO4XT3lLQfl6bRRZUZWFSjBjrofn1dU7j+wRzcUGt2r872xNC5NSIsQro1Yd4RQnXRKIx97fs7Qz83CTjScOznHHjUaWeCmx+bnr+cOgaRdl+1tkgEPMZ6pnGidRRL1haZTDTh8IFNw46sWLco5uffsCofVxnIF0W1KCZN6cLCyqBg2gdaozieyBObNVHXzFtX5QkByw5ynX63aTwhZPPznS2d03tyZdu/+F5b6DGrgPs5WKW3BqfB7iQxWSPVl2OKmV2S/3vDFqrY0LNKlAs+snUYi+sKkEUkq2cap/dGRcxZ33tk9QKc/WAiWRU1WaLqo3fHOD65sVgI13j8UZhtjXyZzWx+RQZqt8lLhrR7dLdOoGcv1YdZx2X+uyYH+44Pd+8kYVnC32sLLUkKeKK+b4nCeJ8bO3aPPc++WtGoWbLIT8mKfFwpqdjobjyT7EHpNf5UsjRkyWolCYdD7VEcbFdru6zc4PraHHyiyTm6RXM82xvDi5uMHoFWFpS+dyLr+BfjwatbduX2Cz94vLHvMXD+L5ofmGqExQ82yIrJ3Z9jthREqK7dIOrskwdFsvavpj3T2uZwsx/rXFPlb8/S5yUJB6rm0M20uV66ui4X9MftIAGTmbZH+OSWxug3u3sn6vVJC8zxte/vCv08IeBjuxjHw3YnXB2qPhj1795+sNGM+PMDzRgkY+cMS9aXmLJK/dtHMJiolJSxU3KfqHx2qHsKY+EYLk9g7PGOqGEesg546vPJbfrE2lAyq3SmexpvbtVYvX1ei2uycPd697Kho13T+OPTUal/ne6eLRk7B5jAYSHgSMOxfgCV5jpgq3A1ofnFYPP1Rmz3U62oDdqKQYU12cipzMSF7ilRpmONRRNWl96Rg3Ndk1i2sUSUyBImH2sdww1r1PDiwe1jAmdDV2XiVBdhtjFwb16cORUZAocpBTgTAWrWh5BHzDwcw/6noxgOkxulV1/WPlUkXCOn44XmEYwNqAzBzYI5CM0j9m6yYIe+31ZwI+NNZ/KjsegogIDxpn5jyW6s24+mp19tqU9GwyAiYJ94ivK4AZzvnkJGPkNRVRYmB+M4/PQYbt5QLF7rkdZxXNekatrprkkcSFR6yOavWZbMvAA+91SJKcEQHVDQ0XwhISzV0hVXBnHvxgJpIuI/tkdxpJNqrnXhzsX8ze85uVjjlbH8bDbe2Hcr4/xt1fT6res1J/f9sGBz1sm7y47LvlkLbHBRAVJck41oOI6qjSWimoMiWkeeHkPJndnCD44OxBCqzBRCII2muiyq7DjdRbseYoKdhzuIPJktlWZBSquD+NQGO0N+uWUEF8JxE6bSYqj+Sg5KKoNC0JEBBQc7pnAmwb7NsOfE6p1iz06WVcfgZIQQvIpFG/vqOedtOrY6RVjc9xxpq8gcBLFGbvyybTkGqytf382ovXyKZhVUZ2FqII6j20eRVxnEuc7JRCWHJW+a4BAUACmuVnPLVYk66UOtEfTvNQpZfR49t6AyE8u32AX8r6vVRIVx/sbgDwl4WZ0qbDrGBxS88/wkxgbUJWyPL7jvGzbO38rirRxKYbyBReqPPgnG/k6dilMNkf3f5WbG+frUMdgoZHfLsmxLuQh2EKt+a7WWdZJrhhWzi6ozcUfCdH/QGkHfXiJg8gqWW9cW4EpDaPJoxyTe2UGluDqLN8asSaif3ViALEne+MXN4zjTQ5rvrcF+LKudIFPzyMDfs2jDsVYOPKJrsH3F+6lI0FaWeSV7a3D6GKTDBAU5ypbnYrh7SpTuyFa20Y83+41MaDKZ6+KqoCiVfe/pMVF4J9tLdeWKHOSUMwz2xjAg4tS6H2s9/6+2FSFfbG6zH6T1v2kZw/iAWghoff9O+Wj9/Xp7JwCeZZGGY9TP+AH1AfOHwUaz5QeD3HfdOWO4E4aaNcW+Y4CK7+5IYKy6s0GumfSCqbrjtjXEpgMgovX61nGcD6u7ErXnVK7Iwl1r3Avs32qdxPt7tR0SZgtqfl/p9bHmYC+SgF8HcJcbBsttvXMs2c8OeTNmG1ewfwxyrss2V3r48ePJHfovW9Qdh7TD8Gwy1WeeJ/2+9hlzBouEvLf5gqn3CAU8bvIIepzpjaFjk15pYjezdguYCgYDeIONNxw7yICls8FgPyzan2bJ+1L5sSwyDHIbl+xlknu1eEUOqIHkya4Jg5nWF11ZdRB3S9j0r1cPJ85XMfWG2mzc6hG27OmYwhs7JqQYnk4s3cqhONg7pMEiyDFXGGw0v25+sNlMe2OQDOtStSwyf9GIdaHKID61Ra0E6e+YQO8Oo3apWEtBjxUWNk2Zpt+s1spzVK2jYAhhsNvx8tYIjndTsMZ7/vYwpa9Kj0MkYArmJssavWKk9mCAkQX63fHghKFm/zr1WLJTRMqOYUYN1l4eEax7tqnmlzCYynas74Ouu21tyMSm/7Q9gr5Oyhub53XX2nxcLSkIoPPOh+P41xaKSZvfn2xcdlbv3opKO5+DnSUBE8qLsgT5zeUvXRe0bOe7kx9r//fU/ECnl2HFKjkGm4sT5BpQWp2F7IoATnWqKT3zPPX7EpvOLWc43R3DsCBY8pd+26pcLLXkhynh8MpPI5hMFvo5P8f6fHtWzzmWDo4p8oMnwVii7sTbj021p0Sa+cy08rmGlet5vRMG12wsQkFlEPtNRMucpSKsvqkpX7DoD7tncKRjUqLp+mIgc11SmSFcpjM9Mzgfpj1XVtasejHGalU/3MZ9x0NgymSirebXDUOtGmzEcGd2q6/UVDE4TQyyaJY9kmbEdvKHaxIEilg0CVlmqQiDqd5KO8gf7toszzLRIrjpyzmgYgDNNPd2UJcArUbLf4RQG4vVj5dxi8T7EiY6SbKsGCJbQXPhn8lXprOr5BZhk5ndVPLMZrYKVK8tABW27//pKEYNMWbtOU4smtwkijkbNZMiWQ9ssRfIU5CDkv6qJqeKwcbzncPK6n0DYRZtPHaQc9VNon9y1iy5f+pfsy5ujNseIXP3r2nuNzTli0gW1WJRIZ4Mg8uqs3C3ZFcDZZV0rVRZ9F9sKZSGKekd07m/bKYknrsGy5TOj2VNLPJDLFJ/7HUwNdDhT1Pcshzpd8+xJ7vNKzWVvVF+Ndh4HplnLZJ1qmsS7z5NrS/klSIrthSbTPRg7wxe3aSdr47bjx/8x+0T+ECwb03IZqxP1Y+3yy/whiVUacRIGTtzxzD3lWVl2zqLnUc/0DcGU4TqnqfKTJEsp/mIDeRfyRVCHuiJ4fBeylzpGSW67tPrQ7i8Rt5FQMPuP7dP4s/tVrbuHCGUYa1HFeyLFMlqZYlkg18MdsNQGTt0swwyDPKjgUaNp/roy74cAlVZ9reaNck+HrMFCuQBt6wvRsGSIN7ZOorpiJLAXjvWEXu+vk4VLIUn32uNYsqw2dv4/qrrcjxDlSTgt9uNsWg/fnwqGMyeZZHGvifBuUgXWjHYzQ/UfpcqBtvP988inWLcSzeWoiCxb/i9liHDZnBn4qaNv7g6G7cnmPOHXZN4P1ndYbdgn7GwZ70Ri/E56nusqM7CZze412e1N48my3fs2mnNUvnrT232x9HCxhqP1Ad4QCT8vTDY7Gdaz7f6df7zubPFoIW1IVzZVCBqtE53RFDxmVyc+8OESPpbsT2Z7anLx2XLc3CiY0L8pGQDafBgD23atueDCyozsHyLWvJjPGQVHep8OB7YUoTiSnmnniOi+I4iZapGqsqlPtcce5fLRebHW+XHEfiSpWTHzKLdMNWZbTvFSJ0x2A+2eLFN7R537VwkJkFlObTDYUlTCOPhGI61juPqphAo3kw1WVorJarXem3deQNWy3cMUITrUxL2/HLLaDKSZX1fVM1xz3dDWFBlLp4nP/itHVpttdyCaZbOaCn9vCfj+QxKFeMrD4QmgnkXOLhYak4RFmNFhh8MdvaX5ezYOPhUMdho9q9eW4SK5bn4sCOCnPKgKJulgwR8TaLQbrB7SrQ/XLQ8F8faI+hrj9qS+7KaMNJg404H2um/r+WCtOyGNJdcLsJ0xhhoDxMRsdM9M4Ykv5vr6e5FGDVYBnsKuBJdGsq0lM1aMcs7Rmq8uTeLNg7auyLBzgk4Spbni20qVH812EX1xXbLoC3SihW5uG5NIaYG43h30wXclii0e3/rCAa6NfZqr8jQXx5EbfTCOzJF3dXJrilcXZsrOutQ2WzvL9WUonHeRMDuXJsnqiu1g67d3zqBIyaXKL3521mzfP4cUMtmaRC08Yy+8OGMwX7YnR2DZWbGuQZJryixY5BqWZasLzUVvg91TqBvO5WtmjHMOA9aDJMD8WQihSouNZfGzVKQBaqszTP1qqTrXlp33pQnNs6HqikfeqrIsXfH69ujOJwQcmrehnt/bdn8OaAXvo/XH3mMsYDoJmthYdJYrPU8PxUc7mzbOcukaUeoOgfXSLaKvtc8gMkBrb9Vun68TnR0bWS422KS6d1oe5Po/zVN1+Z/i8vOQjqfNPlX60YTWST3LF1q3obZMtLi4YktpEKDtc1ns8Ng40uyhiW9qzXdY9wMeZK9SeKFbz4vtpI6WQaZH+wWITKef+9Tpci1dB0gAR+S5Inp+bXbShyL7DRz/XtRTakl+c2RK387Pvx5JzM8Q998ljDT/dxU2eE/Rpoqu3PHajM2aYuOCtNvfGqBbfvooU3DwkWiAnfaPnqqPSK65/hl3ZqwKTp1fVMIC+/MFg1LD7ZGEarMwPWWXlhdLSOS/K865rqd7k1OaS6agI2WQvb+UuM25iwdBws/Ydw+quMwe9SYj9QB3W+15VznM831xrmVWVhYF0KoOkto7cnWMVyzvti0AZzI19vNgzaN9qrLrlpbgMWWpmevNg+LZuALa7IEbn/QPiFaCMssAAnpU+tDoA1obsdvW0ZFFsmPH+tmaVSYdOxA+IsnrBvAxxuPNTGOHc4ryy2WLMcwu+tjxPjZYxA1CK/aYu+t0bP5PGIRoLIphKLqLLG7kNwk2nBGJKuyLh+LVuQiFlFAxe7nuidxv6Q5CzUFpz9GVq37mfbxl1dnYoVLeyWq5Pi9aW+wlVjKOYR3XbrFO+Fs1RO7Qq3qEkgc5A9HM3PPKxyZxpVhXynp+GfelSJldQUoXJ6fbGl4oTOKgefHBAM2j0fHINJo6rJjPd5rOY+qjcViE5p20H3ebB7CDWsLhP9rPN5sGcYt3y1EjgVvKW3Yt1eretTmbZ5/YWWGiE1Tm3/ao/SJVXlYIqnDorZK//7DMUyaYtd+skd278R9PzaP8GDBwu+1MtH93NQILVJ/zNCjcm4x2I2dX7VlAbIl7fqphWHfpiFQKyUny1K5thjlBoFRj46T7eOolnXf2TyMWyT9syjYMTmooNrwLQfaT/zGphHTviN9sUMI9aamPJDWaofo4/HLCVw4Hsf1D2ajeElQNGahnpWH9k651GDZs3SpYrD2fjlY0jzbBdzQ90UF/AUtlirfPiHXYDum2Km71TLQ/UvqClBW59wWcHogjkPNZ6URNu1+FIsOVWVirDeGc51RZOQHcNs2u+l+q3kIN28stmnqYbHpLAoKRxZVBRGPAic79bpo3Syrloj83fstW0mNFoG6zR5Kar4RlqwJA7/ehhzOZBgMoHZ9W4h2qyRQ2jAyamUYGSs9yYEFfiImMqLgpGlOrLZy22WunWZpeIdbBjBh6DpnZ+H2xXTt2iIsMGg2dXw/9PQYFq7IxVKDplKcunvTcHITuNv4tbw1pQzdOs2SJv/buhFTNx13Vi+PA/j3NpIcaCC/IHS5YytDepljDUd/BgSaU40lp1tted3Oy11ZJ/2yb/N5jPaoedNUxrVgRR6yygOYGuQ406mFNTkoRUhNSklTT3WqO/xlsWcnrPv0xiKUVdm/AGOcyCubx3DO4O9aK1KMyuEee7djsAu73rberRkp3Yo2hHPO3/aoFBBzkbFLqwbo2CvP0lQ+dZm0haHxZfVtHsKY+DSdxjqtMXKjGUx1XP7y0UYzfd9TJaIZuNvxyuZxnO0x9rH2n2XzZs1mtp2siAmwW9Y/F3rPOC5pQ/Cxxr5f8UTPShH2ShYDOHd+nzcMHozj0LqzWFBXID6MpfXJGuqM4vTzERGm9I5MpRdLz60IYvHybOSWB0QL/zPdM7gQnsEn1xeK7nZux+9EGlHb+Z96LNmt2lJqWTj/9fpdhd4NwWnQF+qP1gRY4E1qCm4WrjUIOewsAAAJp0lEQVRi4uzHyQiaGVPUezHqFruxXMqiVfM8hAVfDiG/2t4Tklg2RbIiYTX4oN0/9brsJIYl77F4Ra70u0nH9k7g9J9m8GmXftEDvTN4JdkqyU/Hd51DGN+3Xwwm3OI8UPOd3fn7rYvO5aMctG+YiY9yOGeZ5FWU7phifJkqplK32fJVhSioyRWNSOmI9E7hzI5R5FG9VZMzy6aIFsWj/WSp/I6L9grfKdlBqL08ikdTrlfWiJQ0nSosx5L+u/z9pYrBrvl4xl58fGcKH+UQZKu+716F4RWr1tn9M7/+sj8MyqwIYspgdq/bUiHaJrkd7zYPiPwwLY5FtXnJ+iwKbtCnZfVd/6rFoWhWeU0OymqyEItwjIXj+FBsF1UrI2s2FIvid6eDzvv31eeFmSYhFy0JIjIQFxWWH+ydTPjOep7ZXROd89kyiyd1XTlS/6wOTW6ksf8lzpX75BhnZXdGouMne6Rfb98aql+/zMc3k0iDKaCgdtixk5/D20dxplONSFGDlmXri0QNlvGgEp/uTRfEp3X+QtJ51irsV5PddXSLpBPK1OYvSw3KWLfUAnFl3+O7ilL/MBYNdrSh70YFeJ8DGfabW6Mv1pWoJQrctzo6s271fks2liHfpRs8jfNAyyCuW18iWgfLDhLeW+sGRded27eUibos2UGx6v9oGcbnJL2j5QLWO8I79dQwCl2+u9FIAM1KIvP3LTs24koGlj3+bOEhJ2vj6+OUDKzZaWeBV5bGrS7Zz8798roCLHT5MCV9z+HEjjFcu95e8WicNCUbIuFYshma0ws5sH0MVz2YK3YYupno366mQr35iCXbLaP2nqyVLhxsW/NsPk5Jj9I+L8vByzXC5Zfdqee7a7qspsro7xKuXr2xzBGHe1uGQO0NL/f4ZCxllAiLKz3OOyryyXHcut6Z2Jk7zrpXRc52/nYcTpYnnYjOxedlaYDDjX2PcQ7RjdaNrc4XBolP5KwqRMlyw9dSwjMIPz2K8fC06Be92JeAYyJV6HaQgGln/+IV2bhZ8iHpYx0TeH+HMYUo32zuFLlyj/i5f2fK+P7jjDc07yya/QeitZcx3ND/ew5+v7pJ2VszZcRhLjAovzpHsGxKQmjjoO8d3rLN/rENoyB7t46IfPDtHp+WJROtfv2bCSJGCX8qlaUqSqqqpC2iftmtG4bKvBNvPz5ZFP/St9uKPu+6UhO/9MRg7SbnVvYtCgZZjwJeYmTV/uql09916B4h0+97xaoCLHpQrp2EvftbhgRmUumsE8miIvguUQTvbKmsFkzfX6wHK9wtndPuTPn1Nn+Z4wyLB2771p4Q9VbxPHwLmO401NBfB+CXfjA43Xymjln+YsTGCNaVEiGP9E6jV3wyVhUNFQFUf7fI9v1gyv9S11n1C6R6zFuHHX9+vBmm0rF0HrF0nnH//9gV2ucp2VQ1WLvhYEPfzwDWbNcs9Qx7lx7zyky1Q4D/LJX6fDLXhSKsyRHpj2MsEca0jqusJlv0kqbRTQ0qOCW+Fuo9fue9RO7zl78v5w52Mu+EscC2b+50/6S7VfApabDQrpUHsoYy8v/EGW5y02R5bNie99TuIcdsa9ZIRmhS+9afX8uinWccnxuH8I69y7epmO9vz5Lpv8ebZbHCz3x1D1M/aerzSFnAdN+BR44t5fHAHwFWlg4GeWd/5JUPfrDRhlniRfiJLDlho/x6+3P8Y3DK82dsKBBX7lqzu/ioT7kmT0tLwHT1YOOxTyo88BIHKzBqcqoYZA9Tzn8+1w+H8D+uOYglJ8Qh7Z7DMBaP475v7S56K1XhqktzFsdgQ//n4hwvcsaCWlDDCYPnAoO8/HB6Rvp9ufxxiLnwY513MNjCujGFK5//5q6SV9MV06wETA892xB+hDY6cck3H9L1A40sVr+HtVwn1QiZUztDucWYLz9eZhmk+WvGFIXjkbVtRYnN+emJeNYCFkJuPP5NhSv/4JZ18vaXnf1APxgqq6nyg3Xe4zJjsJloee/48OvH2yKECv/va3YX/2N6YtWvmhMB0+1ON4ZXcgWtYMhOu6bI1hvSvV44tef4Y9syVu+O2bPvXGDCXgb6psBjq3cW75mtcGeNwdYBnG44sYLz+K85CxR5VxG6s9v5zlJpmmXci+VH450x2IlFq/+uchSvCFlgAJw/9I1dxd1zIdw5F7DQ5Ibwsjjwa4Bda175ZqzT2LZfP9CMxer051uztPtL2a3l+d5+vHz+Bq/jaEDBA4+l4Qq5LYY5M9HGh5xtOLZwGsHdAFbYX477Srd2xXFm53ILINcU9288uHe1MbPrVOqyjcEeD/+8M4bgw3/TFjo7V5qr3WdeBCy0ayXPOBE8sQnAD43VmW7bYfz4p/ZIlFOEyN57w7na0inl59dSGBetfz+ei1PZT3JjRRu+uofRLrs5P+ZNwNpITzx8olYJ8Gc5UOqNQebekO7n29mtHl6ce3br7cebLZMnh+D8DDIyvv7oc0V751yqhhvOu4DpWUdXfnhVMBh7TgHu8e0HunTP8ZOP9qoUsfMDe02ZG4ew/k5uju1eQAIOXovHslZ+zWfKbzYL4KIIWCVEnIUbT35d4fwnFMNOLeLl/a3DVLNUdkx04gZ2DE6dbavj54wNQVFa/npX6TNM3VMw78dFE7A2k5OrTpZNzSj/G2CPKSJU6o6h/jRFlqWyY7DfCFlq/rXbBz+SGky3fHomM/g/H91RSJUHF+246ALWZnak/tTdYMo2BaiRYe3FyFJpz3Vn0bofa65ulLN4mxfA+essmPGt+meLbdtKLoaUPzIBJwXdcOLBOPC3APuMG4um83Wz7s1u7X6pO7tN14918eNf4wp+VL+7dF5JlNci+cgFrA3wUEP4HrCMHygcf2XXKH9+bApZGlOXG2+2blwcnn78bwH246+2lb7m9fIvxu8vGQFrkz3YcOIWzgLf4BwNClCha4ifXXoO+2Z9xLgtOwZsPTCtkTTLuAaAwC4OPPOVttJ3L4bg/D7jkhOwNvBX7uXBhYtOPRAHmsDYFxQgx6hpl0AsOcKBF6Cw1uKzpS9/9lWmfh3rEjsuWQEb39PBrw8UTE1O/yU47uOM3cc5rvbjx2r+8hzGkg+DsX1xhe3LzZzZ+0DrItGq6FI+PhYCtr7At+tPL+FQ7gNj9xEL52DX66zbym7Vq+UxbvdaLQZ2OM7xOgLsZcbYSw89V3byUhambGwfSwHLJvJ6w9lbGPgyAMs4sEwBFnKOPASQTz8VsHyAFyWwdoT2mCscUc5AXxAkTTyrcNbDwA7EuXLgwd0L3/m4CVM23v8Px4l5/WI3HHkAAAAASUVORK5CYII=";
var downArrowDarkBase64 = "data:image/png;base64,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";
var IframeWalletMessageType = "particle-auth-core-iframe-wallet-message";
var walletIframeId = "particle-auth-core-iframe-wallet";
var EntryPosition = ((EntryPosition2) => {
  EntryPosition2["BR"] = "bottom-right";
  EntryPosition2["BL"] = "bottom-left";
  EntryPosition2["TR"] = "top-right";
  EntryPosition2["TL"] = "top-left";
  return EntryPosition2;
})(EntryPosition || {});
var walletPluginIds = [walletIframeId];
function checkMessage(message) {
  const { id, messageType, data } = message;
  const { nonce, date, hash, iframeId } = JSON.parse(Buffer.from(id, "base64").toString());
  const hashBody = (0, import_fast_json_stable_stringify.default)({
    state: { nonce, date, iframeId },
    messageType,
    data
  });
  const hashValue = (0, import_sha256.default)(hashBody).toString();
  if (hashValue === hash) {
    return {
      state: { nonce, date, hash, iframeId },
      messageType,
      data
    };
  }
}
function buildMessage(data, messageType, nonce) {
  const state = {
    nonce: nonce || v4_default(),
    date: Date.now()
  };
  const hashValue = (0, import_sha256.default)(
    (0, import_fast_json_stable_stringify.default)({
      state,
      messageType,
      data
    })
  ).toString().toLowerCase();
  const id = Buffer.from(
    JSON.stringify({
      ...state,
      hash: hashValue
    })
  ).toString("base64");
  return {
    id,
    messageType,
    data
  };
}
var handleEthereumRpc = async (data, provider) => {
  if (!provider) {
    throw {
      code: 4200,
      message: "Wallet plugin not support EVM chains."
    };
  }
  const result = await provider.request(data);
  return result;
};
var handleSolanaRpc = async (data, solana) => {
  if (!solana) {
    throw {
      code: 4200,
      message: "Wallet plugin not support Solana chains."
    };
  }
  if (data.method === "solana_requestAccounts") {
    const publicAddress = solana.selectedAddress;
    if (!publicAddress) {
      await solana.connect();
    }
    return solana.selectedAddress;
  } else if (data.method === "solana_chainId") {
    return solana.chainId;
  } else if (data.method === "solana_signTransaction") {
    const { VersionedTransaction } = await import("./index.browser.esm-ZIQA3Q5F.js");
    const result = await solana.signTransaction(
      VersionedTransaction.deserialize(Buffer.from(data.params[0], "base64")),
      data.chainId
    );
    return Buffer.from(result.serialize()).toString("base64");
  } else if (data.method === "solana_signAllTransactions") {
    const { VersionedTransaction } = await import("./index.browser.esm-ZIQA3Q5F.js");
    const txs = data.params[0].map(
      (tx) => VersionedTransaction.deserialize(Buffer.from(tx, "base64"))
    );
    const result = await solana.signAllTransactions(txs, data.chainId);
    return result.map((tx) => Buffer.from(tx.serialize()).toString("base64"));
  } else if (data.method === "solana_signAndSendTransaction") {
    const { VersionedTransaction } = await import("./index.browser.esm-ZIQA3Q5F.js");
    const result = await solana.signAndSendTransaction(
      VersionedTransaction.deserialize(Buffer.from(data.params[0], "base64")),
      data.chainId
    );
    return result;
  } else if (data.method === "solana_signMessage") {
    const result = await solana.signMessage(Buffer.from(data.params[0], "base64"));
    return Buffer.from(result).toString("base64");
  } else if (data.method === "solana_switchChain") {
    if (!solana.switchChain) {
      throw {
        code: 4200,
        message: "Solana Wallet not support switch chain."
      };
    }
    await solana.switchChain(data.params[0]);
  }
};
var handleRpc = async (event, walletCore) => {
  var _a, _b, _c;
  const messageBody = checkMessage((_a = event.data) == null ? void 0 : _a.message);
  if (messageBody) {
    if (!walletPluginIds.includes(messageBody.state.iframeId)) {
      walletPluginIds.push(messageBody.state.iframeId);
    }
    let message;
    try {
      let result;
      if (messageBody.messageType === "ethereum-rpc") {
        result = await handleEthereumRpc(messageBody.data, walletCore.ethereum);
      } else {
        result = await handleSolanaRpc(messageBody.data, walletCore.solana);
      }
      message = buildMessage({ result }, messageBody.messageType, messageBody.state.nonce);
    } catch (error) {
      message = buildMessage(
        {
          error: {
            message: error.message || error.stack || error.toString(),
            code: error.code
          }
        },
        messageBody.messageType,
        messageBody.state.nonce
      );
    }
    (_c = (_b = window.document.getElementById(messageBody.state.iframeId)) == null ? void 0 : _b.contentWindow) == null ? void 0 : _c.postMessage(
      {
        type: IframeWalletMessageType,
        message
      },
      "*"
    );
  } else {
  }
};
var handleCustomEvent = async (event, customEventHandler) => {
  var _a, _b, _c;
  const messageBody = checkMessage((_a = event.data) == null ? void 0 : _a.message);
  if (messageBody) {
    if (!walletPluginIds.includes(messageBody.state.iframeId)) {
      walletPluginIds.push(messageBody.state.iframeId);
    }
    let message;
    try {
      if (!customEventHandler) {
        message = buildMessage(
          {
            error: {
              code: 4200,
              message: "Wallet plugin not support custom event."
            }
          },
          messageBody.messageType,
          messageBody.state.nonce
        );
      } else {
        const result = await customEventHandler(messageBody.messageType, messageBody.data);
        message = buildMessage({ result }, messageBody.messageType, messageBody.state.nonce);
      }
    } catch (error) {
      message = buildMessage(
        {
          error: {
            message: error.message || error.stack || error.toString(),
            code: error.code
          }
        },
        messageBody.messageType,
        messageBody.state.nonce
      );
    }
    (_c = (_b = window.document.getElementById(messageBody.state.iframeId)) == null ? void 0 : _b.contentWindow) == null ? void 0 : _c.postMessage(
      {
        type: IframeWalletMessageType,
        message
      },
      "*"
    );
  } else {
  }
};
var sendEthereumEvent = (event, args) => {
  var _a, _b;
  const message = buildMessage({ name: event, args }, "ethereum-event");
  for (const iframeId of walletPluginIds) {
    (_b = (_a = window.document.getElementById(iframeId)) == null ? void 0 : _a.contentWindow) == null ? void 0 : _b.postMessage(
      {
        type: IframeWalletMessageType,
        message
      },
      "*"
    );
  }
};
var style = `
.particle-wallet-entry-container .particle-pwe-btn {
  background: none;
  border: none;
  cursor: pointer;
  height: 60px;
  margin: 0;
  outline: none;
  padding: 0;
  position: fixed;
  width: 60px;
  border-radius: 60px;
  z-index: 1000;
}
.particle-wallet-entry-container .particle-pwe-btn:not(.is-dragging) {
  -webkit-transition: all 0.2s;
  transition: all 0.2s;
}
.particle-wallet-entry-container .particle-pwe-btn > img {
  height: 100%;
  width: 100%;
  -webkit-box-shadow: 2px 2px 10px 3px rgba(0, 0, 0, 0.1);
  box-shadow: 2px 2px 10px 3px rgba(0, 0, 0, 0.1);
  border-radius: 60px;
}
.particle-wallet-entry-container .particle-pwe-btn .particle-pwe-wallet-icon {
  display: block;
}
.particle-wallet-entry-container .particle-pwe-btn .particle-pwe-wallet-icon:not(.particle-pwe-wallet-icon-hide) {
  -webkit-animation: particle-pwe-wallet-icon-show 0.3s ease-in-out;
          animation: particle-pwe-wallet-icon-show 0.3s ease-in-out;
}
@-webkit-keyframes particle-pwe-wallet-icon-show {
  0% {
    -webkit-transform: scale(0.8);
            transform: scale(0.8);
  }
  100% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
}
@keyframes particle-pwe-wallet-icon-show {
  0% {
    -webkit-transform: scale(0.6);
            transform: scale(0.6);
  }
  100% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
}
.particle-wallet-entry-container .particle-pwe-btn .particle-pwe-wallet-icon.particle-pwe-wallet-icon-hide {
  display: none;
}
.particle-wallet-entry-container .particle-pwe-btn .particle-pwe-down-arrow {
  display: block;
}
.particle-wallet-entry-container .particle-pwe-btn .particle-pwe-down-arrow:not(.particle-pwe-down-arrow-hide) {
  -webkit-animation: particle-pwe-down-arrow-show 0.3s ease-in-out;
          animation: particle-pwe-down-arrow-show 0.3s ease-in-out;
}
@-webkit-keyframes particle-pwe-down-arrow-show {
  0% {
    -webkit-transform: scale(0.6);
            transform: scale(0.6);
  }
  100% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
}
@keyframes particle-pwe-down-arrow-show {
  0% {
    -webkit-transform: scale(0.6);
            transform: scale(0.6);
  }
  100% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
}
.particle-wallet-entry-container .particle-pwe-btn .particle-pwe-down-arrow.particle-pwe-down-arrow-hide {
  display: none;
}
.particle-wallet-entry-container .particle-pwe-iframe-content {
  background-color: #fff;
  border: none;
  border-radius: 10px;
  -webkit-box-shadow: -1px 3px 11px 2px #00000073;
          box-shadow: -1px 3px 11px 2px #00000073;
  display: none;
  height: 650px;
  overflow: hidden;
  position: fixed;
  width: 400px;
  z-index: 10000;
}
.particle-wallet-entry-container .particle-pwe-iframe-content.particle-pwe-full-screen-iframe-content {
  top: 0 !important;
  left: 0 !important;
  width: 100% !important;
  height: 100% !important;
  border-radius: 0 !important;
}
@media screen and (max-height: 660px) {
  .particle-wallet-entry-container .particle-pwe-iframe-content {
    height: 600px;
    width: 360px;
  }
}
.particle-wallet-entry-container .particle-pwe-iframe-content.particle-pwe-iframe-content-show {
  display: block;
}
.particle-pwe-iframe-content-dark{
  background-color: #000 !important;
}
.particle-pwe-iframe-content-light{
  background-color: #fff !important;
}
.particle-wallet-entry-container .particle-pwe-iframe-content .particle-pwe-iframe {
  border: none;
  height: 100%;
  width: 100%;
}

`;
var renderStyle = () => {
  const className = "particle-wallet-entry-style";
  const el = document.querySelector("." + className);
  el && el.remove();
  const styleEl = document.createElement("style");
  styleEl.classList.add(className);
  styleEl.innerHTML = style;
  document.head.appendChild(styleEl);
};
var style_default = renderStyle;
var fullScreenClass = "particle-pwe-full-screen-iframe-content";
var isListen = false;
var timer = null;
var draggie;
var _onMessage;
var _onEthereumAccountsChanged;
var _onEthereumChainChanged;
var _WalletEntryPlugin = class {
  constructor() {
    __privateAdd(this, _onMessage, (event) => {
      var _a, _b, _c;
      if (((_a = event.data) == null ? void 0 : _a.type) === IframeWalletMessageType) {
        if (!this.walletCore) {
          throw new Error("Please init wallet entry plugin first!");
        }
        const messageType = (_c = (_b = event.data) == null ? void 0 : _b.message) == null ? void 0 : _c.messageType;
        if (messageType === "ethereum-rpc" || messageType === "solana-rpc") {
          handleRpc(event, this.walletCore);
        } else {
          handleCustomEvent(event, this.customEventHandler);
        }
      }
    });
    __privateAdd(this, _onEthereumAccountsChanged, (args) => {
      sendEthereumEvent("accountsChanged", args);
    });
    __privateAdd(this, _onEthereumChainChanged, (args) => {
      sendEthereumEvent("chainChanged", args);
    });
    if (typeof window !== "undefined") {
      window.addEventListener("message", (event) => {
        var _a, _b, _c;
        if (((_a = event == null ? void 0 : event.data) == null ? void 0 : _a.name) === "particle-network-wallet") {
          const type = (_c = (_b = event == null ? void 0 : event.data) == null ? void 0 : _b.data) == null ? void 0 : _c.type;
          if (type === "logout") {
            this.walletEntryDestroy();
          }
        }
      });
    }
  }
  init(projectConfig, options) {
    var _a;
    this.projectConfig = projectConfig;
    this.walletEntryOptions = {
      entryPosition: "bottom-right",
      preload: false,
      themeType: "light",
      ...options || {},
      visible: (_a = options == null ? void 0 : options.visible) != null ? _a : true
    };
    this.destroy();
    if (typeof window !== "undefined") {
      window.removeEventListener("message", __privateGet(this, _onMessage));
      window.addEventListener("message", __privateGet(this, _onMessage));
    }
  }
  setWalletCore(walletCore, customEventHandler) {
    var _a, _b;
    if (!walletCore.ethereum && !walletCore.solana) {
      throw new Error("Please provide ethereum or solana wallet!");
    }
    if (this.walletCore) {
      (_a = this.walletCore.ethereum) == null ? void 0 : _a.removeListener("accountsChanged", __privateGet(this, _onEthereumAccountsChanged));
      (_b = this.walletCore.ethereum) == null ? void 0 : _b.removeListener("chainChanged", __privateGet(this, _onEthereumChainChanged));
    }
    this.walletCore = walletCore;
    this.customEventHandler = customEventHandler;
    if (this.walletCore.ethereum) {
      this.walletCore.ethereum.removeListener("accountsChanged", __privateGet(this, _onEthereumAccountsChanged));
      this.walletCore.ethereum.on("accountsChanged", __privateGet(this, _onEthereumAccountsChanged));
      this.walletCore.ethereum.removeListener("chainChanged", __privateGet(this, _onEthereumChainChanged));
      this.walletCore.ethereum.on("chainChanged", __privateGet(this, _onEthereumChainChanged));
    }
  }
  walletEntryCreate() {
    this.destroy();
    this.walletEntryRander();
  }
  walletEntryDestroy() {
    this.destroy();
  }
  getWalletUrl(options) {
    var _a;
    if (!this.projectConfig) {
      throw new Error("Please init wallet entry plugin first!");
    }
    const { pathName = "/", query = {} } = options || {};
    let url = `${config_default.env.walletUrl}${pathName}?iframeid=${walletIframeId}&${JSON.stringify(query).replace(/[{}"]/g, "").split(",").filter((value) => !!(value == null ? void 0 : value.trim())).map((keyValue) => {
      const [key, value] = keyValue.split(":");
      return `${encodeURIComponent(key)}=${encodeURIComponent(value.trim())}`;
    }).join("&")}`;
    const { projectId, clientKey, appId } = this.projectConfig;
    const { erc4337, language, themeType, customStyle } = this.walletEntryOptions;
    const topMenuType = (options == null ? void 0 : options.topMenuType) || ((_a = this.walletEntryOptions) == null ? void 0 : _a.topMenuType);
    url += `&projectConfig=${encodeURIComponent(
      Buffer.from(JSON.stringify({ projectId, clientKey, appId })).toString("base64")
    )}`;
    if (themeType) {
      url += "&theme=" + themeType;
    }
    if (language) {
      url += "&language=" + language;
    }
    if (erc4337) {
      url += `&erc4337=${encodeURIComponent(JSON.stringify(erc4337))}`;
    }
    if (topMenuType) {
      url += `&topMenuType=${topMenuType}`;
    }
    if (customStyle) {
      let supportChains = customStyle.supportChains;
      if (supportChains) {
        supportChains = supportChains.map((chain) => {
          return {
            name: chain.name,
            id: chain.id
          };
        });
      }
      url += `&customStyle=${encodeURIComponent(
        Buffer.from(JSON.stringify({ ...customStyle, supportChains })).toString("base64")
      )}`;
    }
    return url;
  }
  openWallet(params) {
    var _a, _b, _c, _d, _e;
    const url = this.getWalletUrl(params);
    const walletIcon = document.querySelector(".particle-pwe-wallet-icon");
    const downArrow = document.querySelector(".particle-pwe-down-arrow");
    const iframeContent = document.querySelector(".particle-pwe-iframe-content");
    if ((params == null ? void 0 : params.windowSize) === "large" || window.screen.width < 600) {
      iframeContent == null ? void 0 : iframeContent.classList.add(fullScreenClass);
    }
    const modalBorderRadius = ((_d = (_c = (_a = this.walletEntryOptions) == null ? void 0 : _a.customStyle) == null ? void 0 : _c[((_b = this.walletEntryOptions) == null ? void 0 : _b.themeType) || "light"]) == null ? void 0 : _d.cardBorderRadius) || 18;
    if (!isNullish2(modalBorderRadius)) {
      iframeContent.style.borderRadius = `${modalBorderRadius}px`;
    }
    iframeContent == null ? void 0 : iframeContent.classList.add("particle-pwe-iframe-content-show");
    const uiMode = ((_e = this.walletEntryOptions) == null ? void 0 : _e.themeType) || "light";
    if (uiMode == "dark") {
      iframeContent == null ? void 0 : iframeContent.classList.add("particle-pwe-iframe-content-dark");
      iframeContent == null ? void 0 : iframeContent.classList.remove("particle-pwe-iframe-content-light");
    } else {
      iframeContent == null ? void 0 : iframeContent.classList.add("particle-pwe-iframe-content-light");
      iframeContent == null ? void 0 : iframeContent.classList.remove("particle-pwe-iframe-content-dark");
    }
    let iframe = document.querySelector(".particle-pwe-iframe");
    if ((iframe == null ? void 0 : iframe.src) && new URLSearchParams(iframe == null ? void 0 : iframe.src).get("theme") !== uiMode) {
      iframe.remove();
      iframe = null;
    }
    if (!iframe) {
      iframe = document.createElement("iframe");
      iframe.className = "particle-pwe-iframe";
      iframe.allow = "camera";
      iframeContent == null ? void 0 : iframeContent.appendChild(iframe);
      iframe.src = url;
      iframe.id = walletIframeId;
    } else if (iframe.getAttribute("src") !== url) {
      iframe.remove();
      iframe = document.createElement("iframe");
      iframe.className = "particle-pwe-iframe";
      iframe.allow = "camera";
      iframeContent == null ? void 0 : iframeContent.appendChild(iframe);
      iframe.src = url;
      iframe.id = walletIframeId;
    }
    walletIcon == null ? void 0 : walletIcon.classList.add("particle-pwe-wallet-icon-hide");
    downArrow == null ? void 0 : downArrow.classList.remove("particle-pwe-down-arrow-hide");
    this.updateIframeContentPosition();
  }
  setWalletIcon() {
    const walletIconEl = document.querySelector(".particle-pwe-wallet-icon");
    const downArrowEl = document.querySelector(".particle-pwe-down-arrow");
    walletIconEl && walletIconEl.setAttribute("src", walletIconDarkBase64);
    downArrowEl && downArrowEl.setAttribute("src", downArrowDarkBase64);
  }
  updateIframeContentPosition() {
    var _a, _b;
    const iframeContent = document.querySelector(".particle-pwe-iframe-content");
    if (!iframeContent || ((_a = iframeContent == null ? void 0 : iframeContent.style) == null ? void 0 : _a.display) === "none") {
      return;
    }
    const walletBtn = document.querySelector(".particle-pwe-btn");
    if (!((_b = this.walletEntryOptions) == null ? void 0 : _b.visible)) {
      walletBtn.style.display = "none";
    }
    const walletBtnRect = walletBtn.getBoundingClientRect();
    const iframeContentRect = iframeContent.getBoundingClientRect();
    const windowHeight = window.innerHeight;
    const windowWidth = window.innerWidth;
    const iframeContentHeight = iframeContentRect.height;
    const iframeContentWidth = iframeContentRect.width;
    const walletBtnHeight = walletBtnRect.height;
    const walletBtnTop = walletBtnRect.top;
    const walletBtnLeft = walletBtnRect.left;
    const walletBtnBottom = walletBtnRect.bottom;
    const walletBtnRight = walletBtnRect.right;
    if (walletBtnBottom + iframeContentHeight + 10 < windowHeight && walletBtnRight + iframeContentWidth + 10 < windowWidth) {
      iframeContent.style.top = walletBtnBottom + 10 + "px";
      iframeContent.style.left = walletBtnLeft + "px";
    } else if (walletBtnBottom + iframeContentHeight + 10 < windowHeight && walletBtnLeft - iframeContentWidth - 10 > 0) {
      iframeContent.style.top = walletBtnBottom + 10 + "px";
      iframeContent.style.left = walletBtnRight - iframeContentWidth + "px";
    } else if (walletBtnTop - iframeContentHeight - 10 > 0 && walletBtnRight + iframeContentWidth + 10 < windowWidth) {
      iframeContent.style.top = walletBtnTop - iframeContentHeight - 10 + "px";
      iframeContent.style.left = walletBtnLeft + "px";
    } else if (walletBtnTop - iframeContentHeight - 10 > 0 && walletBtnLeft - iframeContentWidth - 10 > 0) {
      iframeContent.style.top = walletBtnTop - iframeContentHeight - 10 + "px";
      iframeContent.style.left = walletBtnRight - iframeContentWidth + "px";
    } else if (walletBtnRight + iframeContentWidth + 10 < windowWidth) {
      const top = walletBtnTop + walletBtnHeight / 2 - iframeContentHeight / 2;
      iframeContent.style.top = top < 30 ? 30 + "px" : top > windowHeight - iframeContentHeight - 30 ? windowHeight - iframeContentHeight - 30 + "px" : top + "px";
      iframeContent.style.left = walletBtnRight + 10 + "px";
    } else if (walletBtnLeft - iframeContentWidth - 10 > 0) {
      const top = walletBtnTop + walletBtnHeight / 2 - iframeContentHeight / 2;
      iframeContent.style.top = top < 30 ? 30 + "px" : top > windowHeight - iframeContentHeight - 30 ? windowHeight - iframeContentHeight - 30 + "px" : top + "px";
      iframeContent.style.left = walletBtnLeft - iframeContentWidth - 10 + "px";
    } else {
    }
  }
  setButtonStorageData(data) {
    const { innerWidth, innerHeight } = window;
    const position = this.walletEntryOptions.entryPosition || "bottom-right";
    localStorage.setItem(
      _WalletEntryPlugin.WALLET_BTN_POSITION,
      `${data.x},${data.y},${data.direction},${position}`
    );
    localStorage.setItem(_WalletEntryPlugin.WALLET_BTN_POSITION + "_window", `${innerWidth},${innerHeight}`);
  }
  getButtonStorageData() {
    var _a, _b, _c, _d;
    const { innerWidth, innerHeight } = window;
    const [x, y, direction = "right", position] = ((_b = (_a = localStorage == null ? void 0 : localStorage.getItem(_WalletEntryPlugin.WALLET_BTN_POSITION)) == null ? void 0 : _a.split) == null ? void 0 : _b.call(_a, ",")) || [];
    let [width, height] = ((_d = (_c = localStorage.getItem(_WalletEntryPlugin.WALLET_BTN_POSITION + "_window")) == null ? void 0 : _c.split) == null ? void 0 : _d.call(_c, ",")) || [];
    width = Number(width || 0);
    height = Number(height || 0);
    if (width && height && (width != innerWidth || height != innerHeight)) {
      localStorage.removeItem(_WalletEntryPlugin.WALLET_BTN_POSITION);
      localStorage.removeItem(_WalletEntryPlugin.WALLET_BTN_POSITION + "_window");
      return {
        x: innerWidth,
        y: innerHeight,
        position: position || this.walletEntryOptions.entryPosition || "bottom-right",
        direction: "right"
      };
    }
    return {
      x: Number(x) || 0,
      y: Number(y) || 0,
      position: position || this.walletEntryOptions.entryPosition || "bottom-right",
      direction
    };
  }
  updateWalletBtnPosition(x, y, type = "") {
    const { width } = document.body.getBoundingClientRect();
    const { direction } = this.getButtonStorageData();
    const isRight = x > width / 2 || type == "windowResize" && direction === "right";
    let left = isRight ? width - 60 : 0;
    let top = y;
    let newDirection = "left";
    const safeDistance = window.screen.width > 600 ? 30 : 10;
    if (left < safeDistance) {
      left = safeDistance;
      newDirection = "left";
    } else if (left > width - (60 + safeDistance)) {
      left = width - (60 + safeDistance);
      newDirection = "right";
    }
    if (top < safeDistance) {
      top = safeDistance;
    } else if (top > window.innerHeight - (60 + safeDistance)) {
      top = window.innerHeight - (60 + safeDistance);
    }
    return {
      left,
      top,
      direction: newDirection
    };
  }
  closeWallet() {
    const iframeContent = document.querySelector(".particle-pwe-iframe-content");
    iframeContent == null ? void 0 : iframeContent.classList.remove("particle-pwe-iframe-content-show");
    iframeContent == null ? void 0 : iframeContent.classList.remove(fullScreenClass);
    const walletIcon = document.querySelector(".particle-pwe-wallet-icon");
    const downArrow = document.querySelector(".particle-pwe-down-arrow");
    walletIcon == null ? void 0 : walletIcon.classList.remove("particle-pwe-wallet-icon-hide");
    downArrow == null ? void 0 : downArrow.classList.add("particle-pwe-down-arrow-hide");
  }
  resize() {
    const that = this;
    return () => {
      if (isServer())
        return;
      clearTimeout(timer);
      timer = setTimeout(() => {
        localStorage.removeItem(_WalletEntryPlugin.WALLET_BTN_POSITION);
        const walletBtn = document.querySelector(".particle-pwe-btn");
        const { x: btnX, y: btnY } = this.getButtonStorageData();
        const x = btnX || window.innerWidth;
        const y = btnY || window.innerHeight;
        const { left, top, direction } = that.updateWalletBtnPosition(x, y, "windowResize");
        if (walletBtn) {
          walletBtn.style.left = left + "px";
          walletBtn.style.top = top + "px";
        }
        this.setButtonStorageData({
          x,
          y,
          direction
        });
        that.updateIframeContentPosition();
        (async () => {
          let count = 0;
          do {
            count++;
            await this.sleep(100);
            this.updateIframeContentPosition();
          } while (count < 15);
        })();
      }, 10);
    };
  }
  async sleep(ms) {
    return new Promise((resolve) => setTimeout(resolve, ms));
  }
  preload() {
    const url = config_default.env.walletUrl;
    const script = document.createElement("script");
    script.src = `${url}/preload.js?_=${Math.floor(Date.now() / 6e4) * 6e4}`;
    script.setAttribute("data-target", "web-wallet");
    document.body.appendChild(script);
  }
  async walletEntryRander() {
    var _a;
    if (isServer())
      return;
    style_default();
    html_default();
    this.setWalletIcon();
    if (((_a = this.walletEntryOptions) == null ? void 0 : _a.preload) !== false) {
      this.preload();
    }
    const walletBtn = document.querySelector(".particle-pwe-btn");
    const { x: btnX, y: btnY } = this.getButtonStorageData();
    if (btnX && btnY) {
      if ((Number(btnX) || 0) < window.innerWidth && (Number(btnY) || 0) < window.innerHeight) {
        const { left, top } = this.updateWalletBtnPosition(Number(btnX) || 0, Number(btnY) || 0);
        walletBtn.style.left = left + "px";
        walletBtn.style.top = top + "px";
        this.updateIframeContentPosition();
      } else {
        const { left, top } = this.updateWalletBtnPosition(window.innerWidth, window.innerHeight);
        walletBtn.style.left = left + "px";
        walletBtn.style.top = top + "px";
        this.updateIframeContentPosition();
      }
    } else {
      const position = this.walletEntryOptions.entryPosition || "bottom-left";
      let top, left;
      if (position === "bottom-right") {
        top = window.innerHeight;
        left = window.innerWidth;
      } else if (position === "top-right") {
        top = 0;
        left = window.innerWidth;
      } else if (position === "top-left") {
        top = 0;
        left = 0;
      } else {
        top = window.innerHeight;
        left = 0;
      }
      const positionData = this.updateWalletBtnPosition(left, top);
      walletBtn.style.left = positionData.left + "px";
      walletBtn.style.top = positionData.top + "px";
      this.updateIframeContentPosition();
    }
    let isDraggie = false;
    const Draggabilly = (await import("./draggabilly-EHOFEYK5.js")).default;
    draggie = new Draggabilly(walletBtn);
    draggie.on("dragStart", () => {
      isDraggie = true;
      walletBtn.style.cursor = "move";
    });
    draggie.on("dragMove", () => {
      this.updateIframeContentPosition();
    });
    draggie.on("dragEnd", (event, pointer) => {
      event.stopPropagation();
      walletBtn.style.cursor = "pointer";
      const { clientX: x, clientY: y } = pointer;
      const { left, top, direction } = this.updateWalletBtnPosition(x, y - 35);
      walletBtn.style.left = left + "px";
      walletBtn.style.top = top + "px";
      this.updateIframeContentPosition();
      (async () => {
        let count = 0;
        do {
          count++;
          await this.sleep(20);
          this.updateIframeContentPosition();
        } while (count < 70);
      })();
      this.setButtonStorageData({
        x: left,
        y: top,
        direction
      });
      setTimeout(() => {
        isDraggie = false;
      }, 50);
    });
    const controlIframe = (0, import_debounce.default)(() => {
      var _a2, _b;
      if (!isDraggie) {
        const iframeContent = document.querySelector(".particle-pwe-iframe-content");
        if ((_b = (_a2 = iframeContent == null ? void 0 : iframeContent.classList) == null ? void 0 : _a2.contains) == null ? void 0 : _b.call(_a2, "particle-pwe-iframe-content-show")) {
          this.closeWallet();
        } else {
          this.openWallet();
        }
      }
    }, 30);
    walletBtn.addEventListener("touchend", (event) => {
      setTimeout(() => {
        controlIframe();
      });
    });
    walletBtn.addEventListener("click", (event) => {
      var _a2;
      (_a2 = event == null ? void 0 : event.stopPropagation) == null ? void 0 : _a2.call(event);
      setTimeout(() => {
        controlIframe();
      });
    });
    window.walletEntryPlugin = this;
    if (!isListen) {
      isListen = true;
      window.addEventListener("resize", window.walletEntryPlugin.resize(), false);
      window.addEventListener(
        "message",
        (events) => {
          var _a2, _b, _c, _d, _e, _f;
          if (((_a2 = events == null ? void 0 : events.data) == null ? void 0 : _a2.type) === "PARTICLE_WALLET_RESIZE_IFRAME") {
            const walletEntryPlugin2 = window.walletEntryPlugin;
            const iframeContent = document.querySelector(".particle-pwe-iframe-content");
            const classList = iframeContent == null ? void 0 : iframeContent.classList;
            if ((_b = classList == null ? void 0 : classList.contains) == null ? void 0 : _b.call(classList, fullScreenClass)) {
              if (!((_c = this.walletEntryOptions) == null ? void 0 : _c.visible) || window.screen.width < 600) {
                walletEntryPlugin2.closeWallet();
              } else {
                (_d = classList == null ? void 0 : classList.remove) == null ? void 0 : _d.call(classList, fullScreenClass);
                walletEntryPlugin2.resize();
                walletEntryPlugin2.updateIframeContentPosition();
              }
            } else {
              (_e = classList == null ? void 0 : classList.add) == null ? void 0 : _e.call(classList, fullScreenClass);
            }
          } else if (((_f = events == null ? void 0 : events.data) == null ? void 0 : _f.type) === "PARTICLE_WALLET_CLOSE_IFRAME") {
            window.walletEntryPlugin.closeWallet();
          }
        },
        false
      );
    }
  }
  destroy() {
    var _a, _b, _c, _d;
    if (isServer())
      return;
    (_a = draggie == null ? void 0 : draggie.destroy) == null ? void 0 : _a.call(draggie);
    window.removeEventListener("resize", (_b = this == null ? void 0 : this.resize) == null ? void 0 : _b.call(this), false);
    (_d = (_c = document.querySelector(".particle-wallet-entry-container")) == null ? void 0 : _c.remove) == null ? void 0 : _d.call(_c);
  }
};
var WalletEntryPlugin = _WalletEntryPlugin;
_onMessage = /* @__PURE__ */ new WeakMap();
_onEthereumAccountsChanged = /* @__PURE__ */ new WeakMap();
_onEthereumChainChanged = /* @__PURE__ */ new WeakMap();
WalletEntryPlugin.WALLET_BTN_POSITION = "walletBtnPosition";
var walletEntryPlugin = new WalletEntryPlugin();

// node_modules/@particle-network/auth-core-modal/esm/chunk-PZJW4BGW.js
var import_react = __toESM(require_react(), 1);
var import_base64url = __toESM(require_base64url(), 1);
var import_react2 = __toESM(require_react(), 1);
var import_react3 = __toESM(require_react(), 1);
var import_util = __toESM(require_dist(), 1);
var import_bn = __toESM(require_bn(), 1);
var import_ethjs_unit = __toESM(require_lib(), 1);
var import_numbro = __toESM(require_numbro_min(), 1);
var import_react4 = __toESM(require_react(), 1);
var import_util2 = __toESM(require_dist(), 1);
var import_util3 = __toESM(require_dist(), 1);
var import_rpc_errors = __toESM(require_dist2(), 1);
var import_react5 = __toESM(require_react(), 1);
var import_react6 = __toESM(require_react(), 1);
"use client";
var he;
var fe;
var ge;
var Ne = class {
  constructor() {
    p(this, he, { buyUrl: "https://ramp-debug.particle.network" });
    p(this, fe, { buyUrl: "https://ramp-staging.particle.network" });
    p(this, ge, { buyUrl: "https://ramp.particle.network" });
  }
  get env() {
    return !L() && window.__PARTICLE_ENVIRONMENT__ === "development" ? o(this, he) : !L() && window.__PARTICLE_ENVIRONMENT__ === "staging" ? o(this, fe) : o(this, ge);
  }
};
he = /* @__PURE__ */ new WeakMap(), fe = /* @__PURE__ */ new WeakMap(), ge = /* @__PURE__ */ new WeakMap();
var Pt = new Ne();
var De = Pt;
var Z = () => {
  let e = Na(), { userInfo: t, modalOptions: n } = Fa(), [s, i] = (0, import_react.useState)(isNeedRestoreWallet()), w = (0, import_react.useCallback)(() => {
    e("account/security");
  }, [e]), u = (0, import_react.useCallback)(() => {
    if (hasMasterPassword())
      throw new Error("Master password already exists.");
    e("account/master-password");
  }, [e]), l = (0, import_react.useCallback)(() => {
    if (!hasMasterPassword())
      throw new Error("Master password not exist, please set it first!");
    if (isNeedRestoreWallet())
      throw new Error("Wallet not restore, please restore it by master password first!");
    e("account/master-password/change");
  }, [e]), P = (0, import_react.useCallback)(() => {
    if (!hasMasterPassword())
      throw new Error("Master password not exists.");
    if (!isNeedRestoreWallet())
      throw new Error("Wallet has been restore.");
    e("account/master-password/verify");
  }, [e]), T = (0, import_react.useCallback)((o2) => {
    let { windowSize: f3, pathName: g, query: A, topMenuType: C } = o2 || {};
    if (!isConnected())
      throw f.notLogin();
    walletEntryPlugin.openWallet({ windowSize: f3 || "large", pathName: g || "/", query: A, topMenuType: C }), Ze("open_wallet");
  }, []), a = (0, import_react.useCallback)((o2) => {
    if (!isConnected())
      throw f.notLogin();
    return walletEntryPlugin.getWalletUrl(o2);
  }, []), b = (0, import_react.useCallback)((o2) => {
    var g;
    let f3 = `${De.env.buyUrl}/?language=${n.language || "en"}&theme=${n.themeType || "light"}`;
    if ((g = n.wallet) != null && g.customStyle) {
      let { light: A, dark: C } = n.wallet.customStyle;
      f3 += `&customStyle=${encodeURIComponent(Buffer.from(JSON.stringify({ light: A, dark: C })).toString("base64"))}`;
    }
    o2 && Object.keys(o2).forEach((A) => {
      let C = o2[A];
      C && (f3 += `&${A}=${encodeURIComponent(C)}`);
    }), typeof window != "undefined" && window.open(f3);
  }, [n.wallet, n.themeType, n.language]), y = (0, import_react.useCallback)((o2) => {
    let f3 = getSecurityAccount();
    if (!f3.email && !f3.phone)
      throw new Error("Please set security account first!");
    if (hasPaymentPassword())
      throw new Error("Payment password already exists.");
    if (o2 && o2 !== f3.email && o2 !== f3.phone)
      throw new Error("Invalid security account.");
    e("account/set-password", { state: { account: o2 } });
  }, [e]), m = (0, import_react.useCallback)(() => {
    if (!hasPaymentPassword())
      throw new Error("Payment password not exists.");
    e("account/change-password");
  }, [e]), h = (0, import_react.useCallback)(() => {
    let o2 = getSecurityAccount();
    if (o2.email && o2.phone)
      throw new Error("Security account already exists.");
    let f3 = !o2.email && !o2.phone;
    o2.email && !o2.phone || !o2.email && o2.phone ? e("/account/verify", { state: { account: o2.email || o2.phone, authType: o2.email ? "phone" : "email", redirectUrl: "/account/security", pageType: "verify_security_account_set_security_account" } }) : (t == null ? void 0 : t.email) && !o2.phone ? e("account/bind", { state: { showSwitch: f3, accountType: "phone", redirectUrl: "account/security" } }) : o2.email ? e("account/bind", { state: { showSwitch: f3, accountType: "phone", redirectUrl: "account/security" } }) : e("account/bind", { state: { showSwitch: f3, accountType: "email", redirectUrl: "account/security" } });
  }, [e, t]), r = (0, import_react.useCallback)(() => {
    let o2 = getSecurityAccount();
    if (!o2.email && !o2.phone)
      throw new Error("Please set security account first!");
    e("login-account");
  }, [e]);
  return (0, import_react.useEffect)(() => {
    i(t ? isNeedRestoreWallet() : false);
  }, [t]), (0, import_react.useEffect)(() => {
    let o2 = () => {
      i(isNeedRestoreWallet());
    };
    return particleAuth.on(AuthCoreEvent.ParticleWalletRestored, o2), () => {
      particleAuth.off(AuthCoreEvent.ParticleWalletRestored, o2);
    };
  }, []), { userInfo: t, needRestoreWallet: s, openAccountAndSecurity: w, openSetMasterPassword: u, openChangeMasterPassword: l, openRestoreByMasterPassword: P, openSetPaymentPassword: y, openChangePaymentPassword: m, openSetSecurityAccount: h, openLinkLoginAccount: r, openWallet: T, buildWalletUrl: a, openBuy: b };
};
function fn(e, t) {
  t ? localStorage.setItem(e, t) : St(e);
}
function gn(e) {
  return localStorage.getItem(e);
}
function Ze2(e) {
  let t = localStorage.getItem(e);
  return t || localStorage.setItem(e, "1"), Boolean(t);
}
function St(e) {
  localStorage.removeItem(e);
}
var z = class {
};
z.PN_OPEN_SET_PAYMENT_PASSWORD = "PN_OPEN_SET_PAYMENT_PASSWORD", z.PN_OPEN_SET_MASTER_PASSWORD = "PN_OPEN_SET_MASTER_PASSWORD";
var et = (e) => e === 2 || e === 3 ? true : e || e === 1 ? !Ze2(z.PN_OPEN_SET_MASTER_PASSWORD) : false;
var vt = () => {
  let e = Na(), { loginSuccessRedirectToApp: t, modalOptions: n, events: s } = Fa(), i = (0, import_react2.useCallback)(async (u, l = true) => {
    var P, T;
    try {
      let a = await connect(u);
      Ze("login", a), analyticsRecord({ record_type: RecordType.PAGE_LOGIN_BUTTON_CLICK_SUCCESS }), (P = a.security_account) != null && P.has_set_master_password ? e("account/master-password/verify", { replace: true, state: { loginVerifyMasterPassword: true } }) : et((T = n.promptSettingConfig) == null ? void 0 : T.promptMasterPasswordSettingWhenLogin) ? e("account/master-password/prompt", { replace: true }) : t();
    } catch (a) {
      if (analyticsRecord({ record_type: RecordType.PAGE_LOGIN_BUTTON_CLICK_FAILURE }), l)
        s.emit("loginFail", a);
      else
        throw a;
    }
  }, [n.promptSettingConfig, e, t]), w = (0, import_react2.useCallback)(async (u) => {
    try {
      let l = (0, import_base64url.default)(JSON.stringify({ chain: u.chain, authorization: u.authorization, socialType: u.socialType }));
      await thirdpartyAuth({ authType: u.socialType, appState: l, prompt: u.prompt });
    } catch (l) {
      s.emit("loginFail", l);
    }
  }, [s]);
  return { loginHandler: i, socialAuthLogin: w };
};
var st = vt;
var te = () => {
  let e = Na(), { events: t } = Ia(), { modalOptions: n, setLoginAuthorization: s, setConnectionStatus: i, connectionStatus: w, setAuthCoreModal: u, socialConnectCallback: l, setSocialConnectCallback: P } = Fa(), { loginHandler: T, socialAuthLogin: a } = st(), b = (0, import_react3.useCallback)((r) => {
    let { email: o2, phone: f3, code: g, jwt: A, socialType: C } = r;
    return (Bo(o2) || Uo(f3)) && jo(g) || C || A;
  }, []), y = (0, import_react3.useCallback)(async (r) => {
    if (r && r.authorization && check(r.chain, "chain is required when authorization is provided"), r && n.authTypes && n.authTypes.length > 0)
      if ("email" in r && !isNullish(r.email))
        check(n.authTypes.includes(AuthType.email), 'Email login is not supported, please add AuthType.email to AuthCoreContextProvider init-param "authTypes"');
      else if ("phone" in r && !isNullish(r.phone))
        check(n.authTypes.includes(AuthType.phone), 'Phone login is not supported, please add AuthType.phone to AuthCoreContextProvider init-param "authTypes"');
      else if ("socialType" in r && r.socialType) {
        let o2 = r.socialType === "twitterv1" ? "twitter" : r.socialType;
        check(n.authTypes.includes(o2), `${o2} login is not supported, please add AuthType.${o2} to AuthCoreContextProvider init-param "authTypes"`);
      } else
        "jwt" in r && r.jwt && check(n.authTypes.includes(AuthType.jwt), 'JWT login is not supported, please add AuthType.jwt to AuthCoreContextProvider init-param "authTypes"');
    return i("connecting"), new Promise((o2, f3) => {
      if (t.once("loginSuccess", (g) => {
        var x;
        i("connected"), u({ particleModalVisible: false });
        let { socialType: A, nonce: C, code: I } = r || {};
        A && C && I && ((x = l == null ? void 0 : l.onSuccess) == null || x.call(l, g)), o2(g);
      }), t.once("loginFail", (g) => {
        var x;
        i("disconnected"), u({ particleModalVisible: false });
        let { socialType: A, nonce: C, code: I } = r || {};
        A && C && I && ((x = l == null ? void 0 : l.onError) == null || x.call(l, g)), f3(g);
      }), r && b(r)) {
        let { authorization: g, chain: A, socialType: C, nonce: I, prompt: x, code: p2 } = r;
        s(g ? { authorization: g, chain: requireNotNullish(A) } : void 0), C && (!I || !p2) ? a({ socialType: C, prompt: x, authorization: g, chain: A }) : T(r);
      } else
        e("login", { state: r });
    });
  }, [t, n.authTypes, T, b, e, l]);
  (0, import_react3.useEffect)(() => {
    let r = () => {
      i("connected");
    }, o2 = () => {
      i("disconnected");
    };
    return particleAuth.on(AuthCoreEvent.ParticleAuthConnect, r), particleAuth.on(AuthCoreEvent.ParticleAuthDisconnect, o2), isConnected() && i("connected"), () => {
      particleAuth.off(AuthCoreEvent.ParticleAuthConnect, r), particleAuth.off(AuthCoreEvent.ParticleAuthDisconnect, o2);
    };
  }, []);
  let m = (0, import_react3.useCallback)(async (r) => {
    if ("email" in r && r.email)
      return await getConnectCaptcha(r);
    if ("phone" in r && r.phone) {
      let o2 = await getCloudflareTurnstileResponse(r.cloudflareOptions);
      return await getConnectCaptcha({ phone: r.phone, cf_turnstile_response: o2 });
    }
    throw new Error("Invalid config");
  }, []), h = (0, import_react3.useMemo)(() => w === "connected", [w]);
  return { connect: y, disconnect, connectionStatus: w, connected: h, requestConnectCaptcha: m, setSocialConnectCallback: P };
};
var Vt = () => {
  let { modalOptions: e, setModalOptions: t } = Fa(), n = (a) => {
    t({ themeType: a });
  }, s = (a) => {
    t({ customStyle: a ? { ...a } : void 0 });
  }, i = (a) => {
    t({ language: a });
  }, w = (a) => {
    t({ authTypes: a ? [...a] : void 0 });
  }, u = (a) => {
    t({ fiatCoin: a });
  }, l = (a) => {
    t({ erc4337: a });
  }, P = (a) => {
    t({ wallet: { ...a } });
  }, T = (a) => {
    t({ promptSettingConfig: a });
  };
  return { themeType: e.themeType, setThemeType: n, customStyle: e.customStyle, setCustomStyle: s, walletOptions: e.wallet, setWalletOptions: P, language: e.language, setLanguage: i, authTypes: e.authTypes, setAuthTypes: w, fiatCoin: e.fiatCoin, setFiatCoin: u, erc4337: e.erc4337, setERC4337: l, promptSettingConfig: e.promptSettingConfig, setPromptSettingConfig: T };
};
function kn(e, t) {
  return !e || !t ? "0" : (0, import_numbro.default)(e / Math.pow(10, t)).format({ thousandSeparated: true, mantissa: t, trimMantissa: true });
}
function Hn(e, t = "ether") {
  return new BigNumber(di(oe(e, t)));
}
function $n(e) {
  return typeof e == "string" || typeof e == "number" ? new BigNumber(e) : new BigNumber(J(e));
}
function oe(e, t = "ether") {
  return e ? import_ethjs_unit.default.toWei(e, t) : new import_bn.default(0);
}
function zn(e, t = "ether") {
  if (!e)
    return "0";
  let n;
  return typeof e == "string" && e.startsWith("0x") ? n = import_ethjs_unit.default.fromWei(new import_bn.default((0, import_util.stripHexPrefix)(e), 16), t) : n = import_ethjs_unit.default.fromWei(new import_bn.default(e), t), n;
}
function Dn(e, t = "ether", n = 6) {
  if (!e)
    return "0";
  let s;
  return typeof e == "string" && e.startsWith("0x") ? s = import_ethjs_unit.default.fromWei(new import_bn.default((0, import_util.stripHexPrefix)(e), 16), t) : s = import_ethjs_unit.default.fromWei(new import_bn.default(e), t), (0, import_numbro.default)(s).format({ thousandSeparated: true, trimMantissa: true, mantissa: n });
}
function jn({ amount: e, price: t, mantissa: n, fiatCoin: s }) {
  if (!t)
    return "";
  let i = new BigNumber(e).multipliedBy(new BigNumber(t));
  return _i(n) && (i.lt(new BigNumber(1)) ? n = 4 : n = 2), `\u2248${(0, import_numbro.default)(i).format({ thousandSeparated: true, trimMantissa: true, mantissa: n }).replace(/-0$/, "0")} ${s.toUpperCase()}`;
}
function Kn(e, t = 6) {
  return (0, import_numbro.default)(e).format({ thousandSeparated: true, trimMantissa: true, mantissa: t });
}
function Jn(e, t = 6) {
  let s = new BigNumber(e, (0, import_util.isHexString)(e) ? 16 : 10).div(new BigNumber(1e6)).toString(10);
  return (0, import_numbro.default)(s).format({ thousandSeparated: true, trimMantissa: true, mantissa: t });
}
var Yn = (e, t) => {
  let n;
  e instanceof BigNumber ? n = e : n = new BigNumber(e).dividedBy(new BigNumber(10).pow(t));
  let s = n.toFixed(), [i, w] = s.split("."), u = 9;
  if (i.length > 15)
    return n.toExponential(2);
  if (i.length > 5 && (u = Math.max(9 - (i.length - 5), 0)), w && u > 0) {
    let l = w.slice(0, u);
    return new BigNumber(`${i}.${l}`).toFixed();
  }
  return i;
};
var ie = () => {
  let { userInfo: e } = Fa();
  return { userInfo: e };
};
function or(e) {
  return typeof e == "number" ? e === 2 : typeof e == "string" ? Number(e) === 2 : false;
}
var W = (e) => typeof e == "string" ? e.startsWith("0x") ? e : `0x${new BigNumber(e).toString(16)}` : J(e);
function mt(e, t) {
  let n, s, i, w, u, l, P, T, a, b, y, m, h, r = Lt(t);
  return r && !(0, import_util2.isHexString)(e.from) ? w = toHex(e.from) : w = e.from, e.to && (r && !(0, import_util2.isHexString)(e.to) ? u = toHex(e.to) : u = e.to), e.gas && !e.gasLimit ? i = W(e.gas) : e.gasLimit && (i = W(e.gasLimit)), e.value && (l = W(e.value)), e.data && (P = J(e.data)), e.chainId ? a = W(e.chainId) : a = W(t.id), e.nonce && (n = W(e.nonce)), "maxPriorityFeePerGas" in e && e.maxPriorityFeePerGas && (b = W(e.maxPriorityFeePerGas)), "maxFeePerGas" in e && e.maxFeePerGas && (y = W(e.maxFeePerGas)), e.gasPrice && (s = W(e.gasPrice)), e.type || e.type === 0 ? T = W(e.type) : "maxPriorityFeePerGas" in e && e.maxPriorityFeePerGas && "maxFeePerGas" in e && e.maxFeePerGas && chains_exports.isChainSupportEIP1559(t) ? T = "0x2" : "gasPrice" in e && e.gasPrice ? T = "0x0" : T = chains_exports.isChainSupportEIP1559(t) ? "0x2" : "0x0", e.action && ["normal", "cancel", "speedup"].includes(e.action) ? m = e.action : m = void 0, e.gasLevel && ["custom", "low", "medium", "high"].includes(e.gasLevel) ? h = e.gasLevel : h = void 0, { nonce: n, gasPrice: s, gasLimit: i, from: w, to: u, value: l, data: P, type: T, chainId: a, maxPriorityFeePerGas: b, maxFeePerGas: y, action: m, gasLevel: h };
}
function ir(e) {
  return e && e.length === 42 && e.startsWith("0x");
}
function Lt(e) {
  return e.name.toLowerCase() === "tron";
}
var qt = async (e) => {
  let t = Number(e.chainId || particleAuth.ethereum.chainId), n = { ...e, from: particleAuth.ethereum.selectedAddress, chainId: t }, s = chains_exports.getEVMChainInfoById(t);
  isNullish(n.data) && (n.data = "0x");
  let i = mt(n, s);
  if (i.gasLimit || (i.gasLimit = await Gt({ from: i.from, to: i.to, value: i.value, data: i.data }, t)), Number(i.type) === 2) {
    if (!i.maxPriorityFeePerGas || !i.maxFeePerGas) {
      let u = await pt(t);
      i.maxFeePerGas = di(oe(u[GasFeeMode.medium].maxFeePerGas, "gwei")), i.maxPriorityFeePerGas = di(oe(u[GasFeeMode.medium].maxPriorityFeePerGas, "gwei"));
    }
  } else if (!i.gasPrice) {
    let u = await pt(t);
    i.gasPrice = di(oe(u[GasFeeMode.medium].maxFeePerGas, "gwei"));
  }
  return await particleAuth.ethereum.sendTransaction(i);
};
var Gt = async (e, t) => ((!e.to || e.to.length === 0) && delete e.to, await particleAuth.ethereum.request({ chainId: t, method: "eth_estimateGas", params: [e] }));
var pt = async (e) => await particleAuth.ethereum.request({ chainId: e, method: EvmEnhancedMethod.suggestedGasFees });
var dt = qt;
var j;
var Ae;
var Se = class {
  constructor() {
    p(this, j);
    this.signMessage = async (t, n) => {
      throw new Error("signMessage not implemented.");
    };
    this.sendTransaction = async (t) => {
      throw new Error("sendTransaction not implemented.");
    };
    this.signTypedData = async ({ data: t, version: n, uniq: s }) => {
      throw new Error("signTypedData not implemented.");
    };
  }
  get selectedAddress() {
    return requireNotNullish(window.particleAuth).ethereum.selectedAddress;
  }
  get chainId() {
    return requireNotNullish(window.particleAuth).ethereum.chainId;
  }
  isConnected() {
    return requireNotNullish(window.particleAuth).ethereum.isConnected();
  }
  on(t, n) {
    var s;
    return (s = window.particleAuth) == null || s.ethereum.on(t, n), this;
  }
  once(t, n) {
    var s;
    return (s = window.particleAuth) == null || s.ethereum.once(t, n), this;
  }
  off(t, n) {
    var s;
    return (s = window.particleAuth) == null || s.ethereum.off(t, n), this;
  }
  removeListener(t, n) {
    var s;
    return (s = window.particleAuth) == null || s.ethereum.removeListener(t, n), this;
  }
  async enable() {
    return await requireNotNullish(window.particleAuth).ethereum.enable();
  }
  async disconnect() {
    return await requireNotNullish(window.particleAuth).ethereum.disconnect();
  }
  async request(t) {
    var s, i, w, u, l, P, T, a, b;
    let n = t.method;
    if (!n)
      throw import_rpc_errors.rpcErrors.invalidParams("Invalid parameters: method is required.");
    if (Object.values(EvmRpcMethod).includes(n)) {
      if (n === EvmRpcMethod.ethAccounts || n === EvmRpcMethod.ethRequestAccounts)
        return await requireNotNullish(window.particleAuth).ethereum.request(t);
      if (n === EvmRpcMethod.ethChainId)
        return this.chainId;
      if (n.startsWith(EvmRpcMethod.ethSignTypedData)) {
        q(this, j, Ae).call(this);
        let y = ethereumUtils.isSignTypedDataV1(n), m = y ? (s = t == null ? void 0 : t.params) == null ? void 0 : s[1] : (i = t == null ? void 0 : t.params) == null ? void 0 : i[0], h = y ? (w = t == null ? void 0 : t.params) == null ? void 0 : w[0] : (u = t == null ? void 0 : t.params) == null ? void 0 : u[1];
        if (!m || typeof m != "string")
          throw import_rpc_errors.rpcErrors.invalidParams("Invalid parameters: must provide an Ethereum address.");
        if (!h)
          throw import_rpc_errors.rpcErrors.invalidParams("Invalid parameters: must provide typed data.");
        if (m.toLowerCase() !== ((l = this.selectedAddress) == null ? void 0 : l.toLowerCase()))
          throw import_rpc_errors.providerErrors.unauthorized();
        typeof h == "string" && (h = JSON.parse(h));
        let r = ethereumUtils.isUniq(n), o2 = ethereumUtils.getSignTypedVersion(n);
        return await this.signTypedData({ data: h, version: o2, uniq: r });
      } else if (n.startsWith(EvmRpcMethod.personalSign)) {
        q(this, j, Ae).call(this);
        let y = (P = t == null ? void 0 : t.params) == null ? void 0 : P[0], m = (T = t == null ? void 0 : t.params) == null ? void 0 : T[1];
        if (!y || typeof y != "string")
          throw import_rpc_errors.rpcErrors.invalidParams("Invalid parameters: must provide a valid message.");
        if (!m || typeof m != "string")
          throw import_rpc_errors.rpcErrors.invalidParams("Invalid parameters: must provide an Ethereum address.");
        if (m.toLowerCase() !== ((a = this.selectedAddress) == null ? void 0 : a.toLowerCase()))
          throw import_rpc_errors.providerErrors.unauthorized();
        (0, import_util3.isHexString)(y) || (y = (0, import_util3.addHexPrefix)(Buffer.from(y).toString("hex")));
        let h = ethereumUtils.isUniq(n);
        return await this.signMessage(y, h);
      } else {
        if (n === EvmRpcMethod.walletSwitchEthereumChain)
          return await requireNotNullish(window.particleAuth).ethereum.request(t);
        if (n === EvmRpcMethod.ethSendTransaction) {
          q(this, j, Ae).call(this);
          let y = Number(t.chainId || this.chainId), m = chains_exports.getEVMChainInfoById(y);
          if (!m)
            throw import_rpc_errors.providerErrors.chainDisconnected();
          let h = (b = t.params) == null ? void 0 : b[0];
          if (!h)
            throw import_rpc_errors.rpcErrors.invalidParams("Invalid parameters: must provide an transaction data.");
          return isNullish(h.type) && (chains_exports.isChainSupportEIP1559(m) ? h.type = "0x2" : h.type = "0x0"), isNullish(h.chainId) && (h.chainId = `0x${y.toString(16)}`), isNullish(h.nonce) && (h.nonce = "0x0"), isNullish(h.data) && (h.data = "0x"), await this.sendTransaction(h);
        } else
          throw import_rpc_errors.providerErrors.unsupportedMethod();
      }
    } else
      return await requireNotNullish(window.particleAuth).ethereum.request(t);
  }
};
j = /* @__PURE__ */ new WeakSet(), Ae = function() {
  if (!this.isConnected())
    throw import_rpc_errors.providerErrors.unauthorized();
};
var Kt = () => {
  var x;
  let e = Na(), { events: t } = Ia(), [n, s] = (0, import_react4.useState)(Number(particleAuth.ethereum.chainId)), [i, w] = (0, import_react4.useState)(requireNotNullish(Qo(n))), [u, l] = (0, import_react4.useState)(particleAuth.ethereum.selectedAddress), { userInfo: P } = ie(), { needRestoreWallet: T } = Z(), { modalOptions: a } = za(), { setAuthCoreModal: b } = Fa(), { connect: y } = te(), m = (0, import_react4.useMemo)(() => {
    var p2;
    return !(T || (P == null ? void 0 : P.security_account.has_set_payment_password) || ((p2 = a.promptSettingConfig) == null ? void 0 : p2.promptPaymentPasswordSettingWhenSign) || getLatestAuthType() !== AuthType.jwt);
  }, [P == null ? void 0 : P.security_account.has_set_payment_password, T, (x = a.promptSettingConfig) == null ? void 0 : x.promptPaymentPasswordSettingWhenSign]);
  (0, import_react4.useEffect)(() => {
    let p2 = (N) => {
      s(Number(N));
    };
    particleAuth.ethereum.on("chainChanged", p2);
    let c = () => {
      l(particleAuth.ethereum.selectedAddress);
    };
    particleAuth.ethereum.on("connect", c);
    let d = (N) => {
      N[0] && l(N[0]);
    };
    particleAuth.ethereum.on("accountsChanged", d);
    let v = () => {
      l(null);
    };
    particleAuth.ethereum.on("disconnect", v);
    let _ = ({ resolve: N, reject: Y }) => {
      y().then((Q) => {
        N(Q);
      }).catch((Q) => {
        Y(Q);
      });
    };
    return particleAuth.on(AuthCoreEvent.RequestEthereumAccount, _), () => {
      particleAuth.ethereum.off("chainChanged", p2), particleAuth.ethereum.off("connect", c), particleAuth.ethereum.off("accountsChanged", d), particleAuth.ethereum.off("disconnect", v), particleAuth.off(AuthCoreEvent.RequestEthereumAccount, _);
    };
  }, [y]), (0, import_react4.useEffect)(() => {
    n && w(requireNotNullish(Qo(n)));
  }, [n]);
  let h = () => {
    check(particleAuth, "Please init first!"), check(isConnected(), f.notLogin()), check(particleAuth.ethereum.selectedAddress, "Please create wallet first!");
  }, r = (0, import_react4.useCallback)(async (p2) => (h(), await new Promise((d, v) => {
    t.listenerCount("signResponse") > 0 ? v(f.pending("sign")) : (t.once("signResponse", (_) => {
      _.error ? v(_.error) : d(_.result), b({ particleModalVisible: false });
    }), e("evm-chain/sign", { replace: true, state: p2 }));
  })), [e, t]), o2 = (0, import_react4.useCallback)(async (p2, c) => m ? await particleAuth.ethereum.signMessage(J(p2), c) : await r({ param: J(p2), method: c ? EvmRpcMethod.personalSignUniq : EvmRpcMethod.personalSign }), [r, m]), f3 = (0, import_react4.useCallback)(async ({ data: p2, version: c, uniq: d }) => m ? await particleAuth.ethereum.signTypedData({ data: p2, version: c, uniq: d }) : await r({ param: p2, method: Jt({ version: c, uniq: d }) }), [r, m]), g = (0, import_react4.useCallback)(async (p2) => {
    if (p2.chainId && !chains_exports.getEVMChainInfoById(Number(p2.chainId)))
      throw new Error(`The chainId: ${p2.chainId} is not supported.`);
    return m ? await dt(p2) : await r({ param: { ...p2, from: u, chainId: p2.chainId || n }, method: EvmRpcMethod.ethSendTransaction });
  }, [u, n, r, m]), A = (0, import_react4.useCallback)(async (p2) => {
    await requireNotNullish(particleAuth, "Please init first!").ethereum.switchChain(p2);
  }, []), C = (0, import_react4.useCallback)(async () => (await requireNotNullish(particleAuth, "Please init first!").ethereum.enable())[0], []), I = (0, import_react4.useMemo)(() => {
    let p2 = new Se();
    return p2.signMessage = o2, p2.signTypedData = f3, p2.sendTransaction = g, p2;
  }, []);
  return (0, import_react4.useEffect)(() => {
    I && (I.signMessage = o2, I.signTypedData = f3, I.sendTransaction = g);
  }, [I, o2, f3, g]), { provider: I, address: u, chainId: n, chainInfo: i, switchChain: A, signMessage: o2, signTypedData: f3, sendTransaction: g, enable: C };
};
function Jt({ version: e, uniq: t }) {
  return SignTypedDataVersion.V1 === e ? EvmRpcMethod.ethSignTypedDataV1 : SignTypedDataVersion.V3 === e ? EvmRpcMethod.ethSignTypedDataV3 : t ? EvmRpcMethod.ethSignTypedDataV4Uniq : EvmRpcMethod.ethSignTypedDataV4;
}
var Ee = class {
  constructor() {
    this.isParticleNetwork = true;
    this.name = "Particle";
    this.url = "https://particle.network";
    this.icon = "https://static.particle.network/wallet-icons/Particle.png";
    this.signTransaction = async (t, n) => {
      throw new Error("signMessage not implemented.");
    };
    this.signAllTransactions = async (t, n) => {
      throw new Error("signMessage not implemented.");
    };
    this.signAndSendTransaction = async (t, n) => {
      throw new Error("signMessage not implemented.");
    };
    this.signMessage = async (t) => {
      throw new Error("signMessage not implemented.");
    };
    this.switchChain = async (t) => {
      var n;
      await ((n = window.particleAuth) == null ? void 0 : n.solana.switchChain(t));
    };
  }
  on(t, n) {
    var s;
    return (s = window.particleAuth) == null || s.solana.on(t, n), this;
  }
  once(t, n) {
    var s;
    return (s = window.particleAuth) == null || s.solana.once(t, n), this;
  }
  off(t, n) {
    var s;
    return (s = window.particleAuth) == null || s.solana.off(t, n), this;
  }
  removeListener(t, n) {
    var s;
    return (s = window.particleAuth) == null || s.solana.removeListener(t, n), this;
  }
  get connecting() {
    var t, n;
    return (n = (t = window.particleAuth) == null ? void 0 : t.solana.connecting) != null ? n : false;
  }
  get connected() {
    var t, n;
    return (n = (t = window.particleAuth) == null ? void 0 : t.solana.connected) != null ? n : false;
  }
  async publicKey() {
    var t;
    return (t = window.particleAuth) == null ? void 0 : t.solana.publicKey();
  }
  get selectedAddress() {
    var t, n;
    return (n = (t = window.particleAuth) == null ? void 0 : t.solana.selectedAddress) != null ? n : null;
  }
  get chainId() {
    var t, n;
    return (n = (t = window.particleAuth) == null ? void 0 : t.solana.chainId) != null ? n : 101;
  }
  async connect() {
    var t;
    await ((t = window.particleAuth) == null ? void 0 : t.solana.connect());
  }
  async disconnect() {
    var t;
    await ((t = window.particleAuth) == null ? void 0 : t.solana.disconnect());
  }
  async request(t) {
    var n;
    return (n = window.particleAuth) == null ? void 0 : n.solana.request(t);
  }
};
var nn = () => {
  var p2;
  let e = Na(), { events: t } = Ia(), [n, s] = (0, import_react6.useState)(particleAuth.solana.chainId), [i, w] = (0, import_react6.useState)(requireNotNullish(ei(particleAuth.solana.chainId))), [u, l] = (0, import_react6.useState)(particleAuth.solana.selectedAddress), { setAuthCoreModal: P } = Fa(), { connect: T } = te(), { userInfo: a } = ie(), { needRestoreWallet: b } = Z(), { modalOptions: y } = za(), m = (0, import_react6.useMemo)(() => {
    var c;
    return !(b || (a == null ? void 0 : a.security_account.has_set_payment_password) || ((c = y.promptSettingConfig) == null ? void 0 : c.promptPaymentPasswordSettingWhenSign) || getLatestAuthType() !== AuthType.jwt);
  }, [a == null ? void 0 : a.security_account.has_set_payment_password, b, (p2 = y.promptSettingConfig) == null ? void 0 : p2.promptPaymentPasswordSettingWhenSign]);
  (0, import_react6.useEffect)(() => {
    var N;
    let c = (Y) => {
      s(Y);
    };
    particleAuth.solana.on("chainChanged", c);
    let d = () => {
      l(particleAuth.solana.selectedAddress);
    };
    particleAuth.solana.on("connect", d), s((N = particleAuth.solana.chainId) != null ? N : 101);
    let v = () => {
      l(null);
    };
    particleAuth.solana.on("disconnect", v);
    let _ = ({ resolve: Y, reject: Q }) => {
      T().then((ve) => {
        Y(ve);
      }).catch((ve) => {
        Q(ve);
      });
    };
    return particleAuth.on(AuthCoreEvent.RequestSolanaAccount, _), () => {
      particleAuth.solana.off("chainChanged", c), particleAuth.solana.off("connect", d), particleAuth.solana.off("disconnect", v), particleAuth.off(AuthCoreEvent.RequestSolanaAccount, _);
    };
  }, [T]), (0, import_react6.useEffect)(() => {
    n && w(requireNotNullish(ei(n)));
  }, [n]);
  let h = () => {
    check(particleAuth, "Please init first!"), check(isConnected(), f.notLogin()), check(particleAuth.solana.selectedAddress, "Please create wallet first!");
  }, r = (0, import_react6.useCallback)(async (c) => (h(), await new Promise((v, _) => {
    t.listenerCount("signResponse") > 0 ? _(f.pending("sign")) : (t.once("signResponse", (N) => {
      N.error ? _(N.error) : v(N.result), P({ particleModalVisible: false });
    }), e("solana/sign", { replace: true, state: c }));
  })), [e]), o2 = (0, import_react6.useCallback)(async (c) => m ? await particleAuth.solana.signMessage(c) : await r({ param: c, method: SolanaRpcMethod.signMessage }), [r, m]), f3 = (0, import_react6.useCallback)(async (c, d) => (check(!d || chains_exports.getSolanaChainInfoById(d), `The chainId: ${d} is not supported`), m ? await particleAuth.solana.signTransaction(c, d) : await r({ param: c, method: SolanaRpcMethod.signTransaction, chainId: d })), [r, m]), g = (0, import_react6.useCallback)(async (c, d) => (check(!d || chains_exports.getSolanaChainInfoById(d), `The chainId: ${d} is not supported`), m ? await particleAuth.solana.signAllTransactions(c, d) : await r({ param: c, method: SolanaRpcMethod.signAllTransactions, chainId: d })), [r, m]), A = (0, import_react6.useCallback)(async (c, d) => (check(!d || chains_exports.getSolanaChainInfoById(d), `The chainId: ${d} is not supported`), m ? await particleAuth.solana.signAndSendTransaction(c, d) : await r({ param: c, method: SolanaRpcMethod.signAndSendTransaction, chainId: d })), [r, m]), C = (0, import_react6.useCallback)(async (c) => {
    await requireNotNullish(particleAuth, "Please init first!").solana.switchChain(c);
  }, []), I = (0, import_react6.useCallback)(async () => (await requireNotNullish(particleAuth, "Please init first!").solana.connect(), requireNotNullish(particleAuth.solana.selectedAddress)), []), x = (0, import_react6.useMemo)(() => {
    let c = new Ee();
    return c.signMessage = o2, c.signTransaction = f3, c.signAllTransactions = g, c.signAndSendTransaction = A, c;
  }, []);
  return (0, import_react6.useEffect)(() => {
    x && (x.signMessage = o2, x.signTransaction = f3, x.signAllTransactions = g, x.signAndSendTransaction = A);
  }, [x, o2, f3, g, A]), { address: u, chainId: n, chainInfo: i, switchChain: C, signMessage: o2, signTransaction: f3, signAllTransactions: g, signAndSendTransaction: A, enable: I, wallet: x };
};

export {
  require_numbro_min,
  walletEntryPlugin,
  Z,
  fn,
  gn,
  z,
  st,
  te,
  Vt,
  kn,
  Hn,
  $n,
  oe,
  zn,
  Dn,
  jn,
  Kn,
  Jn,
  Yn,
  ie,
  or,
  mt,
  ir,
  Lt,
  Kt,
  nn
};
/*!
	 * Copyright (c) 2017 Benjamin Van Ryseghem<benjamin@vanryseghem.com>
	 *
	 * Permission is hereby granted, free of charge, to any person obtaining a copy
	 * of this software and associated documentation files (the "Software"), to deal
	 * in the Software without restriction, including without limitation the rights
	 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	 * copies of the Software, and to permit persons to whom the Software is
	 * furnished to do so, subject to the following conditions:
	 *
	 * The above copyright notice and this permission notice shall be included in
	 * all copies or substantial portions of the Software.
	 *
	 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
	 * SOFTWARE.
	 */
//# sourceMappingURL=chunk-QHFOOEJW.js.map
