var P;(function(t){t.HEADER="header",t.QUERY="query"})(P||(P={}));var B;(function(t){t.HEADER="header",t.QUERY="query"})(B||(B={}));var L;(function(t){t.HTTP="http",t.HTTPS="https"})(L||(L={}));var M;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(M||(M={}));var _;(function(t){t[t.HEADER=0]="HEADER",t[t.TRAILER=1]="TRAILER"})(_||(_={}));var F;(function(t){t.PROFILE="profile",t.SSO_SESSION="sso-session",t.SERVICES="services"})(F||(F={}));var U;(function(t){t.HTTP_0_9="http/0.9",t.HTTP_1_0="http/1.0",t.TDS_8_0="tds/8.0"})(U||(U={}));class Z{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static isInstance(e){if(!e)return!1;const r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){const e=new Z({...this,headers:{...this.headers}});return e.query&&(e.query=G(e.query)),e}}function G(t){return Object.keys(t).reduce((e,r)=>{const n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}class k{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}}const u={},b=new Array(64);for(let t=0,e="A".charCodeAt(0),r="Z".charCodeAt(0);t+e<=r;t++){const n=String.fromCharCode(t+e);u[n]=t,b[t]=n}for(let t=0,e="a".charCodeAt(0),r="z".charCodeAt(0);t+e<=r;t++){const n=String.fromCharCode(t+e),o=t+26;u[n]=o,b[o]=n}for(let t=0;t<10;t++){u[t.toString(10)]=t+52;const e=t.toString(10),r=t+52;u[e]=r,b[r]=e}u["+"]=62;b[62]="+";u["/"]=63;b[63]="/";const m=6,E=8,J=63,K=t=>{let e=t.length/4*3;t.slice(-2)==="=="?e-=2:t.slice(-1)==="="&&e--;const r=new ArrayBuffer(e),n=new DataView(r);for(let o=0;o<t.length;o+=4){let s=0,i=0;for(let c=o,d=o+3;c<=d;c++)if(t[c]!=="="){if(!(t[c]in u))throw new TypeError(`Invalid character ${t[c]} in base64 string.`);s|=u[t[c]]<<(d-c)*m,i+=m}else s>>=m;const a=o/4*3;s>>=i%E;const h=Math.floor(i/E);for(let c=0;c<h;c++){const d=(h-c-1)*E;n.setUint8(a+c,(s&255<<d)>>d)}}return new Uint8Array(r)};function xt(t){let e="";for(let r=0;r<t.length;r+=3){let n=0,o=0;for(let i=r,a=Math.min(r+3,t.length);i<a;i++)n|=t[i]<<(a-i-1)*E,o+=E;const s=Math.ceil(o/m);n<<=s*m-o;for(let i=1;i<=s;i++){const a=(s-i)*m;e+=b[(n&J<<a)>>a]}e+="==".slice(0,4-s)}return e}const $t=t=>new TextDecoder("utf-8").decode(t),A=t=>encodeURIComponent(t).replace(/[!'()*]/g,v),v=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`;function tt(t){const e=[];for(let r of Object.keys(t).sort()){const n=t[r];if(r=A(r),Array.isArray(n))for(let o=0,s=n.length;o<s;o++)e.push(`${r}=${A(n[o])}`);else{let o=r;(n||typeof n=="string")&&(o+=`=${A(n)}`),e.push(o)}}return e.join("&")}function et(t=0){return new Promise((e,r)=>{t&&setTimeout(()=>{const n=new Error(`Request did not complete within ${t} ms`);n.name="TimeoutError",r(n)},t)})}const rt={supported:Boolean(typeof Request<"u"&&"keepalive"in new Request("https://[::1]"))};class z{static create(e){return typeof e?.handle=="function"?e:new z(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(r=>r||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config))}destroy(){}async handle(e,{abortSignal:r}={}){this.config||(this.config=await this.configProvider);const n=this.config.requestTimeout,o=this.config.keepAlive===!0;if(r?.aborted){const f=new Error("Request aborted");return f.name="AbortError",Promise.reject(f)}let s=e.path;const i=tt(e.query||{});i&&(s+=`?${i}`),e.fragment&&(s+=`#${e.fragment}`);let a="";if(e.username!=null||e.password!=null){const f=e.username??"",w=e.password??"";a=`${f}:${w}@`}const{port:h,method:c}=e,d=`${e.protocol}//${a}${e.hostname}${h?`:${h}`:""}${s}`,l={body:c==="GET"||c==="HEAD"?void 0:e.body,headers:new Headers(e.headers),method:c};typeof AbortController<"u"&&(l.signal=r),rt.supported&&(l.keepalive=o);const R=new Request(d,l),y=[fetch(R).then(f=>{const w=f.headers,g={};for(const $ of w.entries())g[$[0]]=$[1];return f.body!=null?{response:new k({headers:g,reason:f.statusText,statusCode:f.status,body:f.body})}:f.blob().then($=>({response:new k({headers:g,reason:f.statusText,statusCode:f.status,body:$})}))}),et(n)];return r&&y.push(new Promise((f,w)=>{r.onabort=()=>{const g=new Error("Request aborted");g.name="AbortError",w(g)}})),Promise.race(y)}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[e]=r,n))}httpHandlerConfigs(){return this.config??{}}}const St=t=>typeof Blob=="function"&&t instanceof Blob?nt(t):ot(t);async function nt(t){const e=await st(t),r=K(e);return new Uint8Array(r)}async function ot(t){let e=new Uint8Array(0);const r=t.getReader();let n=!1;for(;!n;){const{done:o,value:s}=await r.read();if(s){const i=e;e=new Uint8Array(i.length+s.length),e.set(i),e.set(s,i.length)}n=o}return e}function st(t){return new Promise((e,r)=>{const n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));const o=n.result??"",s=o.indexOf(","),i=s>-1?s+1:o.length;e(o.substring(i))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(t)})}const Q={},N={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),Q[t]=e,N[e]=t}function Ct(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){const n=t.slice(r,r+2).toLowerCase();if(n in N)e[r/2]=N[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return e}function Rt(t){let e="";for(let r=0;r<t.byteLength;r++)e+=Q[t[r]];return e}const At=t=>{if(t!=null){if(typeof t=="number"){if((t===0||t===1)&&C.warn(S(`Expected boolean, got ${typeof t}: ${t}`)),t===0)return!1;if(t===1)return!0}if(typeof t=="string"){const e=t.toLowerCase();if((e==="false"||e==="true")&&C.warn(S(`Expected boolean, got ${typeof t}: ${t}`)),e==="false")return!1;if(e==="true")return!0}if(typeof t=="boolean")return t;throw new TypeError(`Expected boolean, got ${typeof t}: ${t}`)}},H=t=>{if(t!=null){if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&C.warn(S(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},it=Math.ceil(2**127*(2-2**-23)),j=t=>{const e=H(t);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>it)throw new TypeError(`Expected 32-bit float, got ${t}`);return e},ct=t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},q=t=>D(t,32),V=t=>D(t,16),W=t=>D(t,8),D=(t,e)=>{const r=ct(t);if(r!==void 0&&at(r,e)!==r)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return r},at=(t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},Nt=(t,e)=>{if(t==null)throw e?new TypeError(`Expected a non-null value for ${e}`):new TypeError("Expected a non-null value");return t},Ht=t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return C.warn(S(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}},ft=t=>H(typeof t=="string"?T(t):t),dt=t=>j(typeof t=="string"?T(t):t),ht=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,T=t=>{const e=t.match(ht);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)},Ot=t=>q(typeof t=="string"?T(t):t),X=t=>V(typeof t=="string"?T(t):t),ut=t=>W(typeof t=="string"?T(t):t),S=t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),C={warn:console.warn},lt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],pt=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),Dt=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const e=pt.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");const[r,n,o,s,i,a,h,c]=e,d=X(I(n)),x=p(o,"month",1,12),l=p(s,"day",1,31);return Y(d,x,l,{hours:i,minutes:a,seconds:h,fractionalMilliseconds:c})},yt=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),It=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const e=yt.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");const[r,n,o,s,i,a,h,c,d]=e,x=X(I(n)),l=p(o,"month",1,12),R=p(s,"day",1,31),y=Y(x,l,R,{hours:i,minutes:a,seconds:h,fractionalMilliseconds:c});return d.toUpperCase()!="Z"&&y.setTime(y.getTime()-Et(d)),y},Pt=t=>{if(t==null)return;let e;if(typeof t=="number")e=t;else if(typeof t=="string")e=ft(t);else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(e)||e===1/0||e===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(e*1e3))},Y=(t,e,r,n)=>{const o=e-1;return mt(t,o,r),new Date(Date.UTC(t,o,r,p(n.hours,"hour",0,23),p(n.minutes,"minute",0,59),p(n.seconds,"seconds",0,60),wt(n.fractionalMilliseconds)))},gt=[31,28,31,30,31,30,31,31,30,31,30,31],mt=(t,e,r)=>{let n=gt[e];if(e===1&&bt(t)&&(n=29),r>n)throw new TypeError(`Invalid day for ${lt[e]} in ${t}: ${r}`)},bt=t=>t%4===0&&(t%100!==0||t%400===0),p=(t,e,r,n)=>{const o=ut(I(t));if(o<r||o>n)throw new TypeError(`${e} must be between ${r} and ${n}, inclusive`);return o},wt=t=>t==null?0:dt("0."+t)*1e3,Et=t=>{const e=t[0];let r=1;if(e=="+")r=1;else if(e=="-")r=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);const n=Number(t.substring(1,3)),o=Number(t.substring(4,6));return r*(n*60+o)*60*1e3},I=t=>{let e=0;for(;e<t.length-1&&t.charAt(e)==="0";)e++;return e===0?t:t.slice(e)},O=function(){const t=Object.getPrototypeOf(this).constructor,e=Function.bind.apply(String,[null,...arguments]),r=new e;return Object.setPrototypeOf(r,t.prototype),r};O.prototype=Object.create(String.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(O,String);export{M as A,L as E,z as F,Z as H,$t as a,Nt as b,H as c,At as d,Ht as e,K as f,q as g,k as h,Rt as i,Ct as j,A as k,Dt as l,Ot as m,It as n,Pt as p,St as s,xt as t};
